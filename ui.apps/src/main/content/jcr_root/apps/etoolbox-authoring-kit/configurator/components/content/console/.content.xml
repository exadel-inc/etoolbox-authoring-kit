<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:jcr="http://www.jcp.org/jcr/1.0"
          xmlns:cq="http://www.day.com/jcr/cq/1.0"
          xmlns:granite="http://www.adobe.com/jcr/granite/1.0"
          xmlns:sling="http://sling.apache.org/jcr/sling/1.0"
          xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
          jcr:primaryType="cq:Page">
    <jcr:content jcr:primaryType="nt:unstructured"
                 jcr:title="Exadel Toolbox Configurator"
                 sling:resourceType="granite/ui/components/shell/page"
                 sling:vanityPath="[/etoolbox/config,/etoolbox/settings,/etoolbox/localsettings]">
        <head jcr:primaryType="nt:unstructured">
            <clientlibs
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/coral/foundation/includeclientlibs"
                    categories="[eak.config.console]"/>
        </head>
        <title jcr:primaryType="nt:unstructured"
               sling:resourceType="granite/ui/components/coral/foundation/text"
               granite:id="page-title"
               text="Exadel Toolbox Configurator"/>
        <actions jcr:primaryType="nt:unstructured">
            <primary jcr:primaryType="nt:unstructured">
                <browse
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/coral/foundation/anchorbutton"
                    granite:id="button-browse"
                    granite:title="Browse all OSGi configurations"
                    href="/etoolbox/config"
                    text="All configurations"
                    variant="quiet">
                    <granite:rendercondition
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/renderconditions/feature"
                        feature="eak.configurator.canBrowse"/>
                </browse>
            </primary>
            <secondary jcr:primaryType="nt:unstructured">
                <save
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/coral/foundation/button"
                    granite:id="button-save"
                    granite:title="Save configuration in current AEM instance"
                    disabled="{Boolean}true"
                    icon="save"
                    text="Save"
                    variant="primary">
                    <granite:rendercondition
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/renderconditions/feature"
                        feature="eak.configurator.canModify"/>
                </save>
                <reset
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/coral/foundation/button"
                    granite:id="button-reset"
                    granite:title="Reset configuration in current AEM instance"
                    disabled="{Boolean}true"
                    icon="revert"
                    text="Reset"
                    variant="secondary">
                    <granite:rendercondition
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/renderconditions/feature"
                        feature="eak.configurator.canModify"/>
                </reset>
                <publish
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/coral/foundation/button"
                    granite:id="button-publish"
                    granite:title="Publish configuration"
                    disabled="{Boolean}true"
                    icon="publish"
                    text="Publish"
                    variant="warning">
                    <granite:rendercondition
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/renderconditions/feature"
                        feature="eak.configurator.canReplicate"/>
                </publish>
                <unpublish
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/coral/foundation/button"
                    granite:id="button-unpublish"
                    granite:title="Unpublish configuration"
                    disabled="{Boolean}true"
                    icon="publishRemove"
                    text="Unpublish"
                    variant="secondary">
                    <granite:rendercondition
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/renderconditions/feature"
                        feature="eak.configurator.canReplicate"/>
                </unpublish>
            </secondary>
        </actions>
        <content jcr:primaryType="nt:unstructured"
                 sling:resourceType="granite/ui/components/coral/foundation/container">
            <items jcr:primaryType="nt:unstructured">
                <columns jcr:primaryType="nt:unstructured"
                         sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns"
                         granite:class="u-coral-margin">
                    <items jcr:primaryType="nt:unstructured">
                        <alert
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="etoolbox-authoring-kit/configurator/components/content/alert"
                            text="${configAccess.error}">
                        </alert>
                        <form
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="granite/ui/components/coral/foundation/form"
                            granite:id="config"
                            method="post"
                            foundationForm="true"
                            action="/conf/etoolbox/authoring-kit/configurator${requestPathInfo.suffix}"
                            style="vertical">
                            <datasource
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="/bin/etoolbox/authoring-kit/configurator"/>
                            <granite:data
                                jcr:primaryType="nt:unstructured"
                                cleanup-action="${config.cleanupAction}"
                                change-count="${config.changeCount}"
                                modified="${config.modified}"
                                published="${config.published}"
                                replicable="${config.replicable}"/>
                            <granite:rendercondition
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/renderconditions/feature"
                                feature="eak.configurator.showForm"/>
                        </form>
                    </items>
                    <granite:data
                        jcr:primaryType="nt:unstructured"
                        reload-target="${requestPathInfo.resourcePath}.html${requestPathInfo.suffix}"/>
                </columns>
            </items>
        </content>
    </jcr:content>
</jcr:root>
