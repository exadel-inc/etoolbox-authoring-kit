{"version":3,"file":"site.js","mappings":"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","sources":["webpack://eak-website/webpack/bootstrap","webpack://eak-website/webpack/runtime/global","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/environment/export-ns.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/types.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/abstract/dom-target.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/attr.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/prop.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/events/misc.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/functions.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/array.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/memoize.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/utils.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/memoize.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/compare.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/path.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/format.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/traversing.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/rect.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/api.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/scroll/parent.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-traversing-query/core/esl-traversing-query.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/visible.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/window.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-event-listener/core/listener.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-event-listener/core/descriptors.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-event-listener/core/api.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/class.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-base-element/core/esl-base-element.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/async/raf.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/attr.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/listen.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/decorate.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/rtl.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/async/debounce.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/async/promise/defered.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/merge.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/events/target.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/environment/device-detector.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-dpr.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-breakpoint.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/common/env-shortcuts.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-const.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-base.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-condition.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-containers.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-query.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule-list.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/bool-attr.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/ready.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/ready.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/keys.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable-placeholder.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-trigger/core/esl-trigger.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-tab/core/esl-tab.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-tab/core/esl-tabs.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/json-attr.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/uid.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/async/delayed-task.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/copy.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable-dispatcher.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-panel/core/esl-panel.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-panel-group/core/esl-panel-group.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/bind.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-scrollbar/core/esl-scrollbar.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-image/core/esl-image-iobserver.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/sanitize.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-image/core/esl-image-strategies.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-image/core/esl-image.js","webpack://eak-website/./src/navigation/sidebar/sidebar.ts","webpack://eak-website/./src/landing/banner/banner.ts","webpack://eak-website/./src/eak-zoom-image/eak-zoom-image.ts","webpack://eak-website/./src/site.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","const NS_NAME = 'ESL';\n/**\n * Nested declaration helper\n */\nfunction define(root, name, value) {\n    name.split('.').reduce((obj, key, index, parts) => {\n        if (parts.length === index + 1) {\n            return (obj[key] = obj[key] || value);\n        }\n        const type = typeof obj[key];\n        if (type !== 'undefined' && type !== 'object' && type !== 'function') {\n            throw new Error(`Can not define ${value} on ${name}`);\n        }\n        return (obj[key] = obj[key] || {});\n    }, root);\n}\n/**\n * Method to manually declare key in library namespace\n * See {@link ExportNs} decorator for details\n */\nexport const exportNs = (name, module) => {\n    if (!(NS_NAME in window))\n        return;\n    define(window[NS_NAME], name, module);\n};\n/**\n * Decorator to declare function or class in a global ns\n * @param name - key path to declare in ESL global ns\n * NOTE: path parts should be separated by dots\n * @example\n * ```ts\n * @Export('Package.Component')\n * ```\n * NOTE: in case declaration contains components-packages, their origins will be mixed with declaration in a Runtime\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function ExportNs(name) {\n    return (module) => exportNs(name || module.name, module);\n}\n/** Declare ESL global */\nExportNs.declare = () => {\n    if ('ESL' in window)\n        return;\n    Object.defineProperty(window, 'ESL', { value: {} });\n};\n","/** Checks that passed value is object, but not a callable-object (function) */\nexport const isObject = (obj) => !!obj && typeof obj === 'object';\n/** Checks that passed value is an object or function */\nexport const isObjectLike = (obj) => isObject(obj) || typeof obj === 'function';\n/** Checks if the passed value is primitive */\nexport const isPrimitive = (obj) => obj === null ||\n    typeof obj === 'undefined' ||\n    typeof obj === 'string' ||\n    typeof obj === 'number' ||\n    typeof obj === 'boolean' ||\n    typeof obj === 'symbol';\n/** Checks that passed object is prototype of some class */\nexport const isPrototype = (obj) => Object.hasOwnProperty.call(obj, 'constructor');\n/** Checks that passed object is array-like */\nexport const isArrayLike = (value) => {\n    if (!value || typeof value !== 'object')\n        return false;\n    if (Array.isArray(value))\n        return true;\n    if (typeof value.length !== 'number' || value.length < 0)\n        return false;\n    return !value.length || Object.hasOwnProperty.call(value, value.length - 1);\n};\n","import { isObject } from '../misc/object/types';\nexport function resolveDomTarget(obj) {\n    if (obj instanceof Element)\n        return obj;\n    if (isObject(obj) && obj.$host instanceof Element)\n        return obj.$host;\n    return null;\n}\n","import { resolveDomTarget } from '../abstract/dom-target';\n/** @returns true if attribute presented */\nexport function hasAttr($el, name) {\n    if (Array.isArray($el))\n        return $el.every((element) => hasAttr(element, name));\n    if (!($el = resolveDomTarget($el)))\n        return false;\n    return $el.hasAttribute(name);\n}\nexport function getAttr($el, name, fallback = null) {\n    if (Array.isArray($el))\n        return getAttr($el[0], name);\n    if (!($el = resolveDomTarget($el)))\n        return null;\n    const value = $el.getAttribute(name);\n    return value === null ? fallback : value;\n}\n/** Sets attribute */\nexport function setAttr($el, name, value) {\n    if (Array.isArray($el)) {\n        $el.forEach((element) => setAttr(element, name, value));\n        return;\n    }\n    if (!($el = resolveDomTarget($el)))\n        return;\n    if (value === undefined || value === null || value === false) {\n        $el.removeAttribute(name);\n    }\n    else {\n        $el.setAttribute(name, value === true ? '' : value);\n    }\n}\n","/**\n * `@prop` is auxiliary decorator to define a field on the prototype level.\n *` @prop` can be used to override decorated property from the parent level\n *\n * You can also use an @override decorator in combination with ECMA Script class property definition:\n * `@prop() public field: any = initial value;`\n *\n * The class property initial value is a part of object creation, so it goes to the object itself,\n * while the @override value is defined on the prototype level.\n *\n * @param value - value to setup in prototype\n * @param prototypeConfig - prototype property configuration\n */\nexport function prop(value, prototypeConfig = {}) {\n    return function (obj, name) {\n        if (Object.hasOwnProperty.call(obj, name)) {\n            throw new TypeError('Can\\'t override own property');\n        }\n        Object.defineProperty(obj, name, {\n            value,\n            writable: !prototypeConfig.readonly,\n            enumerable: !prototypeConfig.enumerable,\n            configurable: true\n        });\n        return {};\n    };\n}\n","/** Checks if the passed event is {@link MouseEvent} */\nexport const isMouseEvent = (event) => window.MouseEvent && event instanceof MouseEvent;\n/** Checks if the passed event is {@link TouchEvent} */\nexport const isTouchEvent = (event) => window.TouchEvent && event instanceof TouchEvent;\n/** Checks if the passed event is {@link PointerEvent} */\nexport const isPointerEvent = (event) => window.PointerEvent && event instanceof PointerEvent;\nconst PASSIVE_EVENTS = ['wheel', 'mousewheel', 'touchstart', 'touchmove'];\n/**\n * @returns true if the passed event should be passive by default\n * @see https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n */\nexport const isPassiveByDefault = (event) => PASSIVE_EVENTS.includes(event);\n/** Gets the original CustomEvent source in case event bubbles from Shadow DOM */\nexport const getCompositeTarget = (e) => {\n    const targets = (e.composedPath && e.composedPath());\n    return targets ? targets[0] : e.target;\n};\n/** @returns touch point coordinates of {@link TouchEvent} or {@link PointerEvent} */\nexport const getTouchPoint = (event) => {\n    const source = isTouchEvent(event) ? event.changedTouches[0] : event;\n    return {\n        x: source.pageX,\n        y: source.pageY\n    };\n};\n/** @returns element offset point coordinates */\nexport const getOffsetPoint = (el) => {\n    const props = el.getBoundingClientRect();\n    const y = props.top + window.scrollY;\n    const x = props.left + window.scrollX;\n    return { x, y };\n};\n/**\n * Dispatches custom event.\n * Event bubbles and is cancelable by default, use `eventInit` to override that.\n * @param el - EventTarget to dispatch event\n * @param eventName - name of the event to dispatch\n * @param eventInit - object that specifies characteristics of the event. See {@link CustomEventInit}\n */\nexport const dispatchCustomEvent = (el, eventName, eventInit) => {\n    const init = Object.assign({\n        bubbles: true,\n        composed: true,\n        cancelable: true\n    }, eventInit || {});\n    return el.dispatchEvent(new CustomEvent(eventName, init));\n};\n/**\n * Overrides {@link Event} `target` property\n * @param event - {@link Event} to override\n * @param key - {@link Event} property\n * @param target - {@link EventTarget} to setup\n * @returns original event\n */\nexport const overrideEvent = (event, key, target) => {\n    const provider = typeof target === 'function' ? target : (() => target);\n    Object.defineProperty(event, key, {\n        get: provider,\n        enumerable: true,\n        configurable: true\n    });\n    return event;\n};\n","/** Function that does nothing */\nexport const noop = () => undefined;\n/** Function that returns the first argument */\nexport const identity = (arg) => arg;\n/** Resolves {@link PropertyProvider} function to the value */\nexport const resolveProperty = (val, origin) => typeof val === 'function' ? val.call(origin, origin) : val;\n","import { identity } from './functions';\nimport { isArrayLike } from './object';\n/** Split array into tuples */\nexport const tuple = (arr) => arr.reduce((acc, el) => {\n    if (acc.length === 0 || acc[acc.length - 1].length >= 2)\n        acc.push([]);\n    acc[acc.length - 1].push(el);\n    return acc;\n}, []);\n/** Flat array - unwraps one level of nested arrays */\nexport const flat = (arr) => arr.reduce((acc, el) => el ? acc.concat(el) : acc, []);\n/** Wraps passed object or primitive to array */\nexport const wrap = (arr) => {\n    if (arr === undefined || arr === null)\n        return [];\n    if (Array.isArray(arr))\n        return arr;\n    return [arr];\n};\nexport function unwrap(value) {\n    return isArrayLike(value) ? value[0] : value;\n}\n/** Makes array values unique */\nexport const uniq = (arr) => {\n    if (arr.length < 2)\n        return arr.slice(0);\n    const result = [];\n    const set = new Set();\n    arr.forEach((item) => set.add(item));\n    set.forEach((item) => result.push(item));\n    return result;\n};\nexport function range(n, filler = identity) {\n    const arr = Array(n);\n    let i = 0;\n    while (i < n)\n        arr[i] = filler(i++);\n    return arr;\n}\n/**\n * @returns object with a criteria value as a key and an array of original items that belongs to the current criteria value\n */\nexport const groupBy = (array, group) => {\n    return array.reduce((obj, el) => {\n        const key = group(el);\n        obj[key] ? obj[key].push(el) : obj[key] = [el];\n        return obj;\n    }, {});\n};\n","/**\n * Memoization decorator function. Caches the original function result according to hash generated from arguments.\n * In case the hash function returns `undefined` value will not be memoized.\n * @see MemoHashFn Hash function signature.\n */\nexport function memoizeFn(fn, hashFn = defaultArgsHashFn) {\n    function memo(...args) {\n        const key = hashFn(...args);\n        if (key !== null && typeof key !== 'string') {\n            console.warn(`[ESL]: Can't cache value for ${fn.name} call.`);\n            return fn.apply(this, args);\n        }\n        if (!memo.cache.has(key)) {\n            memo.cache.set(key, fn.apply(this, args));\n        }\n        return memo.cache.get(key);\n    }\n    memo.cache = new Map();\n    memo.clear = () => memo.cache.clear();\n    memo.has = (...args) => {\n        const key = hashFn(...args);\n        return key === undefined ? false : memo.cache.has(key);\n    };\n    return memo;\n}\n/**\n * Default arguments hash function.\n * Supports only 0-1 arguments with a primitive type.\n */\nexport function defaultArgsHashFn(...args) {\n    if (args.length === 0)\n        return null;\n    if (args.length > 1)\n        return;\n    if (typeof args[0] !== 'string' && typeof args[0] !== 'number' && typeof args[0] !== 'boolean')\n        return;\n    return String(args[0]);\n}\n","/** @returns first defined param */\nexport function defined(...params) {\n    for (const param of params) {\n        if (param !== undefined)\n            return param;\n    }\n}\n/** Finds the closest property descriptor */\nexport function getPropertyDescriptor(o, prop) {\n    let proto = o;\n    while (proto) {\n        const desc = Object.getOwnPropertyDescriptor(proto, prop);\n        if (desc)\n            return desc;\n        proto = Object.getPrototypeOf(proto);\n    }\n}\nexport function extractValues(obj, filter) {\n    if (!obj)\n        return [];\n    const desc = [];\n    for (const key in obj) {\n        if (filter(obj[key], key))\n            desc.push(obj[key]);\n    }\n    return desc;\n}\n","import { defaultArgsHashFn, memoizeFn } from '../misc/memoize';\nimport { isPrototype, getPropertyDescriptor } from '../misc/object';\n/**\n * Memoization decorator helper.\n * @see memoizeFn Original memoizeFn function decorator.\n */\nexport function memoize(hashFn = defaultArgsHashFn) {\n    return function (target, prop, descriptor) {\n        if (!descriptor || typeof (descriptor.value || descriptor.get) !== 'function') {\n            throw new TypeError('Only get accessors or class methods can be decorated via @memoize');\n        }\n        if (isPrototype(target)) {\n            // Object members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeGetter(descriptor.get, prop));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeMethod(descriptor.value, prop, hashFn));\n        }\n        else {\n            // Static members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeFn(descriptor.get));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeFn(descriptor.value, hashFn));\n        }\n    };\n}\n// Lock storage to prevent cache logic for some key\nconst locks = new WeakMap();\nconst defineOwnKeySafe = (obj, prop, value) => {\n    locks.set(obj, prop); // IE try to get key with the prototype instance call, so we lock it\n    Object.defineProperty(obj, prop, { value, writable: true, configurable: true });\n    locks.delete(obj); // Free property key\n};\n/** Cache getter result as an object own property */\nfunction memoizeGetter(originalMethod, prop) {\n    return function () {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const value = originalMethod.call(this);\n        defineOwnKeySafe(this, prop, value);\n        return value;\n    };\n}\n/** Cache method memo function in the current context on call */\nfunction memoizeMethod(originalMethod, prop, hashFn) {\n    return function (...args) {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const memo = memoizeFn(originalMethod, hashFn);\n        defineOwnKeySafe(this, prop, memo);\n        return memo.apply(this, args);\n    };\n}\nfunction clearMemo(target, property) {\n    if (Array.isArray(property))\n        return property.forEach((prop) => memoize.clear(target, prop));\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return;\n    if (typeof desc.get === 'function' && typeof desc.get.clear === 'function')\n        return desc.get.clear();\n    if (typeof desc.value === 'function' && typeof desc.value.clear === 'function')\n        return desc.value.clear();\n    if (Object.hasOwnProperty.call(target, property))\n        delete target[property];\n}\nmemoize.clear = clearMemo;\nfunction hasMemo(target, property, ...params) {\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return false;\n    if (typeof desc.get === 'function' && typeof desc.get.has === 'function')\n        return desc.get.has(...params);\n    if (typeof desc.value === 'function' && typeof desc.value.has === 'function')\n        return desc.value.has(...params);\n    return Object.hasOwnProperty.call(target, property);\n}\nmemoize.has = hasMemo;\n","import { isObject } from './types';\n/** Deeply compares passed objects */\nexport function isEqual(obj1, obj2) {\n    if (Object.is(obj1, obj2))\n        return true;\n    if (typeof obj1 !== typeof obj2)\n        return false;\n    if (isObject(obj1) && isObject(obj2)) {\n        const keys1 = Object.keys(obj1);\n        const keys2 = Object.keys(obj2);\n        if (keys1.length !== keys2.length)\n            return false;\n        return !keys1.some((key) => !isEqual(obj1[key], obj2[key]));\n    }\n    return false;\n}\n/** @deprecated alias for `isEqual` method */\nexport const deepCompare = isEqual;\n/** Check if arr and arr mask has intersection */\nfunction isIntersect(arrObj, arrMask, comparer) {\n    return arrMask.every((key) => arrObj.some((itm) => comparer(itm, key)));\n}\n/**\n * Checks if all keys presented in the `mask` are equal to the `obj` keys\n * Note: array order is not taken into account and uses intersection strategy\n */\nexport function isSimilar(obj, mask, deep = true) {\n    if (Array.isArray(obj) && Array.isArray(mask))\n        return isIntersect(obj, mask, deep ? isSimilar : Object.is);\n    if (!isObject(obj) || !isObject(mask))\n        return Object.is(obj, mask);\n    return Object.keys(mask).every((key) => (deep ? isSimilar : Object.is)(obj[key], mask[key]));\n}\n","import { isObjectLike } from './types';\n/** @returns PathKeyDef from the PathDef */\nconst toKeyDef = (key) => typeof key === 'object' ? key : { key };\n/** Parses path to full {@link PathKeyDef} array */\nexport const parseKeys = (path) => {\n    if (Array.isArray(path))\n        return path.map(toKeyDef);\n    return parseKeysPath(path || '.');\n};\n/** Parses string path to full {@link PathKeyDef} array */\nconst parseKeysPath = (path) => {\n    let start = 0;\n    const parts = [];\n    while (start < path.length) {\n        let end = start = start + +(path[start] === '.'); // skip initial '.'\n        if (path[start] === '[') { // handle index syntax\n            end = ++start; // start bracket ignored\n            while (end < path.length && path[end] !== ']')\n                ++end;\n            const key = path.substring(start, end);\n            const isIndex = !key || Math.floor(+key) === +key;\n            parts.push({ key, isIndex });\n            start = ++end; // skip end bracket\n        }\n        else { // handle simple key\n            while (end < path.length && path[end] !== '[' && path[end] !== '.')\n                ++end;\n            const key = path.substring(start, end);\n            parts.push({ key });\n            start = end;\n        }\n    }\n    return parts;\n};\n/**\n * Gets object property using \"path\" key\n *\n * Supports three types of key definition\n * - full array of {@link PathKeyDef}\n * - array of keys (string or number), can be mixed with a full definitions {@link PathKeyDef}\n * - string path mode (supports index syntax):\n *   - `a.b` - simple key access (`{a : {b: val}}`)\n *   - `a[0]` - index access, creates collection if it's not exists  (`{a : [val]}`)\n *   - `a[]` - pushes to the end of collection (`{a : [..., val]}`)\n *   - `a[a.b.c]` - escaping: non-numeric indexes uses as a simple keys, delimiters inside square brackets are ignored (`{a : {'a.b.c': val}}`)\n *\n * @param data - object\n * @param path - key path. string or {@link PathKey} array\n * @param defaultValue - default\n * @returns specified object property\n */\nexport const getByPath = (data, path, defaultValue) => {\n    const keys = parseKeys(path);\n    const result = keys.reduce((curr, { key }) => {\n        if (isObjectLike(curr))\n            return curr[key];\n        return undefined;\n    }, data);\n    return typeof result === 'undefined' ? defaultValue : result;\n};\n/**\n * Gets object property using \"path\" with a keys separated by `.`\n * @see getByPath\n */\nexport const get = (data, path, defaultValue) => getByPath(data, (path || '').split('.'), defaultValue);\n/**\n * Sets object property using \"path\" key\n * Creates empty object if sub-key value is not presented.\n *\n * Supports three types of key definition\n * - full array of {@link PathKeyDef}\n * - array of keys (string or number), can be mixed with a full definitions {@link PathKeyDef}\n * - string path mode (supports index syntax and collection creation):\n *   - `a.b` - simple key access (`{a : {b: val}}`)\n *   - `a[0]` - index access, creates collection if it's not exists  (`{a : [val]}`)\n *   - `a[]` - pushes to the end of collection (`{a : [..., val]}`)\n *   - `a[a.b.c]` - escaping: non-numeric indexes uses as a simple keys, delimiters inside square brackets are ignored (`{a : {'a.b.c': val}}`)\n *\n * @param target - object\n * @param path - key path. string or {@link PathKey} array\n * @param value - value of property\n * @returns original object\n */\nexport const setByPath = (target, path, value) => {\n    const keys = parseKeys(path);\n    const depth = keys.length - 1;\n    keys.reduce((cur, { key, isIndex, isIndexed }, pos) => {\n        if (isIndex && !key)\n            key = cur.length || 0; // a[] only\n        if (pos !== depth && isObjectLike(cur[key]))\n            return cur[key]; // key already presented\n        if (isIndexed === undefined && pos !== depth)\n            isIndexed = keys[pos + 1].isIndex;\n        return cur[key] = (pos === depth) ? value : (isIndexed ? [] : {});\n    }, target);\n    return target;\n};\n/**\n * Sets object property using \"path\" with a keys separated by `.`\n * @see setByPath\n */\nexport const set = (target, path, value) => setByPath(target, (path || '').split('.'), value);\n","import { get } from './object';\n/** Converts string to kebab-case notation */\nexport const toKebabCase = (str) => {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').replace(/[\\s_]+/g, '-').toLowerCase();\n};\n/** Converts string to camelCase notation */\nexport const toCamelCase = (str) => {\n    return str.trim().replace(/[\\s-,_]+([a-zA-Z0-9]?)/g, (match, word) => word.toUpperCase());\n};\n/** Makes the first non-indent (space, tab, newline) letter in the string capitalized */\nexport const capitalize = (str) => {\n    let i = 0;\n    while (i < str.length && (str[i] === ' ' || str[i] === '\\t' || str[i] === '\\n'))\n        i++;\n    return str.slice(0, i) + str.charAt(i).toUpperCase() + str.slice(i + 1);\n};\n/** Unwraps string from parenthesis */\nexport const unwrapParenthesis = (str) => {\n    return str.trim().replace(/^\\((.*)\\)$/, '$1').trim();\n};\n/** Parses `null` and `undefined` as an empty string */\nexport const parseString = (val) => String(val !== null && val !== void 0 ? val : '');\n/** Parses string representation of the boolean value */\nexport const parseBoolean = (val) => val !== null && val !== 'false';\n/**\n * Parses number with the ability to pass an alternative fallback for NaN.\n * Note: falsy values except 0 are treated as NaN\n */\nexport const parseNumber = (str, nanValue) => {\n    if (str === 0)\n        return 0;\n    const value = +(str || NaN);\n    return isNaN(value) ? nanValue : value;\n};\n/**\n * Common function that returns coefficient aspect ratio\n * Supported formats: w:h, w/h, coefficient\n * @example\n * `16:9`, `16/9`, `1.77`\n * @param str - string to parse\n * @returns aspect ratio coefficient\n */\nexport function parseAspectRatio(str) {\n    const [w, h] = str.split(/[:/]/);\n    if (typeof h !== 'undefined')\n        return +w / +h;\n    return +w || 0;\n}\n/** Evaluates passed string or returns `defaultValue` */\nexport function evaluate(str, defaultValue) {\n    try {\n        // eslint-disable-next-line @typescript-eslint/no-implied-eval\n        return str ? (new Function(`return ${str}`))() : defaultValue;\n    }\n    catch (e) {\n        console.warn('[ESL]: Cannot parse value ', str, e);\n        return defaultValue;\n    }\n}\n/** Default RegExp to match replacements in the string for the {@link format} function */\nexport const DEF_FORMAT_MATCHER = /{[{%]?([\\w.]+)[%}]?}/g;\n/** Replaces `{key}` patterns in the string from the source object */\nexport function format(str, source, matcher = DEF_FORMAT_MATCHER) {\n    return str.replace(matcher, (match, key) => {\n        const val = get(source, key);\n        return val === undefined ? match : val;\n    });\n}\n","/** Checks if element matches passed selector or exact predicate function */\nexport const isMatches = (el, matcher) => {\n    if (typeof matcher === 'string')\n        return !matcher || el.matches(matcher);\n    if (typeof matcher === 'function')\n        return matcher.call(el, el);\n    return typeof matcher === 'undefined';\n};\n/** Checks that `nodeA` and `nodeB` are from the same tree path */\nexport const isRelativeNode = (nodeA, nodeB) => {\n    return !!(nodeA && nodeB) && (nodeA.contains(nodeB) || nodeB.contains(nodeA));\n};\n/** Creates function that finds next dom element, that matches selector, in the sequence declared by `next` function */\nexport const createSequenceFinder = (next, includeSelf = false) => {\n    return function (base, predicate) {\n        if (includeSelf && isMatches(base, predicate))\n            return base;\n        for (let target = next(base); target && target !== base; target = next(target)) {\n            if (isMatches(target, predicate))\n                return target;\n        }\n        return null;\n    };\n};\n/** @returns first matching next sibling or null*/\nexport const findNext = createSequenceFinder((el) => el.nextElementSibling);\n/** @returns first matching previous sibling or null*/\nexport const findPrev = createSequenceFinder((el) => el.previousElementSibling);\n/** @returns first matching parent or null*/\nexport const findParent = createSequenceFinder((el) => el.parentElement);\n/** @returns first matching ancestor starting from passed element or null*/\nexport const findClosest = createSequenceFinder((el) => el.parentElement, true);\n/** @returns first matching host element starting from passed element*/\nexport const findHost = createSequenceFinder((el) => {\n    const root = el.getRootNode();\n    return (root instanceof ShadowRoot) ? root.host : null;\n}, true);\n/** @returns Array of all matching elements in subtree or empty array */\nexport const findAll = (base, sel) => {\n    return sel ? Array.from(base.querySelectorAll(sel)) : [base];\n};\n/** @returns Array of all matching children or empty array */\nexport const findChildren = (base, sel) => {\n    return Array.from(base.children).filter((el) => !sel || el.matches(sel));\n};\n/**\n * Finds closest parent node of `node` by `predicate`.\n * Optional `skipSelf` to skip initial node\n */\nexport const findClosestBy = (node, predicate, skipSelf = false) => {\n    let current = skipSelf && node ? node.parentNode : node;\n    while (current) {\n        if (predicate(current))\n            return current;\n        current = current.parentNode;\n    }\n    return null;\n};\n/**\n * Finds looped next element within parent circle\n */\nexport const findNextLooped = createSequenceFinder((el) => el.nextElementSibling || (el.parentElement && el.parentElement.firstElementChild));\n/**\n * Finds looped previous element within parent circle (looped)\n */\nexport const findPrevLooped = createSequenceFinder((el) => el.previousElementSibling || (el.parentElement && el.parentElement.lastElementChild));\n/** @deprecated Cumulative traversing utility set */\nexport class TraversingUtils {\n}\nTraversingUtils.isRelative = isRelativeNode;\nTraversingUtils.closestBy = findClosestBy;\nTraversingUtils.createSequenceFinder = createSequenceFinder;\nTraversingUtils.findNext = findNext;\nTraversingUtils.findPrev = findPrev;\nTraversingUtils.findParent = findParent;\nTraversingUtils.findClosest = findClosest;\nTraversingUtils.findAll = findAll;\nTraversingUtils.findChildren = findChildren;\n","/**\n * A Rect describes the size and position of a rectangle.\n */\nexport class Rect {\n    /**\n     * The static method creates a new Rect instance from a rect-like object.\n     * @param rect - rect-like object\n     */\n    static from(rect = {}) {\n        return new this(rect.x || rect.left, rect.y || rect.top, rect.width, rect.height);\n    }\n    /**\n     * The static method checks the equality of the two Rect instances.\n     * @param rect1 - first instance of Rect\n     * @param rect2 - second instance of Rect\n     */\n    static isEqual(rect1, rect2) {\n        return rect1.x === rect2.x && rect1.y === rect2.y && rect1.width === rect2.width && rect1.height === rect2.height;\n    }\n    /**\n     * The static method returns intersection Rect of two Rect instances\n     * @param rect1 - first instance of Rect\n     * @param rect2 - second instance of Rect\n     */\n    static intersect(rect1, rect2) {\n        const top = Math.max(rect1.top, rect2.top);\n        const left = Math.max(rect1.left, rect2.left);\n        const bottom = Math.min(rect1.bottom, rect2.bottom);\n        const right = Math.min(rect1.right, rect2.right);\n        const width = Math.max(right - left, 0);\n        const height = Math.max(bottom - top, 0);\n        return Rect.from({ top, left, width, height });\n    }\n    constructor(x, y, width, height) {\n        /** The X coordinate of the Rect's origin (top-left corner of the rectangle). */\n        this.x = 0;\n        /** The Y coordinate of the Rect's origin (top-left corner of the rectangle). */\n        this.y = 0;\n        /** The width of the Rect. */\n        this.width = 0;\n        /** The height of the Rect. */\n        this.height = 0;\n        this.x = x || 0;\n        this.y = y || 0;\n        this.width = width || 0;\n        this.height = height || 0;\n    }\n    /**\n     * Get the top coordinate value of the Rect (has the same value as y).\n     */\n    get top() {\n        return this.y;\n    }\n    /**\n     * Get the left coordinate value of the Rect (has the same value as x).\n     */\n    get left() {\n        return this.x;\n    }\n    /**\n     * Get the right coordinate value of the DOMRect.\n     */\n    get right() {\n        return this.x + this.width;\n    }\n    /**\n     * Get the bottom coordinate value of the Rect.\n     */\n    get bottom() {\n        return this.y + this.height;\n    }\n    /**\n     * Get the center X coordinate value of the Rect.\n     */\n    get cx() {\n        return this.x + this.width / 2;\n    }\n    /**\n     * Get the center Y coordinate value of the Rect.\n     */\n    get cy() {\n        return this.y + this.height / 2;\n    }\n    grow(incrementX, incrementY = incrementX) {\n        this.y -= incrementY;\n        this.x -= incrementX;\n        this.height += 2 * incrementY;\n        this.width += 2 * incrementX;\n        return this;\n    }\n    shrink(decrementX, decrementY = decrementX) {\n        return this.grow(-decrementX, -decrementY);\n    }\n    /** @returns the numeric value of rectangle area */\n    get area() {\n        return this.height * this.width;\n    }\n}\n","/**\n * Get the Element that is the root element of the document.\n * @param element - element for which to get the document element\n * */\nexport const getDocument = (element = window) => {\n    return (element instanceof Window ? element.document : element.ownerDocument).documentElement;\n};\n/**\n * Get the name of node.\n * @param element - element for which to get the name\n */\nexport const getNodeName = (element) => {\n    return element && !(element instanceof Window) ? (element.nodeName).toLowerCase() : '';\n};\n/**\n * Get the parent of the specified element in the DOM tree.\n * @param element - element for which to get the parent\n */\nexport const getParentNode = (element) => {\n    if (getNodeName(element) === 'html')\n        return element;\n    return (window.ShadowRoot\n        ? element instanceof ShadowRoot\n            ? element.host\n            : element.assignedSlot || element.parentNode\n        : element.parentNode) || getDocument(element);\n};\n","import { getNodeName, getParentNode } from '../api';\n/**\n * Get the list of all scroll parents, up the list of ancestors until we get to the top window object.\n * @param element - element for which you want to get the list of all scroll parents\n * @param list - array of elements to concatenate with the list of all scroll parents of element (optional)\n */\nexport function getListScrollParents(element, list = []) {\n    var _a;\n    const scrollParent = getScrollParent(element);\n    const isBody = scrollParent === ((_a = element.ownerDocument) === null || _a === void 0 ? void 0 : _a.body);\n    const target = isBody\n        ? isScrollable(scrollParent) ? scrollParent : []\n        : scrollParent;\n    const updatedList = list.concat(target);\n    return isBody\n        ? updatedList\n        : updatedList.concat(getListScrollParents(getParentNode(scrollParent)));\n}\n/**\n * Get the scroll parent of the specified element in the DOM tree.\n * @param node - element for which to get the scroll parent\n */\nexport function getScrollParent(node) {\n    var _a;\n    if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n        return (_a = node.ownerDocument) === null || _a === void 0 ? void 0 : _a.body;\n    }\n    if (node instanceof HTMLElement && isScrollable(node)) {\n        return node;\n    }\n    return getScrollParent(getParentNode(node));\n}\n/**\n * Check that element is scroll parent.\n * @param element - element for checking\n * */\nexport function isScrollable(element) {\n    // Firefox wants us to check `-x` and `-y` variations as well\n    const { overflow, overflowX, overflowY } = getComputedStyle(element);\n    return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLTraversingQuery_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { tuple, wrap, uniq } from '../../esl-utils/misc/array';\nimport { unwrapParenthesis } from '../../esl-utils/misc/format';\nimport { findAll, findChildren, findNext, findParent, findClosest, findPrev } from '../../esl-utils/dom/traversing';\nimport { isVisible } from '../../esl-utils/dom/visible';\n/**\n * Traversing Query utility to find element via extended selector query\n * Extended query supports\n * - plain CSS selectors\n * - relative selectors (selectors that don't start from a plain selector will use passed base Element as a root)\n * - ::next and ::prev sibling pseudo-selectors\n * - ::parent, ::closest and ::child pseudo-selectors\n * - ::find pseudo-selector\n * - ::first, ::last and :nth(#) limitation pseudo-selectors\n * - ::filter, ::not filtration pseudo-selectors\n *\n * @example\n * - `#id .class [attr]` - find by CSS selector in a current document\n * - ` ` - get current base element\n * - `::next` - get next sibling element\n * - `::prev` - get previous sibling element\n * - `::parent` - get base element parent\n * - `::parent(#id .class [attr])` - find the closest parent matching passed selector\n * - `::closest(#id .class [attr])` - find the closest ancestor including base element that matches passed selector\n * - `::child(#id .class [attr])` - find direct child element(s) that match passed selector\n * - `::find(#id .class [attr])` - find child element(s) that match passed selector\n * - `::find(buttons, a)::not([hidden])` - find all buttons and anchors that are not have hidden attribute\n * - `::find(buttons, a)::filter(:first-child)` - find all buttons and anchors that are first child in container\n * - `::parent::child(some-tag)` - find direct child element(s) that match tag 'some-tag' in the parent\n * - `#id .class [attr]::parent` - find parent of element matching selector '#id .class [attr]' in document\n * - `::find(.row)::last::parent` - find parent of the last element matching selector '.row' from the base element subtree\n */\nexport let ESLTraversingQuery = ESLTraversingQuery_1 = class ESLTraversingQuery {\n    /**\n     * @returns RegExp that selects all known processors in query string\n     * e.g. /(::parent|::closest|::child|::next|::prev)/\n     */\n    static get PROCESSORS_REGEX() {\n        const keys = Object.keys(this.ELEMENT_PROCESSORS).concat(Object.keys(this.COLLECTION_PROCESSORS));\n        return new RegExp(`(${keys.join('|')})`, 'g');\n    }\n    static isCollectionProcessor([name]) {\n        return !!name && (name in this.COLLECTION_PROCESSORS);\n    }\n    static processElement(el, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.ELEMENT_PROCESSORS))\n            return [];\n        return wrap(this.ELEMENT_PROCESSORS[name](el, sel));\n    }\n    static processCollection(els, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.COLLECTION_PROCESSORS))\n            return [];\n        return wrap(this.COLLECTION_PROCESSORS[name](els, sel));\n    }\n    static traverseChain(collection, processors, findFirst) {\n        if (!processors.length || !collection.length)\n            return collection;\n        const [processor, ...rest] = processors;\n        if (this.isCollectionProcessor(processor)) {\n            const processedItem = this.processCollection(collection, processor);\n            return this.traverseChain(processedItem, rest, findFirst);\n        }\n        const result = [];\n        for (const target of collection) {\n            const processedItem = this.processElement(target, processor);\n            const resultCollection = this.traverseChain(processedItem, rest, findFirst);\n            if (!resultCollection.length)\n                continue;\n            if (findFirst)\n                return resultCollection.slice(0, 1);\n            result.push(...resultCollection);\n        }\n        return uniq(result);\n    }\n    /** Split multiple queries separated by comma (respects query brackets) */\n    // This can be solved by RegEx /(?<!\\([^\\)]*),(?![^\\(]*\\))/g)/, when the WebKit browser implements this feature\n    static splitQueries(str) {\n        let last = 0;\n        let stack = 0;\n        const result = [];\n        for (let i = 0; i < str.length; i++) {\n            if (str[i] === '(')\n                stack++;\n            if (str[i] === ')')\n                stack = Math.max(0, stack - 1);\n            if (str[i] === ',' && !stack) {\n                result.push(str.substring(last, i).trim());\n                last = i + 1;\n            }\n        }\n        result.push(str.substring(last).trim());\n        return result;\n    }\n    static traverse(query, findFirst, base, scope = document) {\n        const found = [];\n        for (const part of ESLTraversingQuery_1.splitQueries(query)) {\n            const els = this.traverseQuery(part, findFirst, base, scope);\n            if (findFirst && els.length)\n                return [els[0]];\n            found.push(...els);\n        }\n        return uniq(found);\n    }\n    static traverseQuery(query, findFirst, base, scope = document) {\n        const parts = query.split(this.PROCESSORS_REGEX).map((term) => term.trim());\n        const rootSel = parts.shift();\n        const baseCollection = base ? [base] : [];\n        const initial = rootSel ? Array.from(scope.querySelectorAll(rootSel)) : baseCollection;\n        return this.traverseChain(initial, tuple(parts), findFirst);\n    }\n    /** @returns first matching element reached via {@link ESLTraversingQuery} rules */\n    static first(query, base, scope) {\n        return ESLTraversingQuery_1.traverse(query, true, base, scope)[0] || null;\n    }\n    /** @returns Array of all matching elements reached via {@link ESLTraversingQuery} rules */\n    static all(query, base, scope) {\n        return ESLTraversingQuery_1.traverse(query, false, base, scope);\n    }\n};\nESLTraversingQuery.ELEMENT_PROCESSORS = {\n    '::find': findAll,\n    '::next': findNext,\n    '::prev': findPrev,\n    '::child': findChildren,\n    '::parent': findParent,\n    '::closest': findClosest\n};\nESLTraversingQuery.COLLECTION_PROCESSORS = {\n    '::first': (list) => list.slice(0, 1),\n    '::last': (list) => list.slice(-1),\n    '::nth': (list, sel) => {\n        const index = sel ? +sel : NaN;\n        return wrap(list[index - 1]);\n    },\n    '::not': (list, sel) => list.filter((el) => !el.matches(sel || '')),\n    '::visible': (list) => list.filter((el) => (el instanceof HTMLElement) && isVisible(el)),\n    '::filter': (list, sel) => list.filter((el) => el.matches(sel || ''))\n};\nESLTraversingQuery = ESLTraversingQuery_1 = __decorate([\n    ExportNs('TraversingQuery')\n], ESLTraversingQuery);\n/** @deprecated alias for {@link ESLTraversingQuery} */\nexport const TraversingQuery = ESLTraversingQuery;\n","import { Rect } from './rect';\nimport { getListScrollParents } from './scroll';\nimport { findClosestBy, findHost } from './traversing';\nimport { getWindowRect } from './window';\n/**\n * Checks if the specified element is visible\n * @param el - element to be checked\n * @param options - object of additional visibility options to include\n */\nexport function isVisible(el, options = { visibility: true }) {\n    if (!el.getClientRects().length)\n        return false;\n    if (options.visibility && findHost(el, (host) => getComputedStyle(host).visibility === 'hidden'))\n        return false;\n    if (options.opacity &&\n        findClosestBy(el, (parent) => parent instanceof Element && getComputedStyle(parent).opacity === '0'))\n        return false;\n    return !(options.viewport && !isInViewport(el));\n}\n/**\n * Checks if the specified element is inside the viewport\n * @param el - element to be checked\n */\nexport function isInViewport(el) {\n    const wndIntersection = Rect.intersect(getWindowRect(), Rect.from(el.getBoundingClientRect()));\n    if (wndIntersection.area === 0)\n        return false;\n    return !getListScrollParents(el).some((parent) => Rect.intersect(wndIntersection, Rect.from(parent.getBoundingClientRect())).area === 0);\n}\n","import { Rect } from './rect';\n/**\n * Get the window object associated with a document of the specified element.\n * @param node - element for which to get window\n * */\nexport function getWindow(node) {\n    if (node === null)\n        return window;\n    if (node instanceof Window)\n        return node;\n    const ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n}\n/**\n * Get the size and position of the window.\n * @returns\n */\nexport function getWindowRect(wnd = window) {\n    return Rect.from({\n        x: wnd.scrollX || wnd.pageXOffset,\n        y: wnd.scrollY || wnd.pageYOffset,\n        width: wnd.innerWidth || wnd.document.documentElement.clientWidth,\n        height: wnd.innerHeight || wnd.document.documentElement.clientHeight\n    });\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { wrap } from '../../esl-utils/misc/array';\nimport { resolveProperty } from '../../esl-utils/misc/functions';\nimport { memoize } from '../../esl-utils/decorators/memoize';\nimport { isObject } from '../../esl-utils/misc/object/types';\nimport { isSimilar } from '../../esl-utils/misc/object/compare';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { isPassiveByDefault } from '../../esl-utils/dom/events/misc';\nimport { resolveDomTarget } from '../../esl-utils/abstract/dom-target';\n/** Key to store listeners on the host */\nconst LISTENERS = (window.Symbol || String)('__esl_listeners');\n/**\n * Splits and deduplicates event string\n * @returns array of unique events presented in events string\n */\nexport const splitEvents = (events) => {\n    const terms = (events || '').split(' ').map((term) => term.trim());\n    const deduplicate = new Set();\n    return terms.filter((term) => {\n        if (!term || deduplicate.has(term))\n            return false;\n        deduplicate.add(term);\n        return true;\n    });\n};\n/**\n * `EventListener` instance, used as an 'inner' record to process subscriptions made by `ESLEventUtils`\n * Uses `EventListenerObject` interface to subscribe on event.\n *\n * Use Chrome console `getEventListeners` method to check subscribers details when debugging ESLEventListener subscriptions.\n * */\nexport class ESLEventListener {\n    constructor(host, event, handler, desc) {\n        this.host = host;\n        this.event = event;\n        this.handler = handler;\n        const defaults = {\n            capture: false,\n            passive: isPassiveByDefault(event)\n        };\n        Object.assign(this, defaults, desc, { event });\n    }\n    /** @returns target element to listen */\n    get $targets() {\n        const target = resolveProperty(this.target, this.host);\n        if (isObject(target))\n            return wrap(target);\n        const $host = resolveDomTarget(this.host);\n        if (typeof target === 'string')\n            return ESLTraversingQuery.all(target, $host);\n        if (typeof target === 'undefined' && $host instanceof Element)\n            return [$host];\n        return [];\n    }\n    /** @returns resolved selector to check event target */\n    get delegate() {\n        return resolveProperty(this.selector, this.host);\n    }\n    /**\n     * Checks if the passed criteria matches current event listener\n     * - `string` type criteria checked by the `event` name\n     * - `function` type criteria checked by the `handler` reference\n     * - `object` type criteria checked as descriptor using `isSimilar` comparer\n     * Note: `function` (handler) marcher has a priority over descriptor check, so handler function own properties will be ignored\n     */\n    matches(desc) {\n        if (typeof desc === 'string')\n            return this.event === desc;\n        if (typeof desc === 'function')\n            return this.handler === desc;\n        if (typeof desc === 'object')\n            return isSimilar(this, desc, false);\n        return false;\n    }\n    /**\n     * Memoized builder for bound and decorated low level subscription.\n     * Implements DOM API {@link EventListenerObject.handleEvent}\n     */\n    get handleEvent() {\n        const handlerBound = this.handler.bind(this.host);\n        const handlerFull = this.once\n            ? (e) => (handlerBound(e), this.unsubscribe())\n            : handlerBound;\n        return this.selector\n            ? (e) => this.handleDelegation(e, handlerFull)\n            : handlerFull;\n    }\n    /** Executes handler if the passed event is accepted by the selector */\n    handleDelegation(e, handler) {\n        const { delegate } = this;\n        const target = e.target;\n        const current = e.currentTarget;\n        if (typeof delegate !== 'string' || !delegate)\n            return;\n        if (!(target instanceof Element) || !(current instanceof Element))\n            return;\n        const $delegate = target.closest(delegate);\n        if (current.contains($delegate))\n            handler(Object.assign(e, { $delegate }));\n    }\n    /**\n     * (Re-)Subscribes event listener instance\n     * @returns if subscription was successful\n     */\n    subscribe() {\n        const { passive, capture } = this;\n        this.unsubscribe();\n        memoize.clear(this, '$targets');\n        memoize.clear(this, 'handleEvent');\n        if (!this.$targets.length)\n            return false;\n        this.$targets.forEach((el) => el.addEventListener(this.event, this, { passive, capture }));\n        ESLEventListener.add(this.host, this);\n        return true;\n    }\n    /** Unsubscribes event listener instance */\n    unsubscribe() {\n        const { capture } = this;\n        if (!memoize.has(this, '$targets'))\n            return;\n        this.$targets.forEach((el) => el.removeEventListener(this.event, this, { capture }));\n        ESLEventListener.remove(this.host, this);\n    }\n    /**\n     * Gets stored listeners array the passed `host` object\n     * Supports additional filtration criteria\n     */\n    static get(host, ...criteria) {\n        if (!isObject(host))\n            return [];\n        const listeners = (host[LISTENERS] || []);\n        if (!criteria.length)\n            return listeners;\n        return listeners.filter((listener) => criteria.every(listener.matches, listener));\n    }\n    /** Adds listener to the listener store of the host object */\n    static add(host, instance) {\n        if (!isObject(host))\n            return;\n        if (!Object.hasOwnProperty.call(host, LISTENERS))\n            host[LISTENERS] = [];\n        host[LISTENERS].push(instance);\n    }\n    /** Removes listener from the listener store of the host object */\n    static remove(host, instance) {\n        const listeners = ESLEventListener.get(host);\n        const value = listeners.filter((listener) => listener !== instance);\n        Object.defineProperty(host, LISTENERS, { value, configurable: true });\n    }\n    /**\n     * Subscribes `handler` function with the passed event type or {@link ESLListenerDescriptor} with event type declared\n     * @param host - host object (listeners context) to associate subscription\n     * @param handler - handler function to subscribe\n     * @param descriptor - event or {@link ESLListenerDescriptor} with defined event type\n     */\n    static subscribe(host, handler, descriptor = handler) {\n        if (typeof handler !== 'function')\n            return [];\n        const eventDesc = handler !== descriptor ? Object.assign({}, handler, descriptor) : descriptor;\n        const listeners = ESLEventListener.createOrResolve(host, handler, eventDesc);\n        return listeners.filter((listener) => listener.subscribe());\n    }\n    /** Creates or resolves existing event listeners by handler and descriptors */\n    static createOrResolve(host, handler, desc) {\n        if (!isObject(host))\n            return [];\n        const eventString = resolveProperty(desc.event, host);\n        const listeners = [];\n        for (const event of splitEvents(eventString)) {\n            const subscribed = ESLEventListener.get(host, event, handler, {\n                target: desc.target,\n                selector: desc.selector,\n                capture: !!desc.capture\n            });\n            if (subscribed.length)\n                listeners.push(...subscribed);\n            else\n                listeners.push(new ESLEventListener(host, event, handler, desc));\n        }\n        return listeners;\n    }\n}\n__decorate([\n    memoize()\n], ESLEventListener.prototype, \"$targets\", null);\n__decorate([\n    memoize()\n], ESLEventListener.prototype, \"handleEvent\", null);\n","import { isObject } from '../../esl-utils/misc/object/types';\n/** Key to store listeners on the host */\nconst DESCRIPTORS = (window.Symbol || String)('__esl_descriptors');\n/**\n * @param host - host object\n * @returns object own descriptors keys or an empty array\n */\nfunction getOwnDescriptorsKeys(host) {\n    return Object.hasOwnProperty.call(host, DESCRIPTORS) ? host[DESCRIPTORS] : [];\n}\n/**\n * Marks host own key to be auto-collectable\n * @param host - host object\n * @param key - descriptor own key\n */\nfunction addDescriptorKey(host, key) {\n    const value = getOwnDescriptorsKeys(host);\n    if (!value.includes(key))\n        value.push(key);\n    Object.defineProperty(host, DESCRIPTORS, { value, configurable: true });\n}\n/** Collects descriptors key from the whole prototype chain */\nfunction getDescriptorsKeysFor(host) {\n    const store = {};\n    for (let proto = host; proto; proto = Object.getPrototypeOf(proto)) {\n        getOwnDescriptorsKeys(proto).forEach((key) => (store[key] = true));\n    }\n    return Object.keys(store);\n}\n/** Type guard to check if the passed function is typeof {@link ESLListenerDescriptorFn} */\nexport function isEventDescriptor(obj) {\n    if (typeof obj !== 'function' || !Object.hasOwnProperty.call(obj, 'event'))\n        return false;\n    return typeof obj.event === 'string' || typeof obj.event === 'function';\n}\n/** Gets {@link ESLListenerDescriptorFn}s of the passed object */\nexport function getAutoDescriptors(host) {\n    if (!isObject(host))\n        return [];\n    const keys = getDescriptorsKeysFor(host);\n    const values = keys.map((key) => host[key]);\n    return values.filter((desc) => isEventDescriptor(desc) && desc.auto === true);\n}\n/**\n * Decorates passed `key` of the `host` as an {@link ESLListenerDescriptorFn} using `desc` meta information\n * @param host - object holder of the function to decorate\n * @param key - string key of the function in holder object\n * @param desc - descriptor meta information to assign\n * @returns ESLListenerDescriptorFn created on the host\n */\nexport function initDescriptor(host, key, desc) {\n    const fn = host[key];\n    if (typeof fn !== 'function')\n        throw new TypeError(`[ESL] Init Descriptor: ${key} is not a function`);\n    // Inherit event meta information from the prototype key\n    if (desc.inherit) {\n        const superDesc = Object.getPrototypeOf(host)[key];\n        if (!isEventDescriptor(superDesc))\n            throw new ReferenceError(`[ESL] Init Descriptor: no parent event descriptor found for ${key}`);\n        desc = Object.assign({ auto: false }, superDesc, desc);\n    }\n    else {\n        desc = Object.assign({ auto: false }, desc);\n    }\n    if (desc.auto)\n        addDescriptorKey(host, key);\n    return Object.assign(fn, desc);\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { dispatchCustomEvent } from '../../esl-utils/dom/events/misc';\nimport { ESLEventListener } from './listener';\nimport { getAutoDescriptors, isEventDescriptor, initDescriptor } from './descriptors';\nexport let ESLEventUtils = class ESLEventUtils {\n    /**\n     * Gets currently subscribed listeners of the host\n     * @param host - host object (listeners context) to associate subscription\n     * @param criteria - optional set of criteria {@link ESLListenerCriteria} to filter listeners list\n     */\n    static listeners(host, ...criteria) {\n        return ESLEventListener.get(host, ...criteria);\n    }\n    static subscribe(host, eventDesc, handler = eventDesc) {\n        if (arguments.length === 1) {\n            const descriptors = getAutoDescriptors(host);\n            // TODO: flatMap when ES5 will be out of support list\n            return descriptors.reduce((acc, desc) => acc.concat(ESLEventListener.subscribe(host, desc)), []);\n        }\n        if (typeof eventDesc === 'string')\n            eventDesc = { event: eventDesc };\n        const listeners = ESLEventListener.subscribe(host, handler, eventDesc);\n        if (!listeners.length) {\n            const mergedDesc = Object.assign({}, eventDesc, { handler });\n            console.warn('[ESL]: Empty subscription %o', mergedDesc);\n        }\n        return listeners;\n    }\n    /**\n     * Unsubscribes {@link ESLEventListener}(s) from the object\n     * @param host - host element that stores subscriptions (listeners context)\n     * @param criteria - optional set of criteria {@link ESLListenerCriteria} to filter listeners to remove\n     */\n    static unsubscribe(host, ...criteria) {\n        const listeners = ESLEventListener.get(host, ...criteria);\n        listeners.forEach((listener) => listener.unsubscribe());\n        return listeners;\n    }\n};\n/**\n * Dispatches custom event. Alias for {@link dispatchCustomEvent}\n * @see dispatchCustomEvent\n */\nESLEventUtils.dispatch = dispatchCustomEvent;\n/** @deprecated alias for {@link getAutoDescriptors} */\nESLEventUtils.descriptors = getAutoDescriptors;\n/** Gets {@link ESLListenerDescriptorFn}s of the passed object */\nESLEventUtils.getAutoDescriptors = getAutoDescriptors;\n/**\n * Decorates passed `key` of the `host` as an {@link ESLListenerDescriptorFn} using `desc` meta information\n * @param host - object holder of the function to decorate\n * @param key - string key of the function in holder object\n * @param desc - descriptor meta information to assign\n * @returns ESLListenerDescriptorFn created on the host\n */\nESLEventUtils.initDescriptor = initDescriptor;\n/** Type guard to check if the passed function is typeof {@link ESLListenerDescriptorFn} */\nESLEventUtils.isEventDescriptor = isEventDescriptor;\nESLEventUtils = __decorate([\n    ExportNs('EventUtils')\n], ESLEventUtils);\n/** @deprecated alias for {@link ESLEventUtils} */\nexport const EventUtils = ESLEventUtils;\n","import { wrap } from '../misc/array';\n/** Store locks for key element classes*/\nconst lockStore = new WeakMap();\n/** Mange className lock for the element */\nconst lock = (el, className, locker) => {\n    const elLocks = lockStore.get(el) || new Map();\n    const classLocks = elLocks.get(className) || new Set();\n    classLocks.add(locker);\n    elLocks.set(className, classLocks);\n    lockStore.set(el, elLocks);\n};\n/**\n * Manage className unlock for the element\n * @returns true if className have no locks\n */\nconst unlock = (el, className, locker) => {\n    const elLocks = lockStore.get(el);\n    if (!elLocks)\n        return true;\n    const classLocks = elLocks.get(className);\n    if (!classLocks)\n        return true;\n    classLocks.delete(locker);\n    return !classLocks.size;\n};\n/**\n * Add single class to the element.\n * Supports inversion and locker management.\n */\nconst add = (el, className, locker) => {\n    if (className[0] === '!')\n        return remove(el, className.substring(1), locker);\n    if (locker)\n        lock(el, className, locker);\n    el.classList.add(className);\n};\n/**\n * Remove single class from the element.\n * Supports inversion and locker management.\n */\nconst remove = (el, className, locker) => {\n    if (className[0] === '!')\n        return add(el, className.substring(1), locker);\n    if (locker && !unlock(el, className, locker))\n        return;\n    if (!locker)\n        CSSClassUtils.unlock(el, className);\n    el.classList.remove(className);\n};\n/**\n * Check if the element matches passed CSS class.\n * Supports inversion.\n */\nconst has = (el, className) => {\n    if (className[0] === '!')\n        return !has(el, className.substring(1));\n    return el.classList.contains(className);\n};\n/**\n * CSS class manipulation utilities.\n *\n * Allows manipulating with CSS classes with the following set of sub-features:\n * - JQuery-like enumeration - you can pass multiple tokens separated by space\n * - safe checks - empty or falsy token sting will be ignored without throwing an error\n * - inversion syntax - tokens that start from '!' will be processed with inverted action\n * (e.g. addCls(el, '!class') - will remove 'class' from the element, while removeCls(el, '!class') adds 'class' to the element)\n * - class locks - you can manipulate with classes using `locker` option that takes into account the modification initiator.\n * That means the class added in 'locker' mode will not be removed until all initiators that requested add class have requested its removal.\n * */\nexport class CSSClassUtils {\n    /** Splitting passed token string into CSS class names array. */\n    static splitTokens(tokenString) {\n        return (tokenString || '').split(' ').filter((str) => !!str);\n    }\n    /**\n     * Add all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static add(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => add(el, className, locker)));\n    }\n    /**\n     * Remove all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static remove(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => remove(el, className, locker)));\n    }\n    /**\n     * Toggle all classes from the class token string on the element to the passed state.\n     * @see CSSClassUtils\n     * */\n    static toggle(els, cls, state, locker) {\n        (state ? CSSClassUtils.add : CSSClassUtils.remove)(els, cls, locker);\n    }\n    /**\n     * Check if all class from token string matches to the element or elements.\n     * @see CSSClassUtils\n     * */\n    static has(els, cls) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        return wrap(els).every((el) => tokens.every((className) => has(el, className)));\n    }\n    /** Remove all lockers for the element or passed element className */\n    static unlock(els, className) {\n        if (className) {\n            wrap(els).forEach((el) => { var _a; return (_a = lockStore.get(el)) === null || _a === void 0 ? void 0 : _a.delete(className); });\n        }\n        else {\n            wrap(els).forEach((el) => lockStore.delete(el));\n        }\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { prop } from '../../esl-utils/decorators';\nimport { ESLEventUtils } from '../../esl-utils/dom/events';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\n/** Finalize tag name (`is`) for passed ESLBaseElement-based class */\nconst finalize = (type, tagName) => {\n    Object.defineProperty(type, 'is', {\n        get: () => tagName,\n        set(value) {\n            if (this === type)\n                throw Error(`[ESL]: Cannot override ${type.name}.is property, the class is already registered`);\n            Object.defineProperty(this, 'is', { value, writable: true, configurable: true });\n        }\n    });\n};\n/**\n * Base class for ESL custom elements\n * Allows defining custom element with the optional custom tag name\n */\nexport class ESLBaseElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this._connected = false;\n    }\n    /** @returns custom element tag name */\n    get baseTagName() {\n        return this.constructor.is;\n    }\n    connectedCallback() {\n        this._connected = true;\n        this.classList.add(this.baseTagName);\n        ESLEventUtils.subscribe(this);\n    }\n    disconnectedCallback() {\n        this._connected = false;\n        ESLEventUtils.unsubscribe(this);\n    }\n    /**\n     * Callback to handle changing of element attributes.\n     * Happens when attribute accessed for writing independently of the actual value change\n     */\n    attributeChangedCallback(name, oldValue, newValue) { }\n    /** Check that the element is connected and `connectedCallback` has been executed */\n    get connected() {\n        return this._connected;\n    }\n    $$on(event, handler) {\n        return ESLEventUtils.subscribe(this, event, handler);\n    }\n    /** Unsubscribes event listener */\n    $$off(...condition) {\n        return ESLEventUtils.unsubscribe(this, ...condition);\n    }\n    /**\n     * Gets or sets CSS classes for the current element.\n     * @param cls - CSS classes query {@link CSSClassUtils}\n     * @param value - boolean to set CSS class(es) state or undefined to skip mutation\n     * @returns current classes state or passed state\n     */\n    $$cls(cls, value) {\n        if (value === undefined)\n            return CSSClassUtils.has(this, cls);\n        CSSClassUtils.toggle(this, cls, value);\n        return value;\n    }\n    /**\n     * Gets or sets an attribute for the current element.\n     * If the `value` param is undefined then skips mutation.\n     * @param name - attribute name\n     * @param value - string attribute value, boolean attribute state or `null` to delete attribute\n     * @returns the current attribute value or previous value for mutation\n     */\n    $$attr(name, value) {\n        const prevValue = this.getAttribute(name);\n        if (value !== undefined)\n            setAttr(this, name, value);\n        return prevValue;\n    }\n    /**\n     * Dispatches component custom event.\n     * @param eventName - event name\n     * @param eventInit - custom event init. See {@link CustomEventInit}\n     */\n    $$fire(eventName, eventInit) {\n        return ESLEventUtils.dispatch(this, eventName, eventInit);\n    }\n    /**\n     * Register component in the {@link customElements} registry\n     * @param tagName - custom tag name to register custom element\n     */\n    static register(tagName) {\n        tagName = tagName || this.is;\n        if (!tagName)\n            throw new DOMException('[ESL]: Incorrect tag name', 'NotSupportedError');\n        const constructor = customElements.get(tagName);\n        if (constructor && (constructor !== this || constructor.is !== tagName)) {\n            throw new DOMException('[ESL]: Element tag already occupied or inconsistent', 'NotSupportedError');\n        }\n        if (constructor)\n            return;\n        finalize(this, tagName);\n        customElements.define(tagName, this);\n    }\n    /** Shortcut for `customElements.whenDefined(currentCustomElement)` */\n    static get registered() {\n        return customElements.whenDefined(this.is);\n    }\n    static create() {\n        return document.createElement(this.is);\n    }\n}\n/** Custom element tag name */\nESLBaseElement.is = '';\n__decorate([\n    prop('esl:refresh')\n], ESLBaseElement.prototype, \"REFRESH_EVENT\", void 0);\n","/**\n * Postpone action after next render\n */\nexport const afterNextRender = (callback) => requestAnimationFrame(() => requestAnimationFrame(callback));\n/**\n * Postpone action after a couple of renders\n */\nexport const skipOneRender = (callback) => requestAnimationFrame(() => afterNextRender(callback));\n/**\n * Decorate function to schedule execution after next render\n * @returns decorated function\n */\nexport const rafDecorator = (fn) => {\n    let lastArgs = null; // null if no calls requested\n    return function (...args) {\n        if (lastArgs === null) {\n            requestAnimationFrame(() => {\n                lastArgs && fn.call(this, ...lastArgs);\n                lastArgs = null;\n            });\n        }\n        lastArgs = args;\n    };\n};\n","import { identity } from '../misc/functions';\nimport { parseString, toKebabCase } from '../misc/format';\nimport { getAttr, setAttr } from '../dom/attr';\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value.\n * Maps string type property.\n * @param config - mapping configuration. See {@link AttrDescriptor}\n */\nexport const attr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        function get() {\n            const val = getAttr(this, attrName);\n            if (val === null && 'defaultValue' in config)\n                return config.defaultValue;\n            return (config.parser || parseString)(val);\n        }\n        function set(value) {\n            setAttr(this, attrName, (config.serializer || identity)(value));\n        }\n        Object.defineProperty(target, propName, config.readonly ? { get } : { get, set });\n        return {};\n    };\n};\n","import { ESLEventUtils } from '../../esl-event-listener/core';\nexport function listen(desc) {\n    return function listener(target, propertyKey) {\n        // Map short event or event provider value to descriptor object\n        desc = typeof desc === 'string' || typeof desc === 'function' ? { event: desc } : desc;\n        // Makes auto collectable/subscribable description if not inherited\n        desc = Object.assign(desc.inherit ? {} : { auto: true }, desc);\n        ESLEventUtils.initDescriptor(target, propertyKey, desc);\n    };\n}\n","import { getPropertyDescriptor } from '../misc/object/utils';\n/**\n * Common TS decorator to apply decorator function\n * (like {@link debounce}, {@link throttle}, {@link rafDecorator})\n * to the class method\n * @param decorator - function decorator, should accept decorated method as first argument\n * @param args - additional arguments to pass into `decorator`\n */\nexport function decorate(decorator, ...args) {\n    return function (target, propertyKey, descriptor) {\n        if (!descriptor || typeof descriptor.value !== 'function') {\n            throw new TypeError('Only class methods can be decorated');\n        }\n        const originalFn = descriptor.value;\n        return descriptor = {\n            enumerable: descriptor.enumerable,\n            configurable: true,\n            get: function getBound() {\n                // Skip own properties\n                const proto = Object.getPrototypeOf(this);\n                // Find the closest descriptor for property\n                const desc = getPropertyDescriptor(proto, propertyKey);\n                // Return original function in case of prototype or super call\n                if (!desc || desc.get !== getBound)\n                    return originalFn;\n                // Create a new decorated instance of function\n                const decoratedFn = decorator(originalFn.bind(this), ...args);\n                // Copy original function own keys\n                Object.assign(decoratedFn, originalFn);\n                // Defines own property with the decorated instance\n                return this[propertyKey] = decoratedFn;\n            },\n            set(value) {\n                Object.defineProperty(this, propertyKey, {\n                    value,\n                    writable: true,\n                    configurable: true,\n                    enumerable: descriptor.enumerable\n                });\n            }\n        };\n    };\n}\n","/** Checks if the element in a RTL direction context */\nexport const isRTL = (el) => getComputedStyle(el || document.body).direction === 'rtl';\n/** Creates the dummy test element with a horizontal scroll presented */\nconst createDummyScroll = () => {\n    const el = document.createElement('div');\n    el.appendChild(document.createTextNode('ESL!'));\n    el.dir = 'rtl';\n    Object.assign(el.style, {\n        position: 'absolute',\n        top: '-1000px',\n        width: '4px',\n        height: '1px',\n        fontSize: '14px',\n        overflow: 'scroll'\n    });\n    return el;\n};\nexport const testRTLScrollType = () => {\n    let scrollType = 'default';\n    const el = createDummyScroll();\n    document.body.appendChild(el);\n    if (el.scrollLeft <= 0) {\n        el.scrollLeft = 2;\n        scrollType = el.scrollLeft < 2 ? 'negative' : 'reverse';\n    }\n    document.body.removeChild(el);\n    return scrollType;\n};\nlet type = null;\nexport const RTLScroll = {\n    /** @returns RTL scroll type (lazy, memoized) */\n    get type() {\n        if (typeof type === 'string')\n            return type;\n        return type = testRTLScrollType();\n    }\n};\nexport const normalizeScrollLeft = (el, value = null, isRtl = isRTL(el)) => {\n    value = (value === null) ? el.scrollLeft : value;\n    switch (isRtl ? RTLScroll.type : '') {\n        case 'negative':\n            return el.scrollWidth - el.clientWidth + value;\n        case 'reverse':\n            return el.scrollWidth - el.clientWidth - value;\n        default:\n            return value;\n    }\n};\n/** @deprecated use separate functions from the module */\nexport class RTLUtils {\n    /** @deprecated use {@link RTLScroll}.type instead */\n    static get scrollType() {\n        return RTLScroll.type;\n    }\n}\n/** @deprecated use {@link isRTL} instead */\nRTLUtils.isRtl = isRTL;\n/** @deprecated use {@link normalizeScrollLeft} instead */\nRTLUtils.normalizeScrollLeft = normalizeScrollLeft;\n","import { createDeferred } from './promise/defered';\n/**\n * Creates a debounced function that implements {@link Debounced}.\n * Debounced function delays invoking func until after wait milliseconds have elapsed\n * since the last time the debounced function was invoked.\n * The func is invoked with the last arguments provided to the debounced function.\n * @param fn - function to decorate\n * @param wait - time to debounce\n * @param thisArg - optional context to call original function, use debounced method call context if not defined\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function debounce(fn, wait = 10, thisArg) {\n    let timeout = null;\n    let deferred = null;\n    function debouncedSubject(...args) {\n        deferred = deferred || createDeferred();\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = window.setTimeout(() => {\n            timeout = null;\n            // fn.apply to save call context\n            deferred.resolve(fn.apply(thisArg || this, args));\n            deferred = null;\n        }, wait);\n    }\n    function cancel() {\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = null;\n        deferred === null || deferred === void 0 ? void 0 : deferred.reject();\n        deferred = null;\n    }\n    Object.defineProperty(debouncedSubject, 'promise', {\n        get: () => deferred ? deferred.promise : Promise.resolve()\n    });\n    Object.defineProperty(debouncedSubject, 'cancel', {\n        writable: false,\n        enumerable: false,\n        value: cancel\n    });\n    return debouncedSubject;\n}\n","/**\n * Creates Deferred Object that wraps promise and its resolve and reject callbacks\n */\nexport function createDeferred() {\n    let reject;\n    let resolve;\n    // Both reject and resolve will be assigned anyway while the Promise constructing.\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve, reject };\n}\n","import { isObject } from './types';\nexport function deepMerge(...objects) {\n    return objects.reduce((res, obj) => {\n        if (typeof obj === 'undefined')\n            return res;\n        if (typeof res === 'undefined')\n            res = Array.isArray(obj) ? [] : {};\n        if (!isObject(obj) || !isObject(res))\n            return obj;\n        Object.keys(obj).forEach((key) => {\n            res[key] = isObject(obj[key]) ? deepMerge(res[key], obj[key]) : obj[key];\n        });\n        return res;\n    }, undefined);\n}\n","var _a;\nimport { flat, uniq } from '../../misc/array';\nimport { overrideEvent } from './misc';\n/** Key to store listeners on the {@link SyntheticEventTarget} instance*/\nconst LISTENERS = Symbol('_listeners');\n/**\n * Synthetic implementation of EventTarget\n * Replicates behavior of native event\n * Doesn't give explicit access to callback storage\n */\nexport class SyntheticEventTarget {\n    constructor() {\n        this[_a] = {};\n    }\n    getEventListeners(type) {\n        if (typeof type !== 'string')\n            return uniq(flat(Object.values(this[LISTENERS])));\n        return this[LISTENERS][type] || [];\n    }\n    hasEventListener(type = 'change', minCount = 0) {\n        if (typeof type !== 'string')\n            return this.hasEventListener('change', type || 0); // TODO: remove in 5.0.0\n        return this.getEventListeners(type).length > minCount;\n    }\n    addEventListener(type, callback) {\n        if (typeof type !== 'string')\n            return this.addEventListener(this.constructor.DEFAULT_EVENT, type);\n        validateEventListenerType(callback);\n        const listeners = this[LISTENERS][type];\n        if (listeners === null || listeners === void 0 ? void 0 : listeners.includes(callback))\n            return;\n        if (listeners)\n            listeners.push(callback);\n        else\n            Object.assign(this[LISTENERS], { [type]: [callback] });\n    }\n    removeEventListener(type, callback) {\n        if (typeof type !== 'string')\n            return this.removeEventListener(this.constructor.DEFAULT_EVENT, type);\n        validateEventListenerType(callback);\n        const listeners = this[LISTENERS][type];\n        if (!listeners)\n            return;\n        this[LISTENERS][type] = listeners.filter((cb) => cb !== callback);\n    }\n    dispatchEvent(e, target) {\n        overrideEvent(e, 'currentTarget', this);\n        if (target)\n            overrideEvent(e, 'target', target); // TODO: remove in 5.0.0\n        if (!e.target)\n            overrideEvent(e, 'target', this);\n        if (!e.srcElement)\n            overrideEvent(e, 'srcElement', e.target); // TODO: remove in 5.0.0\n        this.getEventListeners(e.type).forEach((listener) => {\n            if (typeof listener === 'function')\n                listener.call(this, e);\n            else\n                listener.handleEvent.call(listener, e);\n        });\n        return e.defaultPrevented;\n    }\n    /** @deprecated alias for `addEventListener` */\n    addListener(cb) {\n        this.addEventListener(cb);\n    }\n    /** @deprecated alias for `removeEventListener` */\n    removeListener(cb) {\n        this.removeEventListener(cb);\n    }\n}\n_a = LISTENERS;\n// Event type to use in the shortcutted calls\nSyntheticEventTarget.DEFAULT_EVENT = 'change';\nfunction validateEventListenerType(callback) {\n    if (!callback || typeof callback !== 'function' && typeof callback.handleEvent !== 'function') {\n        throw Error('Callback should be a function or EventListenerObject');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from './export-ns';\nconst { userAgent, vendor, platform } = window.navigator;\n// IE Detection\nexport const isTrident = /trident/i.test(userAgent);\nexport const isIE = isTrident;\n// Edge Detection\nexport const isEdgeHTML = /edg([ea]|ios)/i.test(userAgent);\nexport const isBlinkEdge = /\\sedg\\//i.test(userAgent);\nexport const isEdge = isEdgeHTML || isBlinkEdge;\n// Gecko\nexport const isGecko = /gecko/i.test(userAgent) && !/like gecko/i.test(userAgent);\nexport const isFirefox = /firefox|iceweasel|fxios/i.test(userAgent);\n// Opera / Chrome\nexport const isOpera = /(?:^opera.+?version|opr)/.test(userAgent);\nexport const isChrome = !isOpera && /google inc/.test(vendor);\n// Webkit\nexport const isWebkit = /(apple)?webkit/i.test(userAgent);\n// Safari\nexport const isSafari = isWebkit && /^((?!chrome|android).)*safari/i.test(userAgent);\n// Blink\nexport const isBlink = isWebkit && !isSafari;\n// Bot detection\nexport const isBot = /Chrome-Lighthouse|Google Page Speed Insights/i.test(userAgent);\n// Mobile\nexport const isAndroid = /Android/i.test(userAgent);\nexport const isMobileIOS13 = /* iOS 13+ detection */ (platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\nexport const isMobileIOS = /iPad|iPhone|iPod/.test(platform) || isMobileIOS13;\nexport const isLegacyMobile = /webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\nexport const isMobile = isMobileIOS || isAndroid || isLegacyMobile;\nexport const isMobileSafari = isMobileIOS && isWebkit && /CriOS/i.test(userAgent);\n// Touch Detection\nexport const isTouchDevice = (() => {\n    const navApi = window.navigator;\n    if (navApi.maxTouchPoints || navApi.msMaxTouchPoints)\n        return true;\n    return ('ontouchstart' in window) || ('DocumentTouch' in window && document instanceof Touch);\n})();\n// Hover check\n// Note: always true for IE\nexport const hasHover = !matchMedia('(hover: none)').matches;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nexport const TOUCH_EVENTS = (() => {\n    const isTouch = isTouchDevice;\n    return {\n        START: isTouch ? 'touchstart' : 'pointerdown',\n        MOVE: isTouch ? 'touchmove' : 'pointermove',\n        END: isTouch ? 'touchend' : 'pointerup'\n    };\n})();\n/**\n * Device detection utility\n * @readonly\n */\nexport let DeviceDetector = class DeviceDetector {\n};\n// IE Detection\nDeviceDetector.isTrident = isTrident;\nDeviceDetector.isIE = isIE;\n// Edge Detection\nDeviceDetector.isEdgeHTML = isEdgeHTML;\nDeviceDetector.isBlinkEdge = isBlinkEdge;\nDeviceDetector.isEdge = isEdge;\n// Gecko\nDeviceDetector.isGecko = isGecko;\nDeviceDetector.isFirefox = isFirefox;\n// Opera / Chrome\nDeviceDetector.isOpera = isOpera;\nDeviceDetector.isChrome = isChrome;\n// Webkit\nDeviceDetector.isWebkit = isWebkit;\n// Safari\nDeviceDetector.isSafari = isSafari;\n// Blink\nDeviceDetector.isBlink = isBlink;\n// Bot detection\nDeviceDetector.isBot = isBot;\n// Mobile\nDeviceDetector.isAndroid = isAndroid;\nDeviceDetector.isMobileIOS13 = isMobileIOS13;\nDeviceDetector.isMobileIOS = isMobileIOS;\nDeviceDetector.isLegacyMobile = isLegacyMobile;\nDeviceDetector.isMobile = isMobile;\nDeviceDetector.isMobileSafari = isMobileSafari;\n// Touch Detection\nDeviceDetector.isTouchDevice = isTouchDevice;\n// Hover check\n// Note: always true for IE\nDeviceDetector.hasHover = hasHover;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nDeviceDetector.TOUCH_EVENTS = TOUCH_EVENTS;\nDeviceDetector = __decorate([\n    ExportNs('DeviceDetector')\n], DeviceDetector);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenDPR_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\n/**\n * DPR preprocessor. Used to replace DPR shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nexport let ESLScreenDPR = ESLScreenDPR_1 = class ESLScreenDPR {\n    static toDPI(dpr) {\n        return (96 * dpr).toFixed(1);\n    }\n    static process(match) {\n        if (!ESLScreenDPR_1.VALUE_REGEXP.test(match))\n            return;\n        const dpr = parseFloat(match);\n        if (dpr < 0 || isNaN(dpr))\n            return;\n        if (ESLScreenDPR_1.ignoreBotsDpr && DeviceDetector.isBot && dpr > 1)\n            return 'not all';\n        if (DeviceDetector.isSafari)\n            return `(-webkit-min-device-pixel-ratio: ${dpr})`;\n        return `(min-resolution: ${ESLScreenDPR_1.toDPI(dpr)}dpi)`;\n    }\n};\nESLScreenDPR.VALUE_REGEXP = /(\\d(\\.\\d)?)x/;\n/** Option to exclude dpr greater then 2 for bots */\nESLScreenDPR.ignoreBotsDpr = false;\nESLScreenDPR = ESLScreenDPR_1 = __decorate([\n    ExportNs('ScreenDPR')\n], ESLScreenDPR);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenBreakpoints_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst registry = new Map();\n/**\n * ESL Screen Breakpoints registry\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Screen Breakpoint registry is used to provide custom breakpoints for {@link ESLMediaQuery}\n *\n * @implements IMediaQueryPreprocessor statically\n */\nexport let ESLScreenBreakpoints = ESLScreenBreakpoints_1 = class ESLScreenBreakpoints {\n    /**\n     * Add or replace breakpoint shortcut that can be used inside ESLMediaQuery\n     * @param name - name of shortcut\n     * @param minWidth - min width for breakpoint\n     * @param maxWidth - max width for breakpoint\n     */\n    static add(name, minWidth, maxWidth) {\n        name = name.toLowerCase();\n        if (ESLScreenBreakpoints_1.BP_NAME_REGEXP.test(name)) {\n            const current = registry.get(name);\n            registry.set(name, new ESLScreenBreakpoint(name, minWidth, maxWidth));\n            return current;\n        }\n        throw new Error('The shortcut should consist only of Latin characters and be at least one character long.');\n    }\n    /** Removes screen breakpoint */\n    static remove(name) {\n        return registry.delete(name.toLowerCase());\n    }\n    /** @returns known breakpoint shortcut instance */\n    static get(name) {\n        return registry.get((name || '').toLowerCase());\n    }\n    /** All available breakpoints names */\n    static get names() {\n        const keys = [];\n        registry.forEach((value, key) => keys.push(key));\n        return keys;\n    }\n    /** @returns breakpoints shortcut replacement */\n    static process(term) {\n        const [, sign, bp] = term.match(ESLScreenBreakpoints_1.BP_REGEXP) || [];\n        const shortcut = ESLScreenBreakpoints_1.get(bp);\n        if (!shortcut)\n            return;\n        if (sign === '+')\n            return shortcut.mediaQueryGE;\n        if (sign === '-')\n            return shortcut.mediaQueryLE;\n        return shortcut.mediaQuery;\n    }\n};\nESLScreenBreakpoints.BP_REGEXP = /^([+-]?)([a-z]+)/i;\nESLScreenBreakpoints.BP_NAME_REGEXP = /^[a-z]+/i;\nESLScreenBreakpoints = ESLScreenBreakpoints_1 = __decorate([\n    ExportNs('ScreenBreakpoints')\n], ESLScreenBreakpoints);\n/** ESL Screen Breakpoint description */\nexport class ESLScreenBreakpoint {\n    constructor(name, min, max) {\n        this.name = name;\n        this.min = min;\n        this.max = max;\n    }\n    get mediaQuery() {\n        return `(min-width: ${this.min}px) and (max-width: ${this.max}px)`;\n    }\n    get mediaQueryGE() {\n        return `(min-width: ${this.min}px)`;\n    }\n    get mediaQueryLE() {\n        return `(max-width: ${this.max}px)`;\n    }\n    toString() {\n        return `[${this.name}]: ${this.min} to ${this.max}`;\n    }\n}\n// Defaults\nESLScreenBreakpoints.add('xs', 1, 767);\nESLScreenBreakpoints.add('sm', 768, 991);\nESLScreenBreakpoints.add('md', 992, 1199);\nESLScreenBreakpoints.add('lg', 1200, 1599);\nESLScreenBreakpoints.add('xl', 1600, 999999);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst shortcuts = new Map();\n/**\n * Static shortcuts preprocessor. Used to store device related shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nexport let ESLEnvShortcuts = class ESLEnvShortcuts {\n    /**\n     * Add mapping\n     * @param shortcut - term to find in query\n     * @param value - media query string or boolean result (that represents `all` or `not all` conditions)\n     */\n    static add(shortcut, value) {\n        if (!['boolean', 'string'].includes(typeof value))\n            value = false;\n        shortcuts.set(shortcut.toLowerCase(), value);\n    }\n    /** Remove mapping for passed shortcut term */\n    static remove(shortcut) {\n        return shortcuts.delete(shortcut.toLowerCase());\n    }\n    /** Replaces shortcut to registered result */\n    static process(match) {\n        if (shortcuts.has(match))\n            return shortcuts.get(match);\n    }\n};\n// For debug purposes\nESLEnvShortcuts._shortcuts = shortcuts;\nESLEnvShortcuts = __decorate([\n    ExportNs('EnvShortcuts')\n], ESLEnvShortcuts);\n// Touch check\nESLEnvShortcuts.add('touch', DeviceDetector.isTouchDevice);\n// Basic device type shortcuts\nESLEnvShortcuts.add('bot', DeviceDetector.isBot);\nESLEnvShortcuts.add('mobile', DeviceDetector.isMobile);\nESLEnvShortcuts.add('desktop', !DeviceDetector.isMobile);\nESLEnvShortcuts.add('android', DeviceDetector.isAndroid);\nESLEnvShortcuts.add('ios', DeviceDetector.isMobileIOS);\n// Basic browser shortcuts\nESLEnvShortcuts.add('ie', DeviceDetector.isIE);\nESLEnvShortcuts.add('edge', DeviceDetector.isEdgeHTML);\nESLEnvShortcuts.add('gecko', DeviceDetector.isGecko);\nESLEnvShortcuts.add('webkit', DeviceDetector.isWebkit);\nESLEnvShortcuts.add('blink', DeviceDetector.isBlink);\nESLEnvShortcuts.add('safari', DeviceDetector.isSafari);\nESLEnvShortcuts.add('safari-ios', DeviceDetector.isMobileSafari);\n","/**\n * Const media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Ignores listeners always return the same result.\n * Have only two instances: {@link ALL} and {@link NOT_ALL}\n */\nclass MediaQueryConstCondition {\n    constructor(_matches) {\n        this._matches = _matches;\n    }\n    get matches() {\n        return this._matches;\n    }\n    addListener() { }\n    addEventListener() { }\n    removeListener() { }\n    removeEventListener() { }\n    dispatchEvent() {\n        return false;\n    }\n    optimize() {\n        return this;\n    }\n    toString() {\n        return this._matches ? 'all' : 'not all';\n    }\n    /** Compares const media condition with the passed query instance or string */\n    eq(val) {\n        return String(val).trim() === this.toString();\n    }\n}\nexport const ALL = new MediaQueryConstCondition(true);\nexport const NOT_ALL = new MediaQueryConstCondition(false);\n","/** Custom event dispatched by {@link ESLMediaQuery} instances */\nexport class ESLMediaChangeEvent extends Event {\n    constructor(matches) {\n        super('change');\n        this.matches = matches;\n    }\n    /** Returns serialized value of the current {@link ESLMediaQuery} */\n    get media() {\n        return String(this.target);\n    }\n}\n","import { SyntheticEventTarget } from '../../../esl-utils/dom/events';\nimport { ALL, NOT_ALL } from './media-query-const';\nimport { ESLMediaChangeEvent } from './media-query-base';\n/**\n * Simple media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Wraps matchMedia instance\n */\nexport class MediaQueryCondition extends SyntheticEventTarget {\n    constructor(query, inverted = false) {\n        super();\n        this._inverted = inverted;\n        this._mq = matchMedia(query.trim() || 'all');\n        this._onChange = this._onChange.bind(this);\n    }\n    get matches() {\n        return this._inverted ? !this._mq.matches : this._mq.matches;\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.getEventListeners('change').length > 1)\n            return;\n        if (typeof this._mq.addEventListener === 'function') {\n            this._mq.addEventListener('change', this._onChange);\n        }\n        else {\n            this._mq.addListener(this._onChange);\n        }\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        if (typeof this._mq.removeEventListener === 'function') {\n            this._mq.removeEventListener('change', this._onChange);\n        }\n        else {\n            this._mq.removeListener(this._onChange);\n        }\n    }\n    /** Optimize query. Can simplify query to {@link MediaQueryConstCondition} */\n    optimize() {\n        if (ALL.eq(this))\n            return this._inverted ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(this))\n            return this._inverted ? ALL : NOT_ALL;\n        return this;\n    }\n    toString() {\n        const query = this._mq.media;\n        const inverted = this._inverted;\n        const complex = inverted && /\\)[\\s\\w]+\\(/.test(query);\n        return (inverted ? 'not ' : '') + (complex ? `(${query})` : query);\n    }\n    /** Handles query change and dispatches it on top level in case result value is changed */\n    _onChange() {\n        this.dispatchEvent(new ESLMediaChangeEvent(this._mq.matches));\n    }\n}\n","import { SyntheticEventTarget } from '../../../esl-utils/dom/events';\nimport { ESLMediaChangeEvent } from './media-query-base';\nimport { ALL, NOT_ALL } from './media-query-const';\n/**\n * Abstract multiple media conditions container\n * @author Alexey Stsefanovich (ala'n)\n *\n * Observe all child items. Dispatch changes when the whole condition result is changed\n */\nclass MediaQueryContainer extends SyntheticEventTarget {\n    constructor(items = []) {\n        super();\n        this.items = items;\n        this._matches = this.matches;\n        this._onChange = this._onChange.bind(this);\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.getEventListeners('change').length > 1)\n            return;\n        this.items.forEach((item) => item.addEventListener('change', this._onChange));\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        this.items.forEach((item) => item.removeEventListener('change', this._onChange));\n    }\n    optimize() {\n        return this;\n    }\n    get matches() {\n        return false;\n    }\n    /** Handles query change and dispatches it on top level in case result value is changed */\n    _onChange() {\n        const { matches } = this;\n        if (this._matches === matches)\n            return;\n        this.dispatchEvent(new ESLMediaChangeEvent(this._matches = matches));\n    }\n}\n/** Conjunction (AND) group of media conditions */\nexport class MediaQueryConjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.every((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => NOT_ALL.eq(item)))\n            return NOT_ALL;\n        const items = optimizedItems.filter((item) => !ALL.eq(item));\n        if (items.length === 0)\n            return ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryConjunction(items);\n    }\n    toString() {\n        return this.items.join(' and ');\n    }\n}\n/** Disjunction (OR) group of media conditions */\nexport class MediaQueryDisjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.some((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => ALL.eq(item)))\n            return ALL;\n        const items = optimizedItems.filter((item) => !NOT_ALL.eq(item));\n        if (items.length === 0)\n            return NOT_ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryDisjunction(items);\n    }\n    toString(pretty = false) {\n        return this.items.join(pretty ? ' or ' : ', ');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaQuery_1;\nimport { memoize } from '../../esl-utils/decorators';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLScreenDPR } from './common/screen-dpr';\nimport { ESLScreenBreakpoints } from './common/screen-breakpoint';\nimport { ESLEnvShortcuts } from './common/env-shortcuts';\nimport { ALL, NOT_ALL } from './conditions/media-query-const';\nimport { MediaQueryCondition } from './conditions/media-query-condition';\nimport { MediaQueryConjunction, MediaQueryDisjunction } from './conditions/media-query-containers';\n/**\n * ESL Media Query\n * @implements EventTarget\n * Provides special media condition syntax - ESLMediaQuery\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya, Natallia Harshunova\n *\n * Utility to support extended MediaQuery features\n * Supports\n * - CSS MediaQuery matching check\n * - DPR display queries (`@x1|@x2|@x3`)\n * - Registered screen default sizes (breakpoints) shortcuts (`@[-|+](XS|SM|MD|LG|XL)`)\n * - Device and browser shortcuts (`@MOBILE|@DESKTOP|@IE`)\n * - Custom static shortcuts and custom query preprocessors\n * - `not` logic operation (can have multiple not operators before any term of the query)\n * - `or` or `,` logical operator (have a lowest priority)\n * - Query matching change listeners\n * - Implements {@link EventTarget}, compatible with {@link ESLEventListener}\n *\n * Building query process:\n *\n * [Building query logical tree] - [preprocess nodes queries] - [building native MediaQueryList nodes] - [query tree optimization]\n */\nexport let ESLMediaQuery = ESLMediaQuery_1 = class ESLMediaQuery {\n    /** Adds {@link IMediaQueryPreprocessor} instance for query preprocessing step */\n    static use(preprocessor) {\n        this._preprocessors.unshift(preprocessor);\n        return this;\n    }\n    /** Cached method to create {@link ESLMediaQuery} condition instance from query string */\n    static for(query) {\n        return ESLMediaQuery_1.from(query);\n    }\n    /** Creates {@link ESLMediaQuery} condition instance from query string */\n    static from(query) {\n        const conjunctions = query.split(/\\sor\\s|,/).map((term) => {\n            const conditions = term.split(/\\sand\\s/).map(ESLMediaQuery_1.parseSimpleQuery);\n            return new MediaQueryConjunction(conditions);\n        });\n        return new MediaQueryDisjunction(conjunctions).optimize();\n    }\n    /** Preprocess simple query term by applying replacers and shortcuts rules */\n    static preprocess(term) {\n        if (!this.SHORTCUT_PATTERN.test(term))\n            return term;\n        const shortcut = term.trim().substring(1).toLowerCase();\n        for (const replacer of this._preprocessors) {\n            const result = replacer.process(shortcut);\n            if (typeof result === 'string')\n                return result;\n            if (typeof result === 'boolean')\n                return result ? 'all' : 'not all';\n        }\n        return term;\n    }\n    /** Creates simple {@link ESLMediaQuery} condition */\n    static parseSimpleQuery(term) {\n        const query = term.replace(/^\\s*not\\s+/, '');\n        const queryInverted = query !== term;\n        const processedQuery = ESLMediaQuery_1.preprocess(query);\n        const sanitizedQuery = processedQuery.replace(/^\\s*not\\s+/, '');\n        const resultInverted = processedQuery !== sanitizedQuery;\n        const invert = queryInverted !== resultInverted;\n        if (ALL.eq(sanitizedQuery))\n            return invert ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(sanitizedQuery))\n            return invert ? ALL : NOT_ALL;\n        return new MediaQueryCondition(sanitizedQuery, invert);\n    }\n};\n/** Always true condition */\nESLMediaQuery.ALL = ALL;\n/** Always false condition */\nESLMediaQuery.NOT_ALL = NOT_ALL;\nESLMediaQuery.SHORTCUT_PATTERN = /@([a-z0-9.+-]+)/i;\nESLMediaQuery._preprocessors = [];\n__decorate([\n    memoize()\n], ESLMediaQuery, \"for\", null);\nESLMediaQuery = ESLMediaQuery_1 = __decorate([\n    ExportNs('MediaQuery')\n], ESLMediaQuery);\n// Register otb preprocessors\nESLMediaQuery.use(ESLScreenDPR);\nESLMediaQuery.use(ESLScreenBreakpoints);\nESLMediaQuery.use(ESLEnvShortcuts);\n","import { ESLMediaQuery } from './esl-media-query';\n/**\n * ESL Media Rule\n * @author Yuliya Adamskaya\n *\n * Helper class to wrap {@link ESLMediaQuery} with the payload value\n * @see ESLMediaQuery\n * @see ESLMediaRuleList\n */\nexport class ESLMediaRule {\n    constructor(payload, query = '') {\n        this.query = ESLMediaQuery.for(query);\n        this.payload = payload;\n    }\n    /** @returns if the inner {@link ESLMediaQuery} is matching current device configuration */\n    get matches() {\n        return this.query.matches;\n    }\n    addEventListener(type, callback = type) {\n        this.query.addEventListener(callback);\n    }\n    removeEventListener(type, callback = type) {\n        this.query.removeEventListener(callback);\n    }\n    toString() {\n        const val = typeof this.payload === 'object' ?\n            JSON.stringify(this.payload) :\n            String(this.payload);\n        return `${this.query} => ${val}`;\n    }\n    /**\n     * Creates the {@link ESLMediaRule} instance from payload string, query and valueParser.\n     * If the payload parse result is undefined then rule will be undefined.\n     */\n    static create(payload, query, parser) {\n        const payloadValue = parser(payload.trim());\n        if (typeof payloadValue === 'undefined')\n            return undefined;\n        return new ESLMediaRule(payloadValue, query.trim());\n    }\n    /** Parses the rule string to the {@link ESLMediaRule} instance */\n    static parse(lex, parser) {\n        const parts = lex.split('=>');\n        const query = parts.length === 2 ? parts[0] : '';\n        const payload = parts.length === 2 ? parts[1] : parts[0];\n        return ESLMediaRule.create(payload, query, parser);\n    }\n    /** Shortcut to create always active {@link ESLMediaRule} with passed value */\n    static all(payload) {\n        return new ESLMediaRule(payload, 'all');\n    }\n    /** Shortcut to create always inactive {@link ESLMediaRule} */\n    static empty() {\n        return new ESLMediaRule(undefined, 'all');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaRuleList_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { evaluate } from '../../esl-utils/misc/format';\nimport { deepMerge, isEqual } from '../../esl-utils/misc/object';\nimport { SyntheticEventTarget } from '../../esl-utils/dom/events';\nimport { ESLMediaRule } from './esl-media-rule';\n/** Custom event dispatched by {@link ESLMediaRuleList} instances */\nexport class ESLMediaRuleListEvent extends Event {\n    constructor(current, previous) {\n        super('change');\n        Object.assign(this, { current, previous });\n    }\n}\n/**\n * ESLMediaRuleList - {@link ESLMediaRule} observable collection\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Represents observable object that wraps environment to value mapping\n */\nexport let ESLMediaRuleList = ESLMediaRuleList_1 = class ESLMediaRuleList extends SyntheticEventTarget {\n    static parse(query, ...common) {\n        const parser = typeof common[common.length - 1] === 'function' ? common.pop() : String;\n        const value = common.pop();\n        return typeof value === 'string' ?\n            ESLMediaRuleList_1.parseTuple(query, value, parser) :\n            ESLMediaRuleList_1.parseQuery(query, parser);\n    }\n    static parseQuery(query, parser = String) {\n        const rules = query.split('|')\n            .map((lex) => ESLMediaRule.parse(lex, parser))\n            .filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(rules);\n    }\n    static parseTuple(mask, values, parser = String) {\n        const queries = mask.split('|');\n        const valueList = values.split('|');\n        while (valueList.length < queries.length && valueList.length !== 0)\n            valueList.push(valueList[valueList.length - 1]);\n        if (valueList.length !== queries.length)\n            throw Error('Value doesn\\'t correspond to mask');\n        const rules = queries.map((query, i) => ESLMediaRule.create(valueList[i], query, parser));\n        const validRules = rules.filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(validRules);\n    }\n    constructor(rules) {\n        super();\n        this._rules = rules;\n        this._onMatchChanged = this._onMatchChanged.bind(this);\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this.getEventListeners('change').length > 1)\n            return;\n        this._value = this.computedValue;\n        this.rules.forEach((rule) => rule.addEventListener(this._onMatchChanged));\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this.hasEventListener())\n            return;\n        delete this._value;\n        this.rules.forEach((rule) => rule.removeEventListener(this._onMatchChanged));\n    }\n    /** Array of {@link ESLMediaRule}s that forms the current {@link ESLMediaRuleList} */\n    get rules() {\n        return this._rules;\n    }\n    /** All active {@link ESLMediaRule}s */\n    get active() {\n        return this.rules.filter((rule) => rule.matches);\n    }\n    /** Value of the last of active rules */\n    get activeValue() {\n        var _a;\n        return (_a = this.active.pop()) === null || _a === void 0 ? void 0 : _a.payload;\n    }\n    /** All active rule values */\n    get activeValues() {\n        return this.active.map((rule) => rule.payload);\n    }\n    /**\n     * Current value of {@link ESLMediaRuleList} object\n     * Uses cache if current object is under observation\n     */\n    get value() {\n        if (!this.hasEventListener())\n            return this.computedValue;\n        return Object.hasOwnProperty.call(this, '_value') ? this._value : this.computedValue;\n    }\n    /** Always computed value of the current {@link ESLMediaRuleList} object */\n    get computedValue() {\n        return deepMerge(undefined, ...this.activeValues);\n    }\n    /** Handles inner rules state change */\n    _onMatchChanged() {\n        const curValue = this.value;\n        const newValue = this.computedValue;\n        if (isEqual(curValue, newValue))\n            return;\n        this._value = newValue;\n        this.dispatchEvent(new ESLMediaRuleListEvent(newValue, curValue));\n    }\n    /** @returns serialized {@link ESLMediaRuleList} object representation*/\n    toString() {\n        return this.rules.join('|');\n    }\n};\n/** String value parser (default) */\nESLMediaRuleList.STRING_PARSER = String;\n/** Object value parser. Uses {@link evaluate} to parse value */\nESLMediaRuleList.OBJECT_PARSER = (val) => evaluate(val);\nESLMediaRuleList = ESLMediaRuleList_1 = __decorate([\n    ExportNs('MediaRuleList')\n], ESLMediaRuleList);\n","import { hasAttr, setAttr } from '../dom/attr';\nimport { toKebabCase } from '../misc/format';\nfunction buildConditionalDescriptor(attrName, readOnly) {\n    function get() {\n        return hasAttr(this, attrName);\n    }\n    function set(value) {\n        setAttr(this, attrName, !!value);\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element boolean (marker) attribute state.\n * Maps boolean type property.\n * @param config - mapping configuration. See {@link BoolAttrDescriptor}\n */\nexport const boolAttr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildConditionalDescriptor(attrName, !!config.readonly));\n        return {};\n    };\n};\n","import { onDocumentReady } from '../dom/ready';\n/** Defer method execution to the next task with dom ready state precondition */\nexport function ready(target, propertyKey, descriptor) {\n    if (!descriptor || typeof descriptor.value !== 'function') {\n        throw new TypeError('Only class methods can be decorated via document ready decorator');\n    }\n    const fn = descriptor.value;\n    descriptor.value = function (...arg) {\n        onDocumentReady(() => fn.call(this, ...arg));\n    };\n}\n","/**\n * Execute callback in bounds of the next task with dom ready state precondition\n */\nexport function onDocumentReady(callback) {\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', function fn() {\n            document.removeEventListener('DOMContentLoaded', fn);\n            setTimeout(() => callback());\n        });\n    }\n    else {\n        setTimeout(() => callback());\n    }\n}\n","export const TAB = 'Tab';\nexport const ENTER = 'Enter';\nexport const ESC = 'Escape';\nexport const SPACE = ' ';\nexport const BACKSPACE = 'Backspace';\nexport const ALT = 'Alt';\nexport const SHIFT = 'Shift';\nexport const CONTROL = 'Control';\nexport const PAUSE = 'Pause';\nexport const END = 'End';\nexport const HOME = 'Home';\nexport const DELETE = 'Delete';\nexport const PAGE_UP = 'PageUp';\nexport const PAGE_DOWN = 'PageDown';\nexport const ARROW_LEFT = 'ArrowLeft';\nexport const ARROW_UP = 'ArrowUp';\nexport const ARROW_RIGHT = 'ArrowRight';\nexport const ARROW_DOWN = 'ArrowDown';\nexport const SYSTEM_KEYS = [TAB, ALT, SHIFT, CONTROL, PAGE_UP, PAGE_DOWN, ARROW_LEFT, ARROW_UP, ARROW_RIGHT, ARROW_DOWN];\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLToggleablePlaceholder_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nexport let ESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = class ESLToggleablePlaceholder extends ESLBaseElement {\n    /** reates a placeholder for a given element of the toggleable's descendant */\n    static from($el) {\n        const $placeholder = document.createElement(this.is);\n        $placeholder.$origin = $el;\n        return $placeholder;\n    }\n    connectedCallback() {\n        this.copyAttributesFromOrigin();\n        super.connectedCallback();\n    }\n    /** Builds attribute name for copy */\n    buildAttrName(name) {\n        return name === 'id' ? 'original-id' : name;\n    }\n    /** Copies allowed attributes from origin to this element */\n    copyAttributesFromOrigin() {\n        const { $origin } = this;\n        if (!$origin)\n            return;\n        this.constructor.allowedAttrs.forEach((name) => {\n            const value = $origin.getAttribute(name);\n            if (value) {\n                this.setAttribute(this.buildAttrName(name), value);\n            }\n        });\n        // sanitize class list of placeholder from the tag name of origin's element\n        this.classList.remove($origin.constructor.is);\n    }\n};\nESLToggleablePlaceholder.is = 'esl-toggleable-placeholder';\n/** List of attributes allowed to copy from origin to this element */\nESLToggleablePlaceholder.allowedAttrs = ['id', 'class'];\nESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = __decorate([\n    ExportNs('ToggleablePlaceholder')\n], ESLToggleablePlaceholder);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { attr, boolAttr, prop, listen, ready } from '../../esl-utils/decorators';\nimport { parseNumber } from '../../esl-utils/misc/format';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ENTER, SPACE, ESC } from '../../esl-utils/dom/keys';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { ESLMediaQuery } from '../../esl-media-query/core';\nimport { ESLToggleablePlaceholder } from '../../esl-toggleable/core';\nexport let ESLTrigger = class ESLTrigger extends ESLBaseElement {\n    attributeChangedCallback(attrName) {\n        if (!this.connected)\n            return;\n        if (attrName === 'target')\n            return this.updateTargetFromSelector();\n    }\n    /** Target observable Toggleable */\n    get $target() {\n        return this._$target;\n    }\n    set $target(newPopupInstance) {\n        this.$$off(this._onTargetStateChange);\n        this._$target = newPopupInstance;\n        this.$$on(this._onTargetStateChange);\n        this._onTargetStateChange();\n    }\n    /** Element target to setup aria attributes */\n    get $a11yTarget() {\n        return this.a11yTarget ? this.querySelector(this.a11yTarget) : this;\n    }\n    /** Value to setup aria-label */\n    get a11yLabel() {\n        if (!this.$target)\n            return null;\n        return (this.$target.open ? this.a11yLabelActive : this.a11yLabelInactive) || null;\n    }\n    /** Marker to allow track hover */\n    get allowHover() {\n        return DeviceDetector.hasHover && ESLMediaQuery.for(this.trackHover).matches;\n    }\n    /** Marker to allow track clicks */\n    get allowClick() {\n        return ESLMediaQuery.for(this.trackClick).matches;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.updateTargetFromSelector();\n        this.initA11y();\n    }\n    /** Update `$target` Toggleable  from `target` selector */\n    updateTargetFromSelector() {\n        if (!this.target)\n            return;\n        this.$target = ESLTraversingQuery.first(this.target, this);\n        if (this.$target instanceof ESLToggleablePlaceholder && this.$target.$origin) {\n            // change target if it is an instance of the placeholder element\n            this.$target = this.$target.$origin;\n        }\n    }\n    /** Check if the event target should be ignored */\n    isTargetIgnored(target) {\n        if (!target || !(target instanceof HTMLElement) || !this.ignore)\n            return false;\n        const $ignore = target.closest(this.ignore);\n        // Ignore only inner elements (but do not ignore the trigger itself)\n        return !!$ignore && $ignore !== this && this.contains($ignore);\n    }\n    /** Merge params to pass to the toggleable */\n    mergeToggleableParams(...params) {\n        return Object.assign({\n            initiator: 'trigger',\n            activator: this\n        }, ...params);\n    }\n    /** Show target toggleable with passed params */\n    showTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.showDelay)\n        }, params);\n        if (this.$target && typeof this.$target.show === 'function') {\n            this.$target.show(actionParams);\n        }\n    }\n    /** Hide target toggleable with passed params */\n    hideTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.hideDelay)\n        }, params);\n        if (this.$target && typeof this.$target.hide === 'function') {\n            this.$target.hide(actionParams);\n        }\n    }\n    /** Toggles target toggleable with passed params */\n    toggleTarget(params = {}, state = !this.active) {\n        state ? this.showTarget(params) : this.hideTarget(params);\n    }\n    /**\n     * Updates trigger state according to toggleable state\n     * Does not produce `esl:change:active` event\n     */\n    updateState() {\n        var _a;\n        const isActive = !!((_a = this.$target) === null || _a === void 0 ? void 0 : _a.open);\n        const wasActive = this.active;\n        this.toggleAttribute('active', isActive);\n        const clsTarget = ESLTraversingQuery.first(this.activeClassTarget, this);\n        clsTarget && CSSClassUtils.toggle(clsTarget, this.activeClass, isActive);\n        this.updateA11y();\n        return isActive !== wasActive;\n    }\n    /** Handles ESLToggleable state change */\n    _onTargetStateChange(originalEvent) {\n        if (!this.updateState())\n            return;\n        const detail = { active: this.active, originalEvent };\n        this.$$fire(this.CHANGE_EVENT, { detail });\n    }\n    /** Handles `click` event */\n    _onClick(event) {\n        if (!this.allowClick || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        this._onPrimaryEvent(event);\n    }\n    /** Handles `keydown` event */\n    _onKeydown(event) {\n        if (![ENTER, SPACE, ESC].includes(event.key) || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        if (event.key === ESC) {\n            if (this.ignoreEsc)\n                return;\n            this.hideTarget({ event });\n        }\n        else {\n            this._onPrimaryEvent(event);\n        }\n    }\n    /** Handles target primary (observed) event */\n    _onPrimaryEvent(event) {\n        switch (this.mode) {\n            case 'show':\n                return this.showTarget({ event });\n            case 'hide':\n                return this.hideTarget({ event });\n            default:\n                return this.toggleTarget({ event });\n        }\n    }\n    /** Handles hover `mouseenter` event */\n    _onMouseEnter(event) {\n        if (!this.allowHover)\n            return;\n        const delay = parseNumber(this.hoverShowDelay);\n        this.toggleTarget({ event, delay }, this.mode !== 'hide');\n        event.preventDefault();\n    }\n    /** Handles hover `mouseleave` event */\n    _onMouseLeave(event) {\n        if (!this.allowHover)\n            return;\n        if (this.mode === 'show' || this.mode === 'hide')\n            return;\n        const delay = parseNumber(this.hoverHideDelay);\n        this.hideTarget({ event, delay, trackHover: true });\n        event.preventDefault();\n    }\n    /** Set initial a11y attributes. Do nothing if trigger contains actionable element */\n    initA11y() {\n        if (this.$a11yTarget !== this)\n            return;\n        if (!this.hasAttribute('role'))\n            this.setAttribute('role', 'button');\n        if (this.getAttribute('role') === 'button' && !this.hasAttribute('tabindex')) {\n            this.setAttribute('tabindex', '0');\n        }\n    }\n    /** Update aria attributes */\n    updateA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        if (this.a11yLabelActive !== null || this.a11yLabelInactive !== null) {\n            setAttr(target, 'aria-label', this.a11yLabel);\n        }\n        setAttr(target, 'aria-expanded', String(this.active));\n        if (this.$target && this.$target.id) {\n            setAttr(target, 'aria-controls', this.$target.id);\n        }\n    }\n};\nESLTrigger.is = 'esl-trigger';\nESLTrigger.observedAttributes = ['target'];\n__decorate([\n    prop('esl:change:active')\n], ESLTrigger.prototype, \"CHANGE_EVENT\", void 0);\n__decorate([\n    prop('esl:show esl:hide')\n], ESLTrigger.prototype, \"OBSERVED_EVENTS\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLTrigger.prototype, \"active\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'a[href]' })\n], ESLTrigger.prototype, \"ignore\", void 0);\n__decorate([\n    attr({ defaultValue: '::next' })\n], ESLTrigger.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'toggle' })\n], ESLTrigger.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'all' })\n], ESLTrigger.prototype, \"trackClick\", void 0);\n__decorate([\n    attr({ defaultValue: 'not all' })\n], ESLTrigger.prototype, \"trackHover\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"a11yTarget\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLTrigger.prototype, \"a11yLabelActive\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLTrigger.prototype, \"a11yLabelInactive\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"showDelay\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"hideDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverShowDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverHideDelay\", void 0);\n__decorate([\n    boolAttr()\n], ESLTrigger.prototype, \"ignoreEsc\", void 0);\n__decorate([\n    ready\n], ESLTrigger.prototype, \"connectedCallback\", null);\n__decorate([\n    listen({\n        event: (that) => that.OBSERVED_EVENTS,\n        target: (that) => that.$target\n    })\n], ESLTrigger.prototype, \"_onTargetStateChange\", null);\n__decorate([\n    listen('click')\n], ESLTrigger.prototype, \"_onClick\", null);\n__decorate([\n    listen('keydown')\n], ESLTrigger.prototype, \"_onKeydown\", null);\n__decorate([\n    listen('mouseenter')\n], ESLTrigger.prototype, \"_onMouseEnter\", null);\n__decorate([\n    listen('mouseleave')\n], ESLTrigger.prototype, \"_onMouseLeave\", null);\nESLTrigger = __decorate([\n    ExportNs('Trigger')\n], ESLTrigger);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { attr } from '../../esl-utils/decorators';\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLTrigger } from '../../esl-trigger/core';\n/**\n * ESlTab component\n * @author Julia Murashko\n *\n * Tab trigger item, usually used in conjunction with a {@link ESLTabs}.\n * Can control any {@link ESLToggleable} instance but is usually used in conjunction with {@link ESLPanel}\n */\nexport let ESLTab = class ESLTab extends ESLTrigger {\n    initA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        if (target.hasAttribute('role'))\n            return;\n        setAttr(target, 'role', 'tab');\n    }\n    updateA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        if (this.a11yLabelActive !== null || this.a11yLabelInactive !== null) {\n            setAttr(target, 'aria-label', this.a11yLabel);\n        }\n        setAttr(target, 'aria-selected', String(this.active));\n        setAttr(target, 'tabindex', this.active ? '0' : '-1');\n        if (this.$target && this.$target.id) {\n            setAttr(target, 'aria-controls', this.$target.id);\n        }\n    }\n};\nESLTab.is = 'esl-tab';\n__decorate([\n    attr({ defaultValue: 'show' })\n], ESLTab.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'active' })\n], ESLTab.prototype, \"activeClass\", void 0);\nESLTab = __decorate([\n    ExportNs('Tab')\n], ESLTab);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLTabs_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { rafDecorator } from '../../esl-utils/async/raf';\nimport { memoize, attr, listen, decorate } from '../../esl-utils/decorators';\nimport { isRTL, RTLScroll } from '../../esl-utils/dom/rtl';\nimport { debounce } from '../../esl-utils/async/debounce';\nimport { ESLMediaRuleList } from '../../esl-media-query/core/esl-media-rule-list';\nimport { ESLTab } from './esl-tab';\n/**\n * ESlTabs component\n * @author Julia Murashko\n *\n * Tabs container component for Tabs trigger group.\n * Uses {@link ESLTab} as an item.\n * Each individual {@link ESLTab} can control {@link ESLToggleable} or, usually, {@link ESLPanel}\n */\nexport let ESLTabs = ESLTabs_1 = class ESLTabs extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._deferredUpdateArrows = debounce(this.updateArrows, 100, this);\n        this._deferredFitToViewport = debounce(this.fitToViewport, 100, this);\n    }\n    /** ESLMediaRuleList instance of the scrollable type mapping */\n    get scrollableTypeRules() {\n        return ESLMediaRuleList.parse(this.scrollable);\n    }\n    /** @returns current scrollable type */\n    get currentScrollableType() {\n        return this.scrollableTypeRules.activeValue || 'side';\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.updateScrollableType();\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        if (attrName === 'scrollable') {\n            memoize.clear(this, 'scrollableTypeRules');\n            this.$$on(this._onScrollableTypeChange);\n            this.updateScrollableType();\n        }\n    }\n    bindScrollableEvents() {\n        this.$$on(this._onScroll);\n        this.$$on(this._onResize);\n    }\n    unbindScrollableEvents() {\n        this.$$off(this._onScroll);\n        this.$$off(this._onResize);\n    }\n    /** Collection of inner {@link ESLTab} items */\n    get $tabs() {\n        const els = this.querySelectorAll(ESLTab.is);\n        return els ? Array.from(els) : [];\n    }\n    /** Active {@link ESLTab} item */\n    get $current() {\n        return this.$tabs.find((el) => el.active) || null;\n    }\n    /** Container element to scroll */\n    get $scrollableTarget() {\n        return this.querySelector(this.scrollableTarget);\n    }\n    /** Is the scrollable mode enabled ? */\n    get isScrollable() {\n        return this.currentScrollableType !== 'disabled';\n    }\n    /** Move scroll to the next/previous item */\n    moveTo(direction, behavior = 'smooth') {\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget)\n            return;\n        let left = $scrollableTarget.offsetWidth;\n        left = isRTL(this) && RTLScroll.type !== 'reverse' ? -left : left;\n        left = direction === 'left' ? -left : left;\n        $scrollableTarget.scrollBy({ left, behavior });\n    }\n    /** Scroll tab to the view */\n    fitToViewport($trigger, behavior = 'smooth') {\n        this.updateMarkers();\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget || !$trigger)\n            return;\n        const areaRect = $scrollableTarget.getBoundingClientRect();\n        const itemRect = $trigger.getBoundingClientRect();\n        $scrollableTarget.scrollBy({\n            left: this.calcScrollOffset(itemRect, areaRect),\n            behavior\n        });\n        this.updateArrows();\n    }\n    /** Get scroll offset position from the selected item rectangle */\n    calcScrollOffset(itemRect, areaRect) {\n        const isReversedRTL = isRTL(this) && RTLScroll.type === 'reverse';\n        if (this.currentScrollableType === 'center') {\n            const shift = itemRect.left + itemRect.width / 2 - (areaRect.left + areaRect.width / 2);\n            return isReversedRTL ? -shift : shift;\n        }\n        // item is out of area from the right side\n        // else item out is of area from the left side\n        if (itemRect.right > areaRect.right) {\n            return isReversedRTL ? Math.floor(areaRect.right - itemRect.right) : Math.ceil(itemRect.right - areaRect.right);\n        }\n        else if (itemRect.left < areaRect.left) {\n            return isReversedRTL ? Math.ceil(areaRect.left - itemRect.left) : Math.floor(itemRect.left - areaRect.left);\n        }\n    }\n    updateArrows() {\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget)\n            return;\n        const swapSides = isRTL(this) && RTLScroll.type === 'default';\n        const scrollStart = Math.abs($scrollableTarget.scrollLeft) > 1;\n        const scrollEnd = Math.abs($scrollableTarget.scrollLeft) + $scrollableTarget.clientWidth + 1 < $scrollableTarget.scrollWidth;\n        const $rightArrow = this.querySelector('[data-tab-direction=\"right\"]');\n        const $leftArrow = this.querySelector('[data-tab-direction=\"left\"]');\n        $leftArrow && $leftArrow.toggleAttribute('disabled', !(swapSides ? scrollEnd : scrollStart));\n        $rightArrow && $rightArrow.toggleAttribute('disabled', !(swapSides ? scrollStart : scrollEnd));\n    }\n    updateMarkers() {\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget)\n            return;\n        const hasScroll = this.isScrollable && ($scrollableTarget.scrollWidth > this.clientWidth);\n        this.toggleAttribute('has-scroll', hasScroll);\n    }\n    /** Update element state according to scrollable type */\n    updateScrollableType() {\n        ESLTabs_1.supportedScrollableTypes.forEach((type) => {\n            this.$$cls(`scrollable-${type}`, this.currentScrollableType === type);\n        });\n        this._deferredFitToViewport(this.$current);\n        if (this.currentScrollableType === 'disabled') {\n            this.unbindScrollableEvents();\n        }\n        else {\n            this.bindScrollableEvents();\n        }\n    }\n    _onTriggerStateChange({ detail }) {\n        if (!detail.active)\n            return;\n        this._deferredFitToViewport(this.$current);\n    }\n    _onClick(event) {\n        const eventTarget = event.target;\n        const target = eventTarget.closest('[data-tab-direction]');\n        const direction = target && target.dataset.tabDirection;\n        if (!direction)\n            return;\n        this.moveTo(direction);\n    }\n    _onFocus(e) {\n        const target = e.target;\n        if (target instanceof ESLTab)\n            this._deferredFitToViewport(target);\n    }\n    _onScroll() {\n        this._deferredUpdateArrows();\n    }\n    _onResize() {\n        this._deferredFitToViewport(this.$current, 'auto');\n    }\n    /** Handles scrollable type change */\n    _onScrollableTypeChange() {\n        this.updateScrollableType();\n    }\n};\nESLTabs.is = 'esl-tabs';\nESLTabs.observedAttributes = ['scrollable'];\n/** List of supported scrollable types */\nESLTabs.supportedScrollableTypes = ['disabled', 'side', 'center'];\n__decorate([\n    attr({ defaultValue: 'disabled' })\n], ESLTabs.prototype, \"scrollable\", void 0);\n__decorate([\n    attr({ defaultValue: '.esl-tab-container' })\n], ESLTabs.prototype, \"scrollableTarget\", void 0);\n__decorate([\n    memoize()\n], ESLTabs.prototype, \"scrollableTypeRules\", null);\n__decorate([\n    listen('esl:change:active')\n], ESLTabs.prototype, \"_onTriggerStateChange\", null);\n__decorate([\n    listen('click')\n], ESLTabs.prototype, \"_onClick\", null);\n__decorate([\n    listen('focusin')\n], ESLTabs.prototype, \"_onFocus\", null);\n__decorate([\n    listen({\n        auto: false,\n        event: 'scroll',\n        target: (el) => el.$scrollableTarget\n    })\n], ESLTabs.prototype, \"_onScroll\", null);\n__decorate([\n    listen({\n        auto: false,\n        event: 'resize',\n        target: window,\n        passive: true\n    }),\n    decorate(rafDecorator)\n], ESLTabs.prototype, \"_onResize\", null);\n__decorate([\n    listen({\n        event: 'change',\n        target: (el) => el.scrollableTypeRules\n    })\n], ESLTabs.prototype, \"_onScrollableTypeChange\", null);\nESLTabs = ESLTabs_1 = __decorate([\n    ExportNs('Tabs')\n], ESLTabs);\n","import { getAttr, setAttr } from '../dom/attr';\nimport { toKebabCase, evaluate } from '../misc/format';\nfunction buildJsonAttrDescriptor(attrName, readOnly, defaultValue) {\n    function get() {\n        const attrContent = getAttr(this, attrName, '').trim();\n        return evaluate(attrContent, defaultValue);\n    }\n    function set(value) {\n        try {\n            if (typeof value !== 'object')\n                throw Error('value should be object');\n            setAttr(this, attrName, value ? JSON.stringify(value) : false);\n        }\n        catch (e) {\n            console.error('[ESL] jsonAttr: Can not set json value ', e);\n        }\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value using JSON (de-)serialization rules.\n * Maps object type property.\n * @param config - mapping configuration. See {@link JsonAttrDescriptor}\n */\nexport const jsonAttr = (config = {}) => {\n    config = Object.assign({ defaultValue: {} }, config);\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildJsonAttrDescriptor(attrName, !!config.readonly, config.defaultValue));\n        return {};\n    };\n};\n","const ns = window || global;\nconst sequences = ns.__esl_sequences__ || new Map();\nns.__esl_sequences__ = sequences;\n/** Create and return sequential id */\nexport const sequentialUID = (name, prefix = name) => {\n    const uid = (sequences.get(name) || 0) + 1;\n    sequences.set(name, uid);\n    return prefix + uid;\n};\n/** Return random unique identifier */\nexport const randUID = (prefix = '') => {\n    const time = Date.now().toString(32);\n    const rand = Math.round(Math.random() * 1024 * 1024).toString(32);\n    return prefix + time + '-' + rand;\n};\n/**\n * Generate unique id\n * @deprecated Alias for {@link randUID}\n */\nexport const generateUId = randUID;\n","/**\n * Task placeholder with a single place for executing deferred task.\n * Only one task can be planed per DelayedTask instance.\n * @see put DelayedTask.put behaviour description.\n */\nexport class DelayedTask {\n    constructor() {\n        this._fn = null;\n        this._timeout = null;\n        /** Execute deferred task immediately */\n        this.run = () => {\n            this._timeout = null;\n            this._fn && this._fn();\n        };\n    }\n    /** @returns Function of currently deferred (planned) task */\n    get fn() {\n        return this._fn;\n    }\n    /**\n     * Cancel deferred task and planning passed\n     * @param task - task function\n     * @param delay - time to delay task execution\n     *  - pass negative or false to execute task immediately\n     *  - pass 0 to plan task to the macrotask\n     *  - pass positive number x to delay task on x ms.\n     * */\n    put(task, delay = false) {\n        const prev = this.cancel();\n        if (typeof task === 'function') {\n            if (delay && typeof delay === 'string')\n                delay = +delay;\n            if (typeof delay === 'number' && delay >= 0) {\n                this._fn = task;\n                this._timeout = window.setTimeout(this.run, delay);\n            }\n            else {\n                task();\n            }\n        }\n        return prev;\n    }\n    /** Cancel deferred (planned) task */\n    cancel() {\n        const prev = this._fn;\n        (typeof this._timeout === 'number') && clearTimeout(this._timeout);\n        this._fn = this._timeout = null;\n        return prev;\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESC, SYSTEM_KEYS } from '../../esl-utils/dom/keys';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { prop, attr, jsonAttr, boolAttr, listen } from '../../esl-utils/decorators';\nimport { defined, copyDefinedKeys } from '../../esl-utils/misc/object';\nimport { sequentialUID } from '../../esl-utils/misc/uid';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { DelayedTask } from '../../esl-utils/async/delayed-task';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { findParent, isMatches } from '../../esl-utils/dom/traversing';\nconst activators = new WeakMap();\n/**\n * ESLToggleable component\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleable - a custom element, that is used as a base for \"Popup-like\" components creation\n */\nexport let ESLToggleable = class ESLToggleable extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        /** Inner state */\n        this._open = false;\n        /** Inner show/hide task manager instance */\n        this._task = new DelayedTask();\n        /** Marker for current hover listener state */\n        this._trackHover = false;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (!this.id && !this.noAutoId) {\n            this.id = sequentialUID(this.baseTagName, this.baseTagName + '-');\n        }\n        this.initiallyOpened = this.hasAttribute('open');\n        this.setInitialState();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        activators.delete(this);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || newVal === oldVal)\n            return;\n        switch (attrName) {\n            case 'open':\n                if (this.open === this.hasAttribute('open'))\n                    return;\n                this.toggle(this.open, { initiator: 'attribute', showDelay: 0, hideDelay: 0 });\n                break;\n            case 'group':\n                this.$$fire(this.GROUP_CHANGED_EVENT, {\n                    detail: { oldGroupName: oldVal, newGroupName: newVal }\n                });\n                break;\n        }\n    }\n    /** Set initial state of the Toggleable */\n    setInitialState() {\n        if (this.initialParams) {\n            this.toggle(this.initiallyOpened, this.initialParams);\n        }\n    }\n    /** Bind outside action event listeners */\n    bindOutsideEventTracking(track) {\n        track ? this.$$on(this._onOutsideAction) : this.$$off(this._onOutsideAction);\n    }\n    /** Bind hover events listeners for the Toggleable itself */\n    bindHoverStateTracking(track, hideDelay) {\n        if (!DeviceDetector.hasHover)\n            return;\n        this._trackHoverDelay = track && hideDelay !== undefined ? +hideDelay : undefined;\n        if (this._trackHover === track)\n            return;\n        this._trackHover = track;\n        track ? this.$$on(this._onMouseEnter) : this.$$off(this._onMouseEnter);\n        track ? this.$$on(this._onMouseLeave) : this.$$off(this._onMouseLeave);\n    }\n    /** Function to merge the result action params */\n    mergeDefaultParams(params) {\n        return Object.assign({}, this.defaultParams, copyDefinedKeys(params));\n    }\n    /** Toggle the element state */\n    toggle(state = !this.open, params) {\n        return state ? this.show(params) : this.hide(params);\n    }\n    /** Change the element state to active */\n    show(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.showTask.bind(this, params), defined(params.showDelay, params.delay));\n        this.bindOutsideEventTracking(this.closeOnOutsideAction);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Change the element state to inactive */\n    hide(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.hideTask.bind(this, params), defined(params.hideDelay, params.delay));\n        this.bindOutsideEventTracking(false);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Actual show task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    showTask(params) {\n        if (!params.force && this.open)\n            return;\n        if (!params.silent && !this.$$fire(this.BEFORE_SHOW_EVENT, { detail: { params } }))\n            return;\n        this.activator = params.activator;\n        this.open = true;\n        this.onShow(params);\n        if (!params.silent)\n            this.$$fire(this.SHOW_EVENT, { detail: { params }, cancelable: false });\n    }\n    /** Actual hide task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    hideTask(params) {\n        if (!params.force && !this.open)\n            return;\n        if (!params.silent && !this.$$fire(this.BEFORE_HIDE_EVENT, { detail: { params } }))\n            return;\n        this.open = false;\n        this.onHide(params);\n        this.bindOutsideEventTracking(false);\n        if (!params.silent)\n            this.$$fire(this.HIDE_EVENT, { detail: { params }, cancelable: false });\n    }\n    /**\n     * Actions to execute on show toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Adds CSS classes, update a11y and fire {@link ESLToggleable.REFRESH_EVENT} event by default.\n     */\n    onShow(params) {\n        CSSClassUtils.add(this, this.activeClass);\n        CSSClassUtils.add(document.body, this.bodyClass, this);\n        if (this.containerActiveClass) {\n            const $container = findParent(this, this.containerActiveClassTarget);\n            $container && CSSClassUtils.add($container, this.containerActiveClass, this);\n        }\n        this.updateA11y();\n        this.$$fire(this.REFRESH_EVENT); // To notify other components about content change\n    }\n    /**\n     * Actions to execute on hide toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Removes CSS classes and update a11y by default.\n     */\n    onHide(params) {\n        CSSClassUtils.remove(this, this.activeClass);\n        CSSClassUtils.remove(document.body, this.bodyClass, this);\n        if (this.containerActiveClass) {\n            const $container = findParent(this, this.containerActiveClassTarget);\n            $container && CSSClassUtils.remove($container, this.containerActiveClass, this);\n        }\n        this.updateA11y();\n    }\n    /** Active state marker */\n    get open() {\n        return this._open;\n    }\n    set open(value) {\n        this.toggleAttribute('open', this._open = value);\n    }\n    /** Last component that has activated the element. Uses {@link ESLToggleableActionParams.activator}*/\n    get activator() {\n        return activators.get(this);\n    }\n    set activator(el) {\n        el ? activators.set(this, el) : activators.delete(this);\n    }\n    /** Returns the element to apply a11y attributes */\n    get $a11yTarget() {\n        const target = this.getAttribute('a11y-target');\n        if (target === 'none')\n            return null;\n        return target ? this.querySelector(target) : this;\n    }\n    /** Called on show and on hide actions to update a11y state accordingly */\n    updateA11y() {\n        const targetEl = this.$a11yTarget;\n        if (!targetEl)\n            return;\n        targetEl.setAttribute('aria-hidden', String(!this._open));\n    }\n    /** @returns if the passed event should trigger hide action */\n    isOutsideAction(e) {\n        const target = e.target;\n        // target is inside current toggleable\n        if (this.contains(target))\n            return false;\n        // target is inside last activator\n        if (this.activator && this.activator.contains(target))\n            return false;\n        // Event is not a system command key\n        return !(e instanceof KeyboardEvent && SYSTEM_KEYS.includes(e.key));\n    }\n    _onCloseClick(e) {\n        this.hide({ initiator: 'close', activator: e.target, event: e });\n    }\n    _onOutsideAction(e) {\n        if (!this.isOutsideAction(e))\n            return;\n        // Used 0 delay to decrease priority of the request\n        this.hide({ initiator: 'outsideaction', hideDelay: 0, event: e });\n    }\n    _onKeyboardEvent(e) {\n        if (this.closeOnEsc && e.key === ESC) {\n            this.hide({ initiator: 'keyboard', event: e });\n        }\n    }\n    _onMouseEnter(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = {\n            initiator: 'mouseenter',\n            trackHover: true,\n            activator: this.activator,\n            event: e,\n            hideDelay\n        };\n        this.show(Object.assign(baseParams, this.trackHoverParams));\n    }\n    _onMouseLeave(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = {\n            initiator: 'mouseleave',\n            trackHover: true,\n            activator: this.activator,\n            event: e,\n            hideDelay\n        };\n        this.hide(Object.assign(baseParams, this.trackHoverParams));\n    }\n    /** Prepares toggle request events param */\n    buildRequestParams(e) {\n        const detail = e.detail || {};\n        if (!isMatches(this, detail.match))\n            return null;\n        return Object.assign({}, detail, { event: e });\n    }\n    /** Actions to execute on show request */\n    _onShowRequest(e) {\n        const params = this.buildRequestParams(e);\n        params && this.show(params);\n    }\n    /** Actions to execute on hide request */\n    _onHideRequest(e) {\n        const params = this.buildRequestParams(e);\n        params && this.hide(params);\n    }\n};\nESLToggleable.is = 'esl-toggleable';\nESLToggleable.observedAttributes = ['open', 'group'];\n__decorate([\n    prop('esl:before:show')\n], ESLToggleable.prototype, \"BEFORE_SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:before:hide')\n], ESLToggleable.prototype, \"BEFORE_HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:show')\n], ESLToggleable.prototype, \"SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:hide')\n], ESLToggleable.prototype, \"HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:after:show')\n], ESLToggleable.prototype, \"AFTER_SHOW_EVENT\", void 0);\n__decorate([\n    prop('esl:after:hide')\n], ESLToggleable.prototype, \"AFTER_HIDE_EVENT\", void 0);\n__decorate([\n    prop('esl:show:request')\n], ESLToggleable.prototype, \"SHOW_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:hide:request')\n], ESLToggleable.prototype, \"HIDE_REQUEST_EVENT\", void 0);\n__decorate([\n    prop('esl:change:group')\n], ESLToggleable.prototype, \"GROUP_CHANGED_EVENT\", void 0);\n__decorate([\n    attr()\n], ESLToggleable.prototype, \"bodyClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'open' })\n], ESLToggleable.prototype, \"activeClass\", void 0);\n__decorate([\n    attr()\n], ESLToggleable.prototype, \"containerActiveClass\", void 0);\n__decorate([\n    attr({ defaultValue: '*' })\n], ESLToggleable.prototype, \"containerActiveClassTarget\", void 0);\n__decorate([\n    attr({ name: 'group' })\n], ESLToggleable.prototype, \"groupName\", void 0);\n__decorate([\n    attr({ name: 'close-on' })\n], ESLToggleable.prototype, \"closeTrigger\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"noAutoId\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { force: true, initiator: 'init' } })\n], ESLToggleable.prototype, \"initialParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"defaultParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"trackHoverParams\", void 0);\n__decorate([\n    listen({\n        event: 'click',\n        selector: (el) => el.closeTrigger || ''\n    })\n], ESLToggleable.prototype, \"_onCloseClick\", null);\n__decorate([\n    listen({\n        auto: false,\n        event: 'keydown mouseup touchend',\n        target: document.body,\n        capture: true\n    })\n], ESLToggleable.prototype, \"_onOutsideAction\", null);\n__decorate([\n    listen('keydown')\n], ESLToggleable.prototype, \"_onKeyboardEvent\", null);\n__decorate([\n    listen({ auto: false, event: 'mouseenter' })\n], ESLToggleable.prototype, \"_onMouseEnter\", null);\n__decorate([\n    listen({ auto: false, event: 'mouseleave' })\n], ESLToggleable.prototype, \"_onMouseLeave\", null);\n__decorate([\n    listen((el) => el.SHOW_REQUEST_EVENT)\n], ESLToggleable.prototype, \"_onShowRequest\", null);\n__decorate([\n    listen((el) => el.HIDE_REQUEST_EVENT)\n], ESLToggleable.prototype, \"_onHideRequest\", null);\nESLToggleable = __decorate([\n    ExportNs('Toggleable')\n], ESLToggleable);\n","/** Makes a plain copy of obj with properties satisfying the predicate\n * If no predicate provided copies all own properties */\nexport function copy(obj, predicate = () => true) {\n    const result = Object.assign({}, obj || {});\n    Object.keys(result).forEach((key) => {\n        (!predicate(key, result[key])) && delete result[key];\n    });\n    return result;\n}\n/** Makes a flat copy without undefined keys */\nexport function copyDefinedKeys(obj) {\n    return copy(obj || {}, (key, value) => value !== void 0);\n}\n/** Omits copying provided properties from object */\nexport function omit(obj, keys) {\n    return copy(obj, (key) => !keys.includes(key));\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement, listen } from '../../esl-base-element/core';\nimport { getCompositeTarget } from '../../esl-utils/dom/events';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLToggleable } from './esl-toggleable';\n/**\n * ESLToggleableDispatcher\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleableDispatcher - plugin component, that prevents activation of multiple ESLToggleable instances in bounds of managed container.\n */\nexport let ESLToggleableDispatcher = class ESLToggleableDispatcher extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._popups = new Map();\n    }\n    /**\n     * Initialize ToggleableGroupDispatcher\n     * Uses esl-toggleable-dispatcher tag and document body root by default\n     */\n    static init(root = document.body, tagName = this.is) {\n        if (!root)\n            throw new Error('Root element should be specified');\n        const instances = root.getElementsByTagName(tagName);\n        if (instances.length)\n            return;\n        this.register(tagName);\n        root.insertAdjacentElement('afterbegin', document.createElement(tagName));\n    }\n    /** Observed element */\n    get root() {\n        return this.parentElement;\n    }\n    /** Guard-condition for targets */\n    isAcceptable(target) {\n        if (!(target instanceof ESLToggleable))\n            return false;\n        return !!target.groupName && target.groupName !== 'none';\n    }\n    /** Hides active element in group */\n    hideActive(groupName, activator) {\n        const active = this.getActive(groupName);\n        if (!active || active === activator)\n            return;\n        active.hide({\n            initiator: 'dispatcher',\n            dispatcher: this,\n            activator\n        });\n    }\n    /** Sets active element in group */\n    setActive(groupName, popup) {\n        if (!groupName)\n            return;\n        this.hideActive(groupName, popup);\n        this._popups.set(groupName, popup);\n    }\n    /** Gets active element in group or undefined if group doesn't exist */\n    getActive(groupName) {\n        return this._popups.get(groupName);\n    }\n    /** Deletes element from the group if passed element is currently active */\n    deleteActive(groupName, popup) {\n        if (this.getActive(groupName) !== popup)\n            return;\n        this._popups.delete(groupName);\n    }\n    /** Hides active element before e.target will be shown */\n    _onBeforeShow(e) {\n        const target = getCompositeTarget(e);\n        if (!this.isAcceptable(target))\n            return;\n        this.hideActive(target.groupName, target);\n    }\n    /** Updates active element after a new element is shown */\n    _onShow(e) {\n        const target = getCompositeTarget(e);\n        if (!this.isAcceptable(target))\n            return;\n        this.setActive(target.groupName, target);\n    }\n    /** Updates group state after active element is hidden */\n    _onHide(e) {\n        const target = getCompositeTarget(e);\n        if (!this.isAcceptable(target))\n            return;\n        this.deleteActive(target.groupName, target);\n    }\n    /** Updates active elements */\n    _onChangeGroup(e) {\n        const target = getCompositeTarget(e);\n        if (!this.isAcceptable(target))\n            return;\n        const { oldGroupName, newGroupName } = e.detail;\n        this.deleteActive(oldGroupName, target);\n        this.setActive(newGroupName, target);\n    }\n};\nESLToggleableDispatcher.is = 'esl-toggleable-dispatcher';\n__decorate([\n    listen({\n        event: ESLToggleable.prototype.BEFORE_SHOW_EVENT,\n        target: (host) => host.root\n    })\n], ESLToggleableDispatcher.prototype, \"_onBeforeShow\", null);\n__decorate([\n    listen({\n        event: ESLToggleable.prototype.SHOW_EVENT,\n        target: (host) => host.root\n    })\n], ESLToggleableDispatcher.prototype, \"_onShow\", null);\n__decorate([\n    listen({\n        event: ESLToggleable.prototype.HIDE_EVENT,\n        target: (host) => host.root\n    })\n], ESLToggleableDispatcher.prototype, \"_onHide\", null);\n__decorate([\n    listen({\n        event: ESLToggleable.prototype.GROUP_CHANGED_EVENT,\n        target: (host) => host.root\n    })\n], ESLToggleableDispatcher.prototype, \"_onChangeGroup\", null);\nESLToggleableDispatcher = __decorate([\n    ExportNs('ToggleableDispatcher')\n], ESLToggleableDispatcher);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { attr, boolAttr, jsonAttr, listen } from '../../esl-utils/decorators';\nimport { afterNextRender, skipOneRender } from '../../esl-utils/async/raf';\nimport { ESLToggleable } from '../../esl-toggleable/core';\n/**\n * ESLPanel component\n * @author Julia Murashko\n *\n * ESLPanel is a custom element that is used as a wrapper for content that can be shown or hidden.\n * Can use collapsing/expanding animation (smooth height change).\n * Can be used in conjunction with {@link ESLPanelGroup} to control a group of ESLPopups\n */\nexport let ESLPanel = class ESLPanel extends ESLToggleable {\n    constructor() {\n        super(...arguments);\n        /** Inner height state that updates after show/hide actions but before show/hide events triggered */\n        this._initialHeight = 0;\n    }\n    /** @returns Previous active panel height at the start of the animation */\n    get initialHeight() {\n        return this._initialHeight;\n    }\n    /** @returns Closest panel group or null if not presented */\n    get $group() {\n        if (this.groupName === 'none' || this.groupName)\n            return null;\n        return this.closest(this.panelGroupSel);\n    }\n    /** Process show action */\n    onShow(params) {\n        this._initialHeight = this.scrollHeight;\n        super.onShow(params);\n        this.beforeAnimate();\n        if (params.noAnimate)\n            return this.postAnimate(params.capturedBy);\n        this.onAnimate(0, this._initialHeight);\n    }\n    /** Process hide action */\n    onHide(params) {\n        this._initialHeight = this.scrollHeight;\n        super.onHide(params);\n        this.beforeAnimate();\n        if (params.noAnimate)\n            return this.postAnimate(null);\n        this.onAnimate(this._initialHeight, 0);\n    }\n    /** Pre-processing animation action */\n    beforeAnimate() {\n        this.toggleAttribute('animating', true);\n        CSSClassUtils.add(this, this.animateClass);\n        this.postAnimateClass && afterNextRender(() => CSSClassUtils.add(this, this.postAnimateClass));\n    }\n    /** Handles post animation process to initiate after animate step */\n    postAnimate(capturedBy) {\n        if (capturedBy) {\n            capturedBy.$$on({\n                event: capturedBy.AFTER_ANIMATE_EVENT,\n                once: true\n            }, () => this.afterAnimate());\n        }\n        else {\n            skipOneRender(() => this.afterAnimate());\n        }\n    }\n    /** Process animation */\n    onAnimate(from, to) {\n        // set initial height\n        this.style.setProperty('max-height', `${from}px`);\n        // make sure that browser applies initial height for animation\n        afterNextRender(() => {\n            this.style.setProperty('max-height', `${to}px`);\n            this.fallbackAnimate();\n        });\n    }\n    /** Checks if transition happens and runs afterAnimate step if transition is not presented*/\n    fallbackAnimate() {\n        afterNextRender(() => {\n            const distance = parseFloat(this.style.maxHeight) - this.clientHeight;\n            if (Math.abs(distance) <= 1)\n                this.afterAnimate();\n        });\n    }\n    /** Post-processing animation action */\n    afterAnimate() {\n        const { animating } = this;\n        this.clearAnimation();\n        // Prevent fallback calls from being tracked\n        if (!animating)\n            return;\n        this.$$fire(this.open ? this.AFTER_SHOW_EVENT : this.AFTER_HIDE_EVENT);\n    }\n    /** Clear animation properties */\n    clearAnimation() {\n        this.toggleAttribute('animating', false);\n        this.style.removeProperty('max-height');\n        CSSClassUtils.remove(this, this.animateClass);\n        CSSClassUtils.remove(this, this.postAnimateClass);\n    }\n    /** Catching CSS transition end event to start post-animate processing */\n    _onTransitionEnd(e) {\n        if (!e || (e.propertyName === 'max-height' && e.target === this)) {\n            this.afterAnimate();\n        }\n    }\n    /** Merge params that are used by panel group for actions */\n    mergeDefaultParams(params) {\n        var _a;\n        const stackConfig = ((_a = this.$group) === null || _a === void 0 ? void 0 : _a.panelConfig) || {};\n        return Object.assign({}, stackConfig, this.defaultParams, params || {});\n    }\n};\nESLPanel.is = 'esl-panel';\n__decorate([\n    attr({ defaultValue: 'open' })\n], ESLPanel.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'animate' })\n], ESLPanel.prototype, \"animateClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'post-animate' })\n], ESLPanel.prototype, \"postAnimateClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'esl-panel-group' })\n], ESLPanel.prototype, \"panelGroupSel\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { force: true, initiator: 'init' } })\n], ESLPanel.prototype, \"initialParams\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLPanel.prototype, \"animating\", void 0);\n__decorate([\n    listen('transitionend')\n], ESLPanel.prototype, \"_onTransitionEnd\", null);\nESLPanel = __decorate([\n    ExportNs('Panel')\n], ESLPanel);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLPanelGroup_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { defined } from '../../esl-utils/misc/object/utils';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { afterNextRender } from '../../esl-utils/async/raf';\nimport { debounce } from '../../esl-utils/async/debounce';\nimport { decorate, memoize, attr, jsonAttr, prop, listen } from '../../esl-utils/decorators';\nimport { format } from '../../esl-utils/misc/format';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ESLMediaQuery, ESLMediaRuleList } from '../../esl-media-query/core';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { ESLPanel } from '../../esl-panel/core';\n/** Converts special 'all' value to positive infinity */\nconst parseCount = (value) => value === 'all' ? Number.POSITIVE_INFINITY : parseInt(value, 10);\n/**\n * ESLPanelGroup component\n * @author Julia Murashko, Anastasia Lesun, Alexey Stsefanovich (ala'n)\n *\n * ESLPanelGroup is a custom element that is used as a container for a group of {@link ESLPanel}s\n */\nexport let ESLPanelGroup = ESLPanelGroup_1 = class ESLPanelGroup extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        /** Height of previous active panel */\n        this._previousHeight = 0;\n    }\n    connectedCallback() {\n        ESLPanel.registered.then(() => {\n            super.connectedCallback();\n            this.refresh();\n        });\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        if (attrName === 'mode' || attrName === 'min-open-items' || attrName === 'max-open-items') {\n            this.$$off(this._onConfigChange);\n            memoize.clear(this, 'modeRules');\n            memoize.clear(this, 'minValueRules');\n            memoize.clear(this, 'maxValueRules');\n            this.$$on(this._onConfigChange);\n            this.refresh();\n        }\n        if (attrName === 'refresh-strategy') {\n            memoize.clear(this, 'refreshRules');\n        }\n    }\n    /** Updates element state according to current mode */\n    refresh() {\n        const prevMode = this.getAttribute('current-mode');\n        const currentMode = this.currentMode;\n        this.setAttribute('current-mode', currentMode);\n        this.updateModeCls();\n        this.reset();\n        if (prevMode !== currentMode)\n            this.$$fire(this.MODE_CHANGE_EVENT, { detail: { prevMode, currentMode } });\n    }\n    /** Updates mode class marker */\n    updateModeCls() {\n        const { modeCls, currentMode } = this;\n        if (!modeCls)\n            return;\n        const $target = ESLTraversingQuery.first(this.modeClsTarget, this);\n        if (!$target)\n            return;\n        ESLPanelGroup_1.supportedModes.forEach((mode) => {\n            const className = format(modeCls, { mode });\n            $target.classList.toggle(className, currentMode === mode);\n        });\n    }\n    /** @returns ESLMediaRuleList instance of the mode mapping */\n    get modeRules() {\n        return ESLMediaRuleList.parse(this.mode);\n    }\n    /** @returns ESLMediaRuleList instance of the min-open-items mapping */\n    get minValueRules() {\n        return ESLMediaRuleList.parse(this.minOpenItems, parseCount);\n    }\n    /** @returns ESLMediaRuleList instance of the max-open-items mapping */\n    get maxValueRules() {\n        return ESLMediaRuleList.parse(this.maxOpenItems, parseCount);\n    }\n    /** @returns ESLMediaRuleList instance of the refresh-strategy mapping */\n    get refreshRules() {\n        return ESLMediaRuleList.parse(this.refreshStrategy);\n    }\n    /** @returns current mode */\n    get currentMode() {\n        return this.modeRules.activeValue || '';\n    }\n    /** @returns current value of min-open-items */\n    get currentMinItems() {\n        const min = 0;\n        const val = defined(this.minValueRules.activeValue, 1);\n        const max = this.currentMode === 'tabs' ? 1 : this.$panels.length;\n        return Math.min(max, Math.max(min, val)); // minmax\n    }\n    /** @returns current value of max-open-items */\n    get currentMaxItems() {\n        const min = this.currentMinItems;\n        const val = defined(this.maxValueRules.activeValue, 1);\n        const max = this.currentMode === 'tabs' ? 1 : this.$panels.length;\n        return Math.min(max, Math.max(min, val)); // minmax\n    }\n    /** @returns panels that are processed by the current panel group */\n    get $panels() {\n        const els = Array.from(this.querySelectorAll(this.panelSel));\n        return els.filter((el) => this.includesPanel(el));\n    }\n    /** @returns panels that are active */\n    get $activePanels() {\n        return this.$panels.filter((el) => el.open);\n    }\n    /** @returns panels that was initially opened */\n    get $initialPanels() {\n        return this.$panels.filter((el) => el.initiallyOpened);\n    }\n    /** @returns panels that requested to be opened on refresh */\n    get $resetStatePanels() {\n        switch (this.refreshRules.activeValue) {\n            case 'close': return [];\n            case 'open': return this.$panels;\n            case 'initial': return this.$initialPanels;\n            default: return this.$activePanels;\n        }\n    }\n    /** @returns whether the collapse/expand animation should be handheld by the breakpoints */\n    get shouldAnimate() {\n        return !ESLMediaQuery.for(this.noAnimate).matches;\n    }\n    /** @returns action params config that's used (inherited) by controlled {@link ESLPanel}s */\n    get panelConfig() {\n        return {\n            capturedBy: this.currentMode === 'tabs' ? this : undefined,\n            noAnimate: !this.shouldAnimate || (this.currentMode === 'tabs')\n        };\n    }\n    /** @returns merged panel action params for show/hide requests from the group */\n    mergeActionParams(...params) {\n        return Object.assign({ initiator: 'group', activator: this }, ...params);\n    }\n    /** Condition-guard to check if the passed target is a Panel that should be controlled by the Group */\n    includesPanel(target) {\n        if (!(target instanceof ESLPanel))\n            return false;\n        return target.$group === this;\n    }\n    /** Shows all panels besides excluded ones */\n    showAll(excluded = [], params = {}) {\n        this.$panels.forEach((el) => !excluded.includes(el) && el.show(this.mergeActionParams(params)));\n    }\n    /** Hides all active panels besides excluded ones */\n    hideAll(excluded = [], params = {}) {\n        this.$activePanels.forEach((el) => !excluded.includes(el) && el.hide(this.mergeActionParams(params)));\n    }\n    /** Resets to default state applicable to the current panel group configuration */\n    reset() {\n        // $activePanels - collection of items to open (ideally; without normalization)\n        const $activePanels = this.$resetStatePanels;\n        // $orderedPanels = $activePanels U ($panels / $activePanels) - the list of ordered panels\n        const $orderedPanels = $activePanels.concat(this.$panels.filter((item) => !$activePanels.includes(item)));\n        // we use current open active panels count but normalized in range of minmax\n        const activeCount = Math.min(this.currentMaxItems, Math.max($activePanels.length, this.currentMinItems));\n        const params = this.mergeActionParams(this.transformParams);\n        $orderedPanels.forEach((panel, index) => panel.toggle(index < activeCount, params));\n    }\n    /** Animates the height of the component */\n    onAnimate(from, to) {\n        const hasCurrent = this.style.height && this.style.height !== 'auto';\n        if (hasCurrent) {\n            this.style.height = `${to}px`;\n            this.fallbackAnimate();\n        }\n        else {\n            // set initial height\n            this.style.height = `${from}px`;\n            // make sure that browser applies initial height to animate\n            afterNextRender(() => {\n                this.style.height = `${to}px`;\n                this.fallbackAnimate();\n            });\n        }\n    }\n    /** Checks if transition happens and runs afterAnimate step if transition is not presented */\n    fallbackAnimate() {\n        afterNextRender(() => {\n            const distance = parseFloat(this.style.height) - this.clientHeight;\n            if (Math.abs(distance) <= 1)\n                this.afterAnimate();\n        });\n    }\n    /** Pre-processing animation action */\n    beforeAnimate() {\n        CSSClassUtils.add(this, this.animationClass);\n    }\n    /** Post-processing animation action */\n    afterAnimate(silent) {\n        this.style.removeProperty('height');\n        CSSClassUtils.remove(this, this.animationClass);\n        if (silent)\n            return;\n        this.$$fire(this.AFTER_ANIMATE_EVENT, { bubbles: false });\n    }\n    /** Process {@link ESLPanel} pre-show event */\n    _onBeforeShow(e) {\n        var _a, _b, _c;\n        const panel = e.target;\n        if (!this.includesPanel(panel))\n            return;\n        const max = this.currentMaxItems;\n        const params = this.mergeActionParams({ event: e });\n        const balanceMarker = ((_c = (_b = (_a = e.detail) === null || _a === void 0 ? void 0 : _a.params) === null || _b === void 0 ? void 0 : _b.event) === null || _c === void 0 ? void 0 : _c.type) !== 'esl:before:hide';\n        // All currently active except panel that requested to be open\n        const $activePanels = this.$activePanels.filter((el) => el !== panel);\n        // overflow = pretended to be active (current active + balanceMarker (1 if nothing hides)) - limit\n        const overflow = Math.max(0, $activePanels.length + Number(balanceMarker) - max);\n        // close all extra active panels (not includes requested one)\n        $activePanels.slice(0, overflow).forEach((el) => el.hide(params));\n        if (max <= 0)\n            return e.preventDefault();\n    }\n    /** Process {@link ESLPanel} show event */\n    _onShow(e) {\n        const panel = e.target;\n        if (!this.includesPanel(panel))\n            return;\n        if (this.currentMode !== 'tabs')\n            return;\n        this.beforeAnimate();\n        if (this.shouldAnimate) {\n            this.onAnimate(this._previousHeight, panel.initialHeight);\n        }\n        else {\n            afterNextRender(() => this.afterAnimate(true));\n        }\n    }\n    /** Process {@link ESLPanel} pre-hide event */\n    _onBeforeHide(e) {\n        var _a, _b;\n        const { target: panel, detail } = e;\n        if (!this.includesPanel(panel))\n            return;\n        const min = this.currentMinItems;\n        // Check if the hide event was produced by the show event\n        const balanceMarker = ((_b = (_a = detail === null || detail === void 0 ? void 0 : detail.params) === null || _a === void 0 ? void 0 : _a.event) === null || _b === void 0 ? void 0 : _b.type) === 'esl:before:show';\n        // activePanels = currentActivePanels - 1 (hide) + 1 if the event produced by 'before:show'\n        const activeNumber = this.$activePanels.length - 1 + Number(balanceMarker);\n        if (activeNumber < min) {\n            const $firstInactive = this.$panels.find(($panel) => !$panel.open);\n            if (min === 1 || !$firstInactive)\n                return e.preventDefault();\n            const params = this.mergeActionParams({ event: e });\n            $firstInactive.show(params);\n        }\n        this._previousHeight = this.clientHeight;\n    }\n    /** Catches CSS transition end event to start post-animate processing */\n    _onTransitionEnd(e) {\n        if (!e || (e.propertyName === 'height' && e.target === this)) {\n            this.afterAnimate();\n        }\n    }\n    /** Handles configuration change */\n    _onConfigChange() {\n        this.refresh();\n    }\n};\nESLPanelGroup.is = 'esl-panel-group';\nESLPanelGroup.observedAttributes = ['mode', 'refresh-strategy', 'min-open-items', 'max-open-items'];\n/** List of supported modes */\nESLPanelGroup.supportedModes = ['accordion', 'tabs'];\n__decorate([\n    prop('esl:change:mode')\n], ESLPanelGroup.prototype, \"MODE_CHANGE_EVENT\", void 0);\n__decorate([\n    prop('esl:after:animate')\n], ESLPanelGroup.prototype, \"AFTER_ANIMATE_EVENT\", void 0);\n__decorate([\n    attr({ defaultValue: ESLPanel.is })\n], ESLPanelGroup.prototype, \"panelSel\", void 0);\n__decorate([\n    attr({ defaultValue: 'accordion' })\n], ESLPanelGroup.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'esl-{mode}-view' })\n], ESLPanelGroup.prototype, \"modeCls\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLPanelGroup.prototype, \"modeClsTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'not all' })\n], ESLPanelGroup.prototype, \"noAnimate\", void 0);\n__decorate([\n    attr({ defaultValue: 'animate' })\n], ESLPanelGroup.prototype, \"animationClass\", void 0);\n__decorate([\n    attr({ defaultValue: '1' })\n], ESLPanelGroup.prototype, \"minOpenItems\", void 0);\n__decorate([\n    attr({ defaultValue: '1' })\n], ESLPanelGroup.prototype, \"maxOpenItems\", void 0);\n__decorate([\n    attr({ defaultValue: 'last' })\n], ESLPanelGroup.prototype, \"refreshStrategy\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { noAnimate: true } })\n], ESLPanelGroup.prototype, \"transformParams\", void 0);\n__decorate([\n    memoize()\n], ESLPanelGroup.prototype, \"modeRules\", null);\n__decorate([\n    memoize()\n], ESLPanelGroup.prototype, \"minValueRules\", null);\n__decorate([\n    memoize()\n], ESLPanelGroup.prototype, \"maxValueRules\", null);\n__decorate([\n    memoize()\n], ESLPanelGroup.prototype, \"refreshRules\", null);\n__decorate([\n    listen('esl:before:show')\n], ESLPanelGroup.prototype, \"_onBeforeShow\", null);\n__decorate([\n    listen('esl:show')\n], ESLPanelGroup.prototype, \"_onShow\", null);\n__decorate([\n    listen('esl:before:hide')\n], ESLPanelGroup.prototype, \"_onBeforeHide\", null);\n__decorate([\n    listen('transitionend')\n], ESLPanelGroup.prototype, \"_onTransitionEnd\", null);\n__decorate([\n    listen({\n        event: 'change',\n        target: (group) => [group.modeRules, group.minValueRules, group.maxValueRules]\n    }),\n    decorate(debounce, 0)\n], ESLPanelGroup.prototype, \"_onConfigChange\", null);\nESLPanelGroup = ESLPanelGroup_1 = __decorate([\n    ExportNs('PanelGroup')\n], ESLPanelGroup);\n","import { getPropertyDescriptor } from '../misc/object/utils';\n/** Decorator \"bind\" allows to bind prototype method context to class instance */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function bind(target, propertyKey, descriptor) {\n    // Validation check\n    if (!descriptor || (typeof descriptor.value !== 'function')) {\n        throw new TypeError('Only class methods can be decorated via @bind');\n    }\n    // Original function\n    const originalFn = descriptor.value;\n    return descriptor = {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: function getBound() {\n            const proto = Object.getPrototypeOf(this);\n            const desc = getPropertyDescriptor(proto, propertyKey);\n            const isProtoCall = !desc || desc.get !== getBound;\n            return isProtoCall ? originalFn : (this[propertyKey] = originalFn.bind(this));\n        },\n        set(value) {\n            Object.defineProperty(this, propertyKey, {\n                value,\n                writable: true,\n                configurable: true,\n                enumerable: descriptor.enumerable\n            });\n        }\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { bind, ready, attr, boolAttr, listen } from '../../esl-utils/decorators';\nimport { rafDecorator } from '../../esl-utils/async/raf';\nimport { isMouseEvent, isTouchEvent, getTouchPoint, getOffsetPoint } from '../../esl-utils/dom/events';\nimport { isRelativeNode } from '../../esl-utils/dom/traversing';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core';\nimport { isRTL, RTLScroll, normalizeScrollLeft } from '../../esl-utils/dom/rtl';\n/**\n * ESLScrollbar is a reusable web component that replaces the browser's default scrollbar with\n * a custom scrollbar implementation.\n *\n * @author Yuliya Adamskaya\n */\nexport let ESLScrollbar = class ESLScrollbar extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._deferredDrag = rafDecorator((e) => this._onPointerDrag(e));\n        this._deferredRefresh = rafDecorator(() => this.refresh());\n        this._scrollTimer = 0;\n        this._resizeObserver = new ResizeObserver(this._deferredRefresh);\n        this._mutationObserver = new MutationObserver((rec) => this.updateContentObserve(rec));\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.render();\n        this.findTarget();\n    }\n    disconnectedCallback() {\n        this.unbindTargetEvents();\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        if (attrName === 'target')\n            this.findTarget();\n        if (attrName === 'horizontal')\n            this.refresh();\n    }\n    findTarget() {\n        this.$target = this.target ?\n            ESLTraversingQuery.first(this.target, this) :\n            null;\n    }\n    /** Target element to observe and scroll */\n    get $target() {\n        return this._$target || null;\n    }\n    set $target(content) {\n        this.unbindTargetEvents();\n        this._$target = content;\n        this.bindTargetEvents();\n        this._deferredRefresh();\n    }\n    render() {\n        this.innerHTML = '';\n        this.$scrollbarTrack = document.createElement('div');\n        this.$scrollbarTrack.className = this.trackClass;\n        this.$scrollbarThumb = document.createElement('div');\n        this.$scrollbarThumb.className = this.thumbClass;\n        this.$scrollbarTrack.appendChild(this.$scrollbarThumb);\n        this.appendChild(this.$scrollbarTrack);\n    }\n    bindTargetEvents() {\n        if (!this.$target)\n            return;\n        // Container resize/scroll observers/listeners\n        if (document.documentElement === this.$target) {\n            this.$$on({ event: 'scroll resize', target: window }, this._onScrollOrResize);\n        }\n        else {\n            this.$$on({ event: 'scroll', target: this.$target }, this._onScrollOrResize);\n            this._resizeObserver.observe(this.$target);\n        }\n        // Subscribes to the child elements resizes\n        this._mutationObserver.observe(this.$target, { childList: true });\n        Array.from(this.$target.children).forEach((el) => this._resizeObserver.observe(el));\n    }\n    /** Resubscribes resize observer on child elements when container content changes */\n    updateContentObserve(recs = []) {\n        if (!this.$target)\n            return;\n        const contentChanges = recs.filter((rec) => rec.type === 'childList');\n        contentChanges.forEach((rec) => {\n            Array.from(rec.addedNodes)\n                .filter((el) => el instanceof Element)\n                .forEach((el) => this._resizeObserver.observe(el));\n            Array.from(rec.removedNodes)\n                .filter((el) => el instanceof Element)\n                .forEach((el) => this._resizeObserver.unobserve(el));\n        });\n        if (contentChanges.length)\n            this._deferredRefresh();\n    }\n    unbindTargetEvents() {\n        if (!this.$target)\n            return;\n        this.$$off(this._onScrollOrResize);\n        if (document.documentElement !== this.$target) {\n            this._resizeObserver.disconnect();\n            this._mutationObserver.disconnect();\n        }\n    }\n    /** @readonly Scrollable distance size value (px) */\n    get scrollableSize() {\n        if (!this.$target)\n            return 0;\n        return this.horizontal ?\n            this.$target.scrollWidth - this.$target.clientWidth :\n            this.$target.scrollHeight - this.$target.clientHeight;\n    }\n    /** @readonly Track size value (px) */\n    get trackOffset() {\n        return this.horizontal ? this.$scrollbarTrack.offsetWidth : this.$scrollbarTrack.offsetHeight;\n    }\n    /** @readonly Thumb size value (px) */\n    get thumbOffset() {\n        return this.horizontal ? this.$scrollbarThumb.offsetWidth : this.$scrollbarThumb.offsetHeight;\n    }\n    /** @readonly Relative thumb size value (between 0.0 and 1.0) */\n    get thumbSize() {\n        // behave as native scroll\n        if (!this.$target || !this.$target.scrollWidth || !this.$target.scrollHeight)\n            return 1;\n        const areaSize = this.horizontal ? this.$target.clientWidth : this.$target.clientHeight;\n        const scrollSize = this.horizontal ? this.$target.scrollWidth : this.$target.scrollHeight;\n        return Math.min((areaSize + 1) / scrollSize, 1);\n    }\n    /** Relative position value (between 0.0 and 1.0) */\n    get position() {\n        if (!this.$target)\n            return 0;\n        const scrollOffset = this.horizontal ? normalizeScrollLeft(this.$target) : this.$target.scrollTop;\n        return this.scrollableSize ? (scrollOffset / this.scrollableSize) : 0;\n    }\n    set position(position) {\n        this.scrollTargetTo(this.scrollableSize * this.normalizePosition(position));\n        this.update();\n    }\n    /** Normalizes position value (between 0.0 and 1.0) */\n    normalizePosition(position) {\n        const relativePosition = Math.min(1, Math.max(0, position));\n        if (!isRTL(this.$target) || !this.horizontal)\n            return relativePosition;\n        return RTLScroll.type === 'negative' ? (relativePosition - 1) : (1 - relativePosition);\n    }\n    /** Scrolls target element to passed position */\n    scrollTargetTo(pos) {\n        if (!this.$target)\n            return;\n        this.$target.scrollTo({\n            [this.horizontal ? 'left' : 'top']: pos,\n            behavior: this.dragging ? 'auto' : 'smooth'\n        });\n    }\n    /** Updates thumb size and position */\n    update() {\n        this.$$fire('esl:change:scroll', { bubbles: false });\n        if (!this.$scrollbarThumb || !this.$scrollbarTrack)\n            return;\n        const thumbSize = this.trackOffset * this.thumbSize;\n        const thumbPosition = (this.trackOffset - thumbSize) * this.position;\n        const style = {\n            [this.horizontal ? 'left' : 'top']: `${thumbPosition}px`,\n            [this.horizontal ? 'width' : 'height']: `${thumbSize}px`\n        };\n        Object.assign(this.$scrollbarThumb.style, style);\n    }\n    /** Updates auxiliary markers */\n    updateMarkers() {\n        const { position, thumbSize } = this;\n        this.toggleAttribute('at-start', thumbSize < 1 && position <= 0);\n        this.toggleAttribute('at-end', thumbSize < 1 && position >= 1);\n        this.toggleAttribute('inactive', thumbSize >= 1);\n    }\n    /** Refreshes scroll state and position */\n    refresh() {\n        this.update();\n        this.updateMarkers();\n    }\n    /** Returns position from MouseEvent coordinates (not normalized) */\n    toPosition(event) {\n        const { horizontal, thumbOffset, trackOffset } = this;\n        const point = getTouchPoint(event);\n        const offset = getOffsetPoint(this.$scrollbarTrack);\n        const pointPosition = horizontal ? point.x - offset.x : point.y - offset.y;\n        const freeTrackArea = trackOffset - thumbOffset; // size of free track px\n        const clickPositionNoOffset = pointPosition - thumbOffset / 2;\n        return clickPositionNoOffset / freeTrackArea;\n    }\n    // Event listeners\n    /** Handles `mousedown` / `touchstart` event to manage thumb drag start and scroll clicks */\n    _onPointerDown(event) {\n        this._initialPosition = this.position;\n        this._pointerPosition = this.toPosition(event);\n        const point = getTouchPoint(event);\n        this._initialMousePosition = this.horizontal ? point.x : point.y;\n        if (event.target === this.$scrollbarThumb) {\n            this._onThumbPointerDown(event); // Drag start handler\n        }\n        else {\n            this._onPointerDownTick(true); // Continuous scroll and click handler\n        }\n        // Subscribes inverse handlers\n        isMouseEvent(event) && this.$$on({ event: 'mouseup', target: window }, this._onPointerUp);\n        isTouchEvent(event) && this.$$on({ event: 'touchend', target: window }, this._onPointerUp);\n        // Prevents default text selection, etc.\n        if (!isTouchEvent(event))\n            event.preventDefault();\n    }\n    /** Handles a scroll click / continuous scroll*/\n    _onPointerDownTick(first) {\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        const position = this.position;\n        const allowedOffset = (first ? 1 : 1.5) * this.thumbSize;\n        this.position = Math.min(position + allowedOffset, Math.max(position - allowedOffset, this._pointerPosition));\n        if (this.position === this._pointerPosition || this.noContinuousScroll)\n            return;\n        this._scrollTimer = window.setTimeout(this._onPointerDownTick, 400);\n    }\n    /** Handles thumb drag start */\n    _onThumbPointerDown(event) {\n        var _a;\n        this.toggleAttribute('dragging', true);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.setProperty('scroll-behavior', 'auto');\n        // Attaches drag listeners\n        this.$$on(this._onBodyClick);\n        isMouseEvent(event) && this.$$on({ event: 'mousemove', target: window }, this._onPointerMove);\n        isTouchEvent(event) && this.$$on({ event: 'touchmove', target: window }, this._onPointerMove);\n    }\n    /** Sets position on drag */\n    _onPointerDrag(event) {\n        const point = getTouchPoint(event);\n        const mousePosition = this.horizontal ? point.x : point.y;\n        const positionChange = mousePosition - this._initialMousePosition;\n        const scrollableAreaHeight = this.trackOffset - this.thumbOffset;\n        const absChange = scrollableAreaHeight ? (positionChange / scrollableAreaHeight) : 0;\n        this.position = this._initialPosition + absChange;\n        this.updateMarkers();\n    }\n    /** `mousemove` document handler for thumb drag event. Active only if drag action is active */\n    _onPointerMove(event) {\n        if (!this.dragging)\n            return;\n        // Request position update\n        this._deferredDrag(event);\n        // Prevents default text selection, etc.\n        event.preventDefault();\n        event.stopPropagation();\n    }\n    /** `mouseup` short-time document handler for drag end action */\n    _onPointerUp(event) {\n        var _a;\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        this.toggleAttribute('dragging', false);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.removeProperty('scroll-behavior');\n        // Unbinds drag listeners\n        this.$$off(this._onPointerMove);\n        this.$$off(this._onPointerUp);\n    }\n    /** Body `click` short-time handler to prevent clicks event on thumb drag. Handles capture phase */\n    _onBodyClick(event) {\n        event.stopImmediatePropagation();\n    }\n    /**\n     * Handler for refresh event\n     * @param event - instance of 'esl:refresh' event.\n     */\n    _onRefresh(event) {\n        if (!(event.target instanceof Element))\n            return;\n        if (!isRelativeNode(event.target.parentNode, this.$target))\n            return;\n        this._deferredRefresh();\n    }\n    /**\n     * Handler for scroll and resize events\n     * @param event - instance of 'resize' or 'scroll' event\n     */\n    _onScrollOrResize(event) {\n        if (event.type === 'scroll' && this.dragging)\n            return;\n        this._deferredRefresh();\n    }\n};\nESLScrollbar.is = 'esl-scrollbar';\nESLScrollbar.observedAttributes = ['target', 'horizontal'];\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"horizontal\", void 0);\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"noContinuousScroll\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLScrollbar.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-thumb' })\n], ESLScrollbar.prototype, \"thumbClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-track' })\n], ESLScrollbar.prototype, \"trackClass\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"dragging\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"inactive\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atStart\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atEnd\", void 0);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"connectedCallback\", null);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"disconnectedCallback\", null);\n__decorate([\n    listen('mousedown touchstart')\n], ESLScrollbar.prototype, \"_onPointerDown\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerDownTick\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onThumbPointerDown\", null);\n__decorate([\n    listen({ auto: false, event: 'click', target: window, once: true, capture: true })\n], ESLScrollbar.prototype, \"_onBodyClick\", null);\n__decorate([\n    listen({\n        event: (el) => el.REFRESH_EVENT,\n        target: window\n    })\n], ESLScrollbar.prototype, \"_onRefresh\", null);\nESLScrollbar = __decorate([\n    ExportNs('Scrollbar')\n], ESLScrollbar);\n","import { DeviceDetector } from '../../esl-utils/environment/device-detector';\nlet iObserver;\n/** ESL Image lazy loading IntersectionObserver instance */\nexport function getIObserver() {\n    if (!iObserver) {\n        iObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(handleViewport);\n        }, {\n            threshold: [0.01],\n            rootMargin: DeviceDetector.isMobile ? '250px' : '500px' // rootMargin value for IntersectionObserver\n        });\n    }\n    return iObserver;\n}\nfunction handleViewport(entry) {\n    const image = entry.target;\n    // Check that entry is going to appear in the viewport area\n    if (entry.isIntersecting || entry.intersectionRatio > 0) {\n        image.triggerLoad();\n    }\n}\n","/** checks if the attribute is dangerous */\nconst isDangerousAttribute = (name, value) => {\n    const val = value.replace(/\\s+/g, '').toLowerCase();\n    if (['src', 'data', 'href', 'xlink:href'].includes(name)\n        && (val.includes('javascript:') || val.includes('data:text/html')))\n        return true;\n    return name.indexOf('on') === 0;\n};\n/** loops through each attribute, if it's dangerous, remove it */\nconst removeDangerousAttributes = (el) => {\n    Array.from(el.attributes).forEach(({ name, value }) => {\n        if (isDangerousAttribute(name, value)) {\n            el.removeAttribute(name);\n        }\n    });\n};\n/** removes malicious attributes from element and its children */\nconst sanitizeElAttributes = (body) => {\n    Array.from(body.children).forEach((el) => {\n        removeDangerousAttributes(el);\n        sanitizeElAttributes(el);\n    });\n};\n/** removes script elements inside element */\nconst removeScripts = (body) => {\n    const scripts = body.querySelectorAll('script');\n    Array.from(scripts).forEach((script) => script.remove());\n};\nconst filterElements = (body, allowedTopLevelTags) => {\n    if (!allowedTopLevelTags.length)\n        return;\n    Array.from(body.childNodes).forEach((el) => {\n        if (!allowedTopLevelTags.includes(el.tagName))\n            body.removeChild(el);\n    });\n};\n/**\n * Sanitizes html string from malicious attributes, values, and scripts\n * Can also filter elements at the top nesting level by tag names.\n * @param html - html string to sanitize\n * @param allowedTopLevelTags - array of allowed tag names\n */\nexport function sanitize(html, allowedTopLevelTags = []) {\n    // converts the string to an HTML document\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n    const body = doc.body || document.createElement('body');\n    // sanitizes html\n    removeScripts(body);\n    sanitizeElAttributes(body);\n    // filter allowed tags\n    filterElements(body, allowedTopLevelTags);\n    return body.innerHTML;\n}\n","import { sanitize } from '../../esl-utils/dom/sanitize';\nexport const EMPTY_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\nexport const isEmptyImage = (src) => src === EMPTY_IMAGE;\nexport const STRATEGIES = {\n    'cover': {\n        apply(img, shadowImg) {\n            const src = shadowImg.src;\n            const isEmpty = !src || isEmptyImage(src);\n            img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n        },\n        clear(img) {\n            img.style.backgroundImage = '';\n        }\n    },\n    'save-ratio': {\n        apply(img, shadowImg) {\n            const src = shadowImg.src;\n            const isEmpty = !src || isEmptyImage(src);\n            img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n            if (shadowImg.width === 0)\n                return;\n            img.style.paddingTop = isEmpty ? '' : `${(shadowImg.height * 100 / shadowImg.width)}%`;\n        },\n        clear(img) {\n            img.style.paddingTop = '';\n            img.style.backgroundImage = '';\n        }\n    },\n    'fit': {\n        apply(img, shadowImg) {\n            const innerImg = img.attachInnerImage();\n            innerImg.src = shadowImg.src;\n            innerImg.removeAttribute('width');\n        },\n        clear(img) {\n            img.removeInnerImage();\n        }\n    },\n    'origin': {\n        apply(img, shadowImg) {\n            const innerImg = img.attachInnerImage();\n            innerImg.src = shadowImg.src;\n            innerImg.width = shadowImg.width / window.devicePixelRatio;\n        },\n        clear(img) {\n            img.removeInnerImage();\n        }\n    },\n    'inner-svg': {\n        apply(img, shadowImg) {\n            const request = new XMLHttpRequest();\n            request.open('GET', shadowImg.src, true);\n            request.onreadystatechange = () => {\n                if (request.readyState !== 4 || request.status !== 200)\n                    return;\n                img.innerHTML = sanitize(request.responseText, ['svg']);\n            };\n            request.send();\n        },\n        clear(img) {\n            img.innerHTML = '';\n        }\n    }\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLImage_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { bind, prop, attr, boolAttr } from '../../esl-utils/decorators';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { ESLMediaRuleList } from '../../esl-media-query/core';\nimport { ESLTraversingQuery } from '../../esl-traversing-query/core/esl-traversing-query';\nimport { getIObserver } from './esl-image-iobserver';\nimport { EMPTY_IMAGE, STRATEGIES, isEmptyImage } from './esl-image-strategies';\nconst isLoadState = (state) => ['error', 'loaded', 'ready'].includes(state);\n/**\n * ESLImage - custom element, that provides flexible ways to include images on web pages.\n * Was originally developed as an alternative to `<picture>` element, but with more features inside.\n *\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya\n */\nexport let ESLImage = ESLImage_1 = class ESLImage extends ESLBaseElement {\n    connectedCallback() {\n        super.connectedCallback();\n        this.alt =\n            this.alt || this.getAttribute('aria-label') || this.getAttribute('data-alt') || '';\n        this.updateA11y();\n        this.srcRules = ESLMediaRuleList.parse(this.src);\n        if (this.lazyObservable) {\n            this.removeAttribute('lazy-triggered');\n            getIObserver().observe(this);\n            this._detachLazyTrigger = function () {\n                getIObserver().unobserve(this);\n                this._detachLazyTrigger = null;\n            };\n        }\n        this.refresh();\n    }\n    disconnectedCallback() {\n        this.clearImage();\n        super.disconnectedCallback();\n        this._detachLazyTrigger && this._detachLazyTrigger();\n        if (this._srcRules) {\n            this._srcRules.removeEventListener(this._onMediaMatchChange);\n        }\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        switch (attrName) {\n            case 'aria-label':\n                this.alt = newVal || '';\n                break;\n            case 'alt':\n            case 'role':\n                this.updateA11y();\n                break;\n            case 'data-src':\n                this.srcRules = ESLMediaRuleList.parse(newVal);\n                this.refresh();\n                break;\n            case 'data-src-base':\n                this.refresh();\n                break;\n            case 'mode':\n                this.changeMode(oldVal, newVal);\n                break;\n            case 'lazy-triggered':\n                this.lazyTriggered && this.update();\n                break;\n        }\n    }\n    get srcRules() {\n        if (!this._srcRules) {\n            this.srcRules = ESLMediaRuleList.parse(this.src);\n        }\n        return this._srcRules;\n    }\n    set srcRules(rules) {\n        if (this._srcRules) {\n            this._srcRules.removeEventListener(this._onMediaMatchChange);\n        }\n        this._srcRules = rules;\n        this._srcRules.addEventListener(this._onMediaMatchChange);\n    }\n    get currentSrc() {\n        return this._currentSrc;\n    }\n    get empty() {\n        return !this._currentSrc || isEmptyImage(this._currentSrc);\n    }\n    get canUpdate() {\n        return this.lazyTriggered || this.lazy === 'none';\n    }\n    get lazyObservable() {\n        return this.lazy !== 'none' && this.lazy !== 'manual';\n    }\n    get originalWidth() {\n        return this._shadowImageElement ? this._shadowImageElement.width : 0;\n    }\n    get originalHeight() {\n        return this._shadowImageElement ? this._shadowImageElement.height : 0;\n    }\n    triggerLoad() {\n        this.setAttribute('lazy-triggered', '');\n    }\n    changeMode(oldVal, newVal) {\n        oldVal = oldVal || 'save-ratio';\n        newVal = newVal || 'save-ratio';\n        if (oldVal === newVal)\n            return;\n        if (!STRATEGIES[newVal]) {\n            this.mode = oldVal;\n            throw new Error('ESL Image: Unsupported mode: ' + newVal);\n        }\n        this.clearImage();\n        if (this.loaded)\n            this.syncImage();\n    }\n    update(force = false) {\n        if (!this.canUpdate)\n            return;\n        const src = this.getPath(this.srcRules.activeValue);\n        if (this._currentSrc !== src || !this.ready || force) {\n            this._currentSrc = src;\n            this._shadowImg.src = src;\n            if (this.refreshOnUpdate || !this.ready) {\n                this.syncImage();\n            }\n            if (this._shadowImg.complete) {\n                this._shadowImgError ? this._onError() : this._onLoad();\n            }\n        }\n        this._detachLazyTrigger && this._detachLazyTrigger();\n    }\n    updateA11y() {\n        const role = this.getAttribute('role') || 'img';\n        this.setAttribute('role', role);\n        this.innerImage && (this.innerImage.alt = this.alt);\n        if (role === 'img')\n            this.setAttribute('aria-label', this.alt);\n    }\n    getPath(src) {\n        if (!src || src === '0' || src === 'none') {\n            return ESLImage_1.EMPTY_IMAGE;\n        }\n        return this.srcBase + src;\n    }\n    refresh() {\n        this.removeAttribute('loaded');\n        this.removeAttribute('ready');\n        this.updateContainerClasses();\n        this.clearImage();\n        this.update(true);\n    }\n    syncImage() {\n        const strategy = STRATEGIES[this.mode];\n        this._strategy = strategy;\n        strategy && strategy.apply(this, this._shadowImg);\n    }\n    clearImage() {\n        this._strategy && this._strategy.clear(this);\n        this._strategy = null;\n    }\n    get innerImage() {\n        return this._innerImg;\n    }\n    attachInnerImage() {\n        if (!this._innerImg) {\n            this._innerImg = this.querySelector(`img.${this.innerImageClass}`) ||\n                this._shadowImg.cloneNode();\n            this._innerImg.className = this.innerImageClass;\n        }\n        if (!this._innerImg.parentNode) {\n            this.appendChild(this._innerImg);\n        }\n        this._innerImg.alt = this.alt;\n        return this._innerImg;\n    }\n    removeInnerImage() {\n        if (!this.innerImage)\n            return;\n        this.removeChild(this.innerImage);\n        setTimeout(() => {\n            if (this._innerImg && !this._innerImg.parentNode) {\n                this._innerImg = null;\n            }\n        });\n    }\n    get _shadowImg() {\n        if (!this._shadowImageElement) {\n            this._shadowImageElement = new Image();\n            this._shadowImageElement.onload = this._onLoad;\n            this._shadowImageElement.onerror = this._onError;\n        }\n        return this._shadowImageElement;\n    }\n    get _shadowImgError() {\n        if (!this._shadowImg.complete)\n            return false;\n        if (this._shadowImg.src.slice(-4) === '.svg')\n            return false;\n        return this._shadowImg.naturalHeight <= 0;\n    }\n    _onLoad() {\n        this.syncImage();\n        this._onReadyState(true);\n        this.updateContainerClasses();\n    }\n    _onError() {\n        this._onReadyState(false);\n        this.updateContainerClasses();\n    }\n    _onMediaMatchChange() {\n        this.update();\n    }\n    _onReadyState(successful) {\n        if (this.ready)\n            return;\n        this.toggleAttribute('loaded', successful);\n        this.toggleAttribute('error', !successful);\n        this.toggleAttribute('ready', true);\n        this.$$fire(successful ? this.LOAD_EVENT : this.ERROR_EVENT, { bubbles: false });\n        this.$$fire(this.READY_EVENT, { bubbles: false });\n    }\n    updateContainerClasses() {\n        if (this.containerClass === null)\n            return;\n        const cls = this.containerClass || this.constructor.DEFAULT_CONTAINER_CLS;\n        const state = isLoadState(this.containerClassState) && this[this.containerClassState];\n        const targetEl = ESLTraversingQuery.first(this.containerClassTarget, this);\n        targetEl && CSSClassUtils.toggle(targetEl, cls, state);\n    }\n};\nESLImage.is = 'esl-image';\nESLImage.observedAttributes = ['alt', 'role', 'mode', 'aria-label', 'data-src', 'data-src-base', 'lazy-triggered'];\n/** Default container class value */\nESLImage.DEFAULT_CONTAINER_CLS = 'img-container-loaded';\nESLImage.STRATEGIES = STRATEGIES;\nESLImage.EMPTY_IMAGE = EMPTY_IMAGE;\n__decorate([\n    prop('ready')\n], ESLImage.prototype, \"READY_EVENT\", void 0);\n__decorate([\n    prop('load')\n], ESLImage.prototype, \"LOAD_EVENT\", void 0);\n__decorate([\n    prop('error')\n], ESLImage.prototype, \"ERROR_EVENT\", void 0);\n__decorate([\n    attr()\n], ESLImage.prototype, \"alt\", void 0);\n__decorate([\n    attr({ defaultValue: 'save-ratio' })\n], ESLImage.prototype, \"mode\", void 0);\n__decorate([\n    attr({ dataAttr: true })\n], ESLImage.prototype, \"src\", void 0);\n__decorate([\n    attr({ dataAttr: true })\n], ESLImage.prototype, \"srcBase\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLImage.prototype, \"lazy\", void 0);\n__decorate([\n    boolAttr()\n], ESLImage.prototype, \"lazyTriggered\", void 0);\n__decorate([\n    boolAttr()\n], ESLImage.prototype, \"refreshOnUpdate\", void 0);\n__decorate([\n    attr({ defaultValue: 'inner-image' })\n], ESLImage.prototype, \"innerImageClass\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLImage.prototype, \"containerClass\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLImage.prototype, \"containerClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'ready' })\n], ESLImage.prototype, \"containerClassState\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"ready\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"loaded\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"error\", void 0);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onLoad\", null);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onError\", null);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onMediaMatchChange\", null);\nESLImage = ESLImage_1 = __decorate([\n    ExportNs('Image')\n], ESLImage);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { attr } from '@exadel/esl/modules/esl-utils/decorators/attr';\nimport { prop } from '@exadel/esl/modules/esl-utils/decorators/prop';\nimport { listen } from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport { ESLMediaQuery } from '@exadel/esl/modules/esl-media-query/core';\nimport { ESLToggleable } from '@exadel/esl/modules/esl-toggleable/core';\nexport class EAKSidebar extends ESLToggleable {\n    constructor() {\n        super(...arguments);\n        this.closeOnEsc = true;\n        this.closeOnOutsideAction = true;\n        this.submenus = '.sidebar-nav-secondary.nav-secondary-panel';\n        this.activeMenuAttr = 'data-open';\n    }\n    get $submenus() {\n        return Array.from(this.querySelectorAll(this.submenus));\n    }\n    setInitialState() {\n        const isDesktop = ESLMediaQuery.for('@+MD').matches;\n        this.toggle(isDesktop, { force: true, initiator: 'init', immediate: true });\n    }\n    collapseAll() {\n        this.$submenus.forEach((menu) => menu.hide({ activator: this }));\n    }\n    expandActive(noCollapse = false) {\n        this.$submenus\n            .filter((menu) => menu.hasAttribute('data-open'))\n            .forEach((menu) => menu.show({ noCollapse, activator: this }));\n    }\n    updateA11y() {\n        const targetEl = this.$a11yTarget;\n        if (!targetEl)\n            return;\n        targetEl.setAttribute('aria-expanded', String(this.open));\n    }\n    hide(params) {\n        if (ESLMediaQuery.for('@+MD').matches)\n            return this;\n        return super.hide(params);\n    }\n    onShow(params) {\n        this._animation = !params.immediate;\n        super.onShow(params);\n        this.expandActive(params.initiator === 'init');\n    }\n    onHide(params) {\n        this._animation = !params.immediate;\n        super.onHide(params);\n        this.collapseAll();\n    }\n    onBreakpointChange({ matches: isDesktop }) {\n        this.toggle(isDesktop, { force: true, initiator: 'bp-change', immediate: !isDesktop });\n    }\n}\nEAKSidebar.is = 'eak-sidebar';\n__decorate([\n    prop()\n], EAKSidebar.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    prop()\n], EAKSidebar.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    prop()\n], EAKSidebar.prototype, \"submenus\", void 0);\n__decorate([\n    prop()\n], EAKSidebar.prototype, \"activeMenuAttr\", void 0);\n__decorate([\n    attr({ name: 'animation' })\n], EAKSidebar.prototype, \"_animation\", void 0);\n__decorate([\n    listen({\n        event: 'change',\n        target: ESLMediaQuery.for('@+MD')\n    })\n], EAKSidebar.prototype, \"onBreakpointChange\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement, attr } from '@exadel/esl/modules/esl-base-element/core';\nimport { ready } from '@exadel/esl/modules/esl-utils/decorators/ready';\nimport { isIE } from '@exadel/esl/modules/esl-utils/environment/device-detector';\nimport { bind } from '@exadel/esl/modules/esl-utils/decorators/bind';\nimport { memoize } from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport { range } from '@exadel/esl/modules/esl-utils/misc/array';\nexport class EAKBanner extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._animateTimer = 0;\n        this._$active = [];\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (isIE)\n            return;\n        this.startAnimation();\n    }\n    disconnectedCallback() {\n        this.stopAnimation();\n        super.disconnectedCallback();\n    }\n    get $lines() {\n        return Array.from(this.querySelectorAll(EAKBanner.TARGETS));\n    }\n    get $randomLine() {\n        const index = Math.floor(Math.random() * this.$lines.length);\n        return this.$lines[index];\n    }\n    startAnimation() {\n        this._onIteration();\n    }\n    stopAnimation() {\n        this._animateTimer && window.clearTimeout(this._animateTimer);\n    }\n    _onIteration() {\n        const $candidates = range(this.targetsNumber, () => this.$randomLine);\n        const delay = this.iterationTime / this.targetsNumber;\n        if (!$candidates.length)\n            return;\n        this._$active.forEach((line, i) => {\n            window.setTimeout(() => {\n                line.classList.remove('animate');\n                line.style.strokeDashoffset = '';\n            }, delay * i);\n        });\n        $candidates.forEach((line, i) => {\n            window.setTimeout(() => {\n                line.classList.add('animate');\n                const lineLength = line.getTotalLength();\n                line.style.strokeDasharray = lineLength + '';\n                line.style.strokeDashoffset = lineLength + '';\n            }, delay * i);\n        });\n        this._$active = $candidates;\n        this._animateTimer = window.setTimeout(this._onIteration, this.iterationTime);\n    }\n}\nEAKBanner.is = 'eak-banner';\nEAKBanner.TARGETS = 'g > path';\n__decorate([\n    attr({ defaultValue: 2, parser: parseInt })\n], EAKBanner.prototype, \"targetsNumber\", void 0);\n__decorate([\n    attr({ defaultValue: 4000, parser: parseInt })\n], EAKBanner.prototype, \"iterationTime\", void 0);\n__decorate([\n    ready\n], EAKBanner.prototype, \"connectedCallback\", null);\n__decorate([\n    memoize()\n], EAKBanner.prototype, \"$lines\", null);\n__decorate([\n    bind\n], EAKBanner.prototype, \"_onIteration\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement } from '@exadel/esl/modules/esl-base-element/core';\nimport { listen } from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport { attr } from '@exadel/esl/modules/esl-utils/decorators/attr';\nimport { boolAttr } from '@exadel/esl/modules/esl-utils/decorators/bool-attr';\nimport { memoize } from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport { getTouchPoint } from '@exadel/esl/modules/esl-utils/dom/events/misc';\nexport class EAKZoomImage extends ESLBaseElement {\n    get $image() {\n        const originalImage = document.createElement('esl-image');\n        originalImage.setAttribute('data-src', this.src);\n        originalImage.setAttribute('lazy', '');\n        originalImage.setAttribute('mode', 'fit');\n        return originalImage;\n    }\n    get $closeButton() {\n        const button = document.createElement('button');\n        button.setAttribute('class', 'close-button');\n        return button;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$image);\n        this.appendChild(this.$closeButton);\n    }\n    zoom() {\n        if (this.inDrag || this.inZoom)\n            return;\n        this.inZoom = true;\n        this.$image.style.transform = `scale(${this.scale})`;\n        this.$image.style.marginTop = '0';\n        this.$image.style.marginLeft = '0';\n        this.style.width = `${this.$image.offsetWidth}px`;\n        this.style.height = `${this.$image.offsetHeight}px`;\n        this.$$on('pointerdown', this.onPointerDown);\n    }\n    unzoom() {\n        this.inZoom = false;\n        this.$image.style.removeProperty('transform');\n        this.$image.style.marginTop = '0';\n        this.$image.style.marginLeft = '0';\n        this.style.width = 'auto';\n        this.style.height = 'auto';\n        this.$$off(this.onPointerDown);\n    }\n    onPointerDown(e) {\n        this.inDrag = true;\n        this.startPoint = getTouchPoint(e);\n        this.startPosition = {\n            x: parseInt(this.$image.style.marginLeft, 10) || 0,\n            y: parseInt(this.$image.style.marginTop, 10) || 0,\n        };\n        this.$$on('pointermove', this.onPointerMove);\n        this.$$on('pointerup', this.onPointerUp);\n        this.setPointerCapture(e.pointerId);\n        e.preventDefault();\n    }\n    onPointerUp(e) {\n        if (!this.inDrag)\n            return;\n        e.preventDefault();\n        this.inDrag = false;\n        this.$$off(this.onPointerMove);\n        this.$$off(this.onPointerUp);\n        this.releasePointerCapture(e.pointerId);\n    }\n    onPointerMove(e) {\n        if (!this.inDrag)\n            return;\n        const point = getTouchPoint(e);\n        const scale = parseInt(this.scale, 10);\n        const offsetX = point.x - this.startPoint.x;\n        const offsetY = point.y - this.startPoint.y;\n        const maxOffsetX = (this.$image.offsetWidth * scale - this.offsetWidth) * 0.5;\n        const maxOffsetY = (this.$image.offsetHeight * scale - this.offsetHeight) * 0.5;\n        if (maxOffsetX < 0 || maxOffsetY < 0)\n            return;\n        const x = this.startPosition.x + offsetX;\n        const y = this.startPosition.y + offsetY;\n        const normalizedX = Math.min(maxOffsetX, Math.max(-maxOffsetX, x));\n        const normalizedY = Math.min(maxOffsetY, Math.max(-maxOffsetY, y));\n        this.$image.style.marginTop = `${normalizedY}px`;\n        this.$image.style.marginLeft = `${normalizedX}px`;\n        e.preventDefault();\n    }\n    onClick(e) {\n        const isCloseBtn = this.$closeButton.contains(e.target);\n        isCloseBtn ? this.unzoom() : this.zoom();\n    }\n    onOutsideClick(e) {\n        if (!this.$image.contains(e.target)) {\n            this.unzoom();\n        }\n    }\n}\nEAKZoomImage.is = 'eak-zoom-image';\n__decorate([\n    attr({ dataAttr: true })\n], EAKZoomImage.prototype, \"src\", void 0);\n__decorate([\n    attr({ defaultValue: '2' })\n], EAKZoomImage.prototype, \"scale\", void 0);\n__decorate([\n    boolAttr()\n], EAKZoomImage.prototype, \"inZoom\", void 0);\n__decorate([\n    boolAttr()\n], EAKZoomImage.prototype, \"inDrag\", void 0);\n__decorate([\n    memoize()\n], EAKZoomImage.prototype, \"$image\", null);\n__decorate([\n    memoize()\n], EAKZoomImage.prototype, \"$closeButton\", null);\n__decorate([\n    listen('pointerdown')\n], EAKZoomImage.prototype, \"onClick\", null);\n__decorate([\n    listen({ event: 'pointerdown', target: 'body' })\n], EAKZoomImage.prototype, \"onOutsideClick\", null);\n","import { ESLTabs, ESLTab, ESLPanel, ESLPanelGroup, ESLTrigger, ESLScrollbar, ESLToggleableDispatcher, ESLImage, } from '@exadel/esl';\nimport { EAKSidebar } from './navigation/navigation';\nimport { EAKBanner } from './landing/banner/banner';\nimport { EAKZoomImage } from './eak-zoom-image/eak-zoom-image';\nESLTabs.register();\nESLTab.register();\nESLToggleableDispatcher.init();\nESLPanelGroup.register();\nESLPanel.register();\nESLTrigger.register();\nESLScrollbar.register();\nESLImage.register();\nEAKBanner.register();\nEAKSidebar.register();\nEAKZoomImage.register();\n"],"names":["__webpack_require__","g","globalThis","this","Function","e","window","ExportNs","name","module","root","value","split","reduce","obj","key","index","parts","length","type","Error","exportNs","declare","Object","defineProperty","isObject","resolveDomTarget","Element","$host","hasAttr","$el","Array","isArray","every","element","hasAttribute","getAttr","fallback","getAttribute","setAttr","forEach","removeAttribute","setAttribute","prop","prototypeConfig","hasOwnProperty","call","TypeError","writable","readonly","enumerable","configurable","isMouseEvent","event","MouseEvent","isTouchEvent","TouchEvent","PASSIVE_EVENTS","isPassiveByDefault","includes","getCompositeTarget","targets","composedPath","target","getTouchPoint","source","changedTouches","x","pageX","y","pageY","overrideEvent","provider","get","identity","arg","resolveProperty","val","origin","wrap","arr","uniq","slice","result","set","Set","item","add","push","memoizeFn","fn","hashFn","defaultArgsHashFn","memo","args","console","warn","apply","cache","has","Map","clear","undefined","String","defined","params","param","getPropertyDescriptor","o","proto","desc","getOwnPropertyDescriptor","getPrototypeOf","memoize","descriptor","originalMethod","locks","defineOwnKeySafe","memoizeGetter","memoizeMethod","WeakMap","delete","isEqual","obj1","obj2","is","keys1","keys","keys2","some","isSimilar","mask","deep","arrObj","arrMask","comparer","itm","property","toKeyDef","parseKeysPath","path","start","end","substring","isIndex","Math","floor","getByPath","data","defaultValue","map","parseKeys","curr","toKebabCase","str","replace","toLowerCase","unwrapParenthesis","trim","parseString","parseNumber","nanValue","NaN","isNaN","evaluate","DEF_FORMAT_MATCHER","isMatches","el","matcher","matches","isRelativeNode","nodeA","nodeB","contains","createSequenceFinder","next","includeSelf","base","predicate","findNext","nextElementSibling","findPrev","previousElementSibling","findParent","parentElement","findClosest","findHost","getRootNode","ShadowRoot","host","findAll","sel","from","querySelectorAll","findChildren","children","filter","findClosestBy","node","skipSelf","current","parentNode","firstElementChild","lastElementChild","TraversingUtils","isRelative","closestBy","Rect","static","rect","left","top","width","height","rect1","rect2","max","bottom","min","right","constructor","cx","cy","grow","incrementX","incrementY","shrink","decrementX","decrementY","area","getNodeName","Window","getParentNode","assignedSlot","document","ownerDocument","documentElement","getDocument","getListScrollParents","list","_a","scrollParent","getScrollParent","isBody","body","isScrollable","updatedList","concat","indexOf","HTMLElement","overflow","overflowX","overflowY","getComputedStyle","test","ESLTraversingQuery_1","ESLTraversingQuery","PROCESSORS_REGEX","ELEMENT_PROCESSORS","COLLECTION_PROCESSORS","RegExp","join","selString","els","collection","processors","findFirst","processor","rest","isCollectionProcessor","processedItem","processCollection","traverseChain","processElement","resultCollection","last","stack","i","query","scope","found","part","splitQueries","traverseQuery","term","rootSel","shift","baseCollection","initial","acc","traverse","options","visibility","getClientRects","opacity","parent","viewport","wndIntersection","intersect","wnd","scrollX","pageXOffset","scrollY","pageYOffset","innerWidth","clientWidth","innerHeight","clientHeight","getWindowRect","getBoundingClientRect","isInViewport","isVisible","decorators","d","c","arguments","r","Reflect","decorate","__decorate","LISTENERS","Symbol","ESLEventListener","handler","defaults","capture","passive","assign","$targets","all","delegate","selector","handleEvent","handlerBound","bind","handlerFull","once","unsubscribe","handleDelegation","currentTarget","$delegate","closest","subscribe","addEventListener","removeEventListener","remove","criteria","listeners","listener","instance","eventDesc","createOrResolve","eventString","events","terms","deduplicate","splitEvents","subscribed","prototype","DESCRIPTORS","getOwnDescriptorsKeys","isEventDescriptor","getAutoDescriptors","store","getDescriptorsKeysFor","auto","ESLEventUtils","mergedDesc","dispatch","eventName","eventInit","init","bubbles","composed","cancelable","dispatchEvent","CustomEvent","descriptors","initDescriptor","inherit","superDesc","ReferenceError","addDescriptorKey","lockStore","className","locker","elLocks","classLocks","lock","classList","size","unlock","CSSClassUtils","tokenString","cls","tokens","splitTokens","state","finalize","tagName","ESLBaseElement","super","_connected","baseTagName","connectedCallback","disconnectedCallback","attributeChangedCallback","oldValue","newValue","connected","$$on","$$off","condition","$$cls","toggle","$$attr","prevValue","$$fire","DOMException","customElements","define","registered","whenDefined","createElement","afterNextRender","callback","requestAnimationFrame","rafDecorator","lastArgs","attr","config","propName","attrName","dataAttr","buildAttrName","parser","serializer","listen","propertyKey","decorator","originalFn","getBound","decoratedFn","isRTL","direction","RTLScroll","scrollType","appendChild","createTextNode","dir","style","position","fontSize","createDummyScroll","scrollLeft","removeChild","testRTLScrollType","normalizeScrollLeft","isRtl","scrollWidth","RTLUtils","debounce","wait","thisArg","timeout","deferred","debouncedSubject","reject","resolve","promise","Promise","res","rej","createDeferred","clearTimeout","setTimeout","deepMerge","objects","SyntheticEventTarget","getEventListeners","values","hasEventListener","minCount","DEFAULT_EVENT","validateEventListenerType","cb","srcElement","defaultPrevented","addListener","removeListener","userAgent","vendor","platform","navigator","isTrident","isIE","isEdgeHTML","isBlinkEdge","isEdge","isGecko","isFirefox","isOpera","isChrome","isWebkit","isSafari","isBlink","isBot","isAndroid","isMobileIOS13","maxTouchPoints","isMobileIOS","isLegacyMobile","isMobile","isMobileSafari","isTouchDevice","navApi","msMaxTouchPoints","Touch","hasHover","matchMedia","TOUCH_EVENTS","START","MOVE","END","DeviceDetector","ESLScreenDPR_1","ESLScreenDPR","dpr","toFixed","match","VALUE_REGEXP","parseFloat","ignoreBotsDpr","toDPI","ESLScreenBreakpoints_1","registry","ESLScreenBreakpoints","minWidth","maxWidth","BP_NAME_REGEXP","ESLScreenBreakpoint","names","sign","bp","BP_REGEXP","shortcut","mediaQueryGE","mediaQueryLE","mediaQuery","toString","shortcuts","ESLEnvShortcuts","_shortcuts","MediaQueryConstCondition","_matches","optimize","eq","ALL","NOT_ALL","ESLMediaChangeEvent","Event","media","MediaQueryCondition","inverted","_inverted","_mq","_onChange","MediaQueryContainer","items","MediaQueryConjunction","optimizedItems","MediaQueryDisjunction","pretty","ESLMediaQuery_1","ESLMediaQuery","preprocessor","_preprocessors","unshift","conjunctions","conditions","parseSimpleQuery","SHORTCUT_PATTERN","replacer","process","queryInverted","processedQuery","preprocess","sanitizedQuery","invert","use","ESLMediaRule","payload","for","JSON","stringify","payloadValue","lex","create","ESLMediaRuleList_1","ESLMediaRuleListEvent","previous","ESLMediaRuleList","common","pop","parseTuple","parseQuery","rules","parse","rule","queries","valueList","validRules","_rules","_onMatchChanged","_value","computedValue","active","activeValue","activeValues","curValue","buildConditionalDescriptor","readOnly","STRING_PARSER","OBJECT_PARSER","boolAttr","ready","readyState","ENTER","ESC","SPACE","SYSTEM_KEYS","ESLToggleablePlaceholder","$placeholder","$origin","copyAttributesFromOrigin","allowedAttrs","ESLTrigger","updateTargetFromSelector","$target","_$target","newPopupInstance","_onTargetStateChange","$a11yTarget","a11yTarget","querySelector","a11yLabel","open","a11yLabelActive","a11yLabelInactive","allowHover","trackHover","allowClick","trackClick","initA11y","first","isTargetIgnored","ignore","$ignore","mergeToggleableParams","initiator","activator","showTarget","actionParams","delay","showDelay","show","hideTarget","hideDelay","hide","toggleTarget","updateState","isActive","wasActive","toggleAttribute","clsTarget","activeClassTarget","activeClass","updateA11y","originalEvent","detail","CHANGE_EVENT","_onClick","preventDefault","_onPrimaryEvent","_onKeydown","ignoreEsc","mode","_onMouseEnter","hoverShowDelay","_onMouseLeave","hoverHideDelay","id","observedAttributes","that","OBSERVED_EVENTS","ESLTab","ESLTabs_1","ESLTabs","_deferredUpdateArrows","updateArrows","_deferredFitToViewport","fitToViewport","scrollableTypeRules","scrollable","currentScrollableType","updateScrollableType","oldVal","newVal","_onScrollableTypeChange","bindScrollableEvents","_onScroll","_onResize","unbindScrollableEvents","$tabs","$current","find","$scrollableTarget","scrollableTarget","moveTo","behavior","offsetWidth","scrollBy","$trigger","updateMarkers","areaRect","itemRect","calcScrollOffset","isReversedRTL","ceil","swapSides","scrollStart","abs","scrollEnd","$rightArrow","$leftArrow","hasScroll","supportedScrollableTypes","_onTriggerStateChange","dataset","tabDirection","_onFocus","jsonAttr","error","buildJsonAttrDescriptor","ns","sequences","__esl_sequences__","DelayedTask","_fn","_timeout","run","put","task","prev","cancel","activators","ESLToggleable","_open","_task","_trackHover","noAutoId","prefix","uid","sequentialUID","initiallyOpened","setInitialState","GROUP_CHANGED_EVENT","oldGroupName","newGroupName","initialParams","bindOutsideEventTracking","track","_onOutsideAction","bindHoverStateTracking","_trackHoverDelay","mergeDefaultParams","defaultParams","copy","showTask","closeOnOutsideAction","hideTask","force","silent","BEFORE_SHOW_EVENT","onShow","SHOW_EVENT","BEFORE_HIDE_EVENT","onHide","HIDE_EVENT","bodyClass","containerActiveClass","$container","containerActiveClassTarget","REFRESH_EVENT","targetEl","isOutsideAction","KeyboardEvent","_onCloseClick","_onKeyboardEvent","closeOnEsc","baseParams","trackHoverParams","buildRequestParams","_onShowRequest","_onHideRequest","closeTrigger","SHOW_REQUEST_EVENT","HIDE_REQUEST_EVENT","ESLToggleableDispatcher","_popups","getElementsByTagName","register","insertAdjacentElement","isAcceptable","groupName","hideActive","getActive","dispatcher","setActive","popup","deleteActive","_onBeforeShow","_onShow","_onHide","_onChangeGroup","ESLPanel","_initialHeight","initialHeight","$group","panelGroupSel","scrollHeight","beforeAnimate","noAnimate","postAnimate","capturedBy","onAnimate","animateClass","postAnimateClass","AFTER_ANIMATE_EVENT","afterAnimate","to","setProperty","fallbackAnimate","distance","maxHeight","animating","clearAnimation","AFTER_SHOW_EVENT","AFTER_HIDE_EVENT","removeProperty","_onTransitionEnd","propertyName","stackConfig","panelConfig","ESLPanelGroup_1","parseCount","Number","POSITIVE_INFINITY","parseInt","ESLPanelGroup","_previousHeight","then","refresh","_onConfigChange","prevMode","currentMode","updateModeCls","reset","MODE_CHANGE_EVENT","modeCls","modeClsTarget","supportedModes","format","modeRules","minValueRules","minOpenItems","maxValueRules","maxOpenItems","refreshRules","refreshStrategy","currentMinItems","$panels","currentMaxItems","panelSel","includesPanel","$activePanels","$initialPanels","$resetStatePanels","shouldAnimate","mergeActionParams","showAll","excluded","hideAll","$orderedPanels","activeCount","transformParams","panel","animationClass","_b","_c","balanceMarker","_onBeforeHide","$firstInactive","$panel","group","iObserver","ESLScrollbar","_deferredDrag","_onPointerDrag","_deferredRefresh","_scrollTimer","_resizeObserver","ResizeObserver","_mutationObserver","MutationObserver","rec","updateContentObserve","render","findTarget","unbindTargetEvents","content","bindTargetEvents","innerHTML","$scrollbarTrack","trackClass","$scrollbarThumb","thumbClass","_onScrollOrResize","observe","childList","recs","contentChanges","addedNodes","removedNodes","unobserve","disconnect","scrollableSize","horizontal","trackOffset","offsetHeight","thumbOffset","thumbSize","areaSize","scrollSize","scrollOffset","scrollTop","scrollTargetTo","normalizePosition","update","relativePosition","pos","scrollTo","dragging","thumbPosition","toPosition","point","offset","props","getOffsetPoint","_onPointerDown","_initialPosition","_pointerPosition","_initialMousePosition","_onThumbPointerDown","_onPointerDownTick","_onPointerUp","allowedOffset","noContinuousScroll","_onBodyClick","_onPointerMove","positionChange","scrollableAreaHeight","absChange","stopPropagation","stopImmediatePropagation","_onRefresh","getIObserver","IntersectionObserver","entries","handleViewport","threshold","rootMargin","entry","image","isIntersecting","intersectionRatio","triggerLoad","sanitizeElAttributes","attributes","isDangerousAttribute","removeDangerousAttributes","EMPTY_IMAGE","isEmptyImage","src","STRATEGIES","img","shadowImg","isEmpty","backgroundImage","paddingTop","innerImg","attachInnerImage","removeInnerImage","devicePixelRatio","request","XMLHttpRequest","onreadystatechange","status","html","allowedTopLevelTags","DOMParser","parseFromString","scripts","script","removeScripts","childNodes","filterElements","sanitize","responseText","send","ESLImage_1","ESLImage","alt","srcRules","lazyObservable","_detachLazyTrigger","clearImage","_srcRules","_onMediaMatchChange","changeMode","lazyTriggered","currentSrc","_currentSrc","empty","canUpdate","lazy","originalWidth","_shadowImageElement","originalHeight","loaded","syncImage","getPath","_shadowImg","refreshOnUpdate","complete","_shadowImgError","_onError","_onLoad","role","innerImage","srcBase","updateContainerClasses","strategy","_strategy","_innerImg","innerImageClass","cloneNode","Image","onload","onerror","naturalHeight","_onReadyState","successful","LOAD_EVENT","ERROR_EVENT","READY_EVENT","containerClass","DEFAULT_CONTAINER_CLS","isLoadState","containerClassState","containerClassTarget","EAKSidebar","submenus","activeMenuAttr","$submenus","isDesktop","immediate","collapseAll","menu","expandActive","noCollapse","_animation","onBreakpointChange","EAKBanner","_animateTimer","_$active","startAnimation","stopAnimation","$lines","TARGETS","$randomLine","random","_onIteration","$candidates","n","filler","range","targetsNumber","iterationTime","line","strokeDashoffset","lineLength","getTotalLength","strokeDasharray","EAKZoomImage","$image","originalImage","$closeButton","button","zoom","inDrag","inZoom","transform","scale","marginTop","marginLeft","onPointerDown","unzoom","startPoint","startPosition","onPointerMove","onPointerUp","setPointerCapture","pointerId","releasePointerCapture","offsetX","offsetY","maxOffsetX","maxOffsetY","normalizedX","normalizedY","onClick","onOutsideClick"],"sourceRoot":""}