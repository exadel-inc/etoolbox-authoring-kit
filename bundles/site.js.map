{"version":3,"file":"site.js","mappings":"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","sources":["webpack://eak-website/webpack/bootstrap","webpack://eak-website/webpack/runtime/global","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/environment/export-ns.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/attr.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/prop.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/uid.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/functions.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/memoize.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/types.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/utils.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/memoize.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/compare.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/array.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/path.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/format.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/traversing.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-traversing-query/core/esl-traversing-query.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/events/misc.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/events/listener.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/events/utils.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/class.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-base-element/core/esl-base-element.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/attr.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/async/raf.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/bind.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/rtl.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/async/promise.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/async/debounce.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/merge.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/events/target.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/environment/device-detector.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-dpr.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-breakpoint.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/common/env-shortcuts.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-const.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-base.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-condition.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-containers.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-query.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule-list.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/bool-attr.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/ready.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/ready.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/keys.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable-placeholder.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-trigger/core/esl-trigger.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-tab/core/esl-tab.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-tab/core/esl-tabs.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/async/delayed-task.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/json-attr.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/misc/object/copy.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable-dispatcher.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-panel/core/esl-panel.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-panel-group/core/esl-panel-group.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-scrollbar/core/esl-scrollbar.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-image/core/esl-image-iobserver.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/dom/sanitize.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-image/core/esl-image-strategies.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-image/core/esl-image.js","webpack://eak-website/./node_modules/@exadel/esl/modules/esl-utils/decorators/listen.js","webpack://eak-website/./src/navigation/sidebar/sidebar.ts","webpack://eak-website/./src/landing/banner/banner.ts","webpack://eak-website/./src/eak-zoom-image/eak-zoom-image.ts","webpack://eak-website/./src/site.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","const NS_NAME = 'ESL';\n/**\n * Nested declaration helper\n */\nfunction define(root, name, value) {\n    name.split('.').reduce((obj, key, index, parts) => {\n        if (parts.length === index + 1) {\n            return (obj[key] = obj[key] || value);\n        }\n        const type = typeof obj[key];\n        if (type !== 'undefined' && type !== 'object' && type !== 'function') {\n            throw new Error(`Can not define ${value} on ${name}`);\n        }\n        return (obj[key] = obj[key] || {});\n    }, root);\n}\n/**\n * Method to manually declare key in library namespace\n * See {@link ExportNs} decorator for details\n */\nexport const exportNs = (name, module) => {\n    if (!(NS_NAME in window))\n        return;\n    define(window[NS_NAME], name, module);\n};\n/**\n * Decorator to declare function or class in a global ns\n * @param name - key path to declare in ESL global ns\n * NOTE: path parts should be separated by dots\n * @example\n * ```ts\n * @Export('Package.Component')\n * ```\n * NOTE: in case declaration contains components-packages, their origins will be mixed with declaration in a Runtime\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function ExportNs(name) {\n    return (module) => exportNs(name || module.name, module);\n}\n/** Declare ESL global */\nExportNs.declare = () => {\n    if ('ESL' in window)\n        return;\n    Object.defineProperty(window, 'ESL', { value: {} });\n};\n","export function getAttr($el, name, fallback = null) {\n    if ('$host' in $el)\n        $el = $el.$host;\n    const value = $el.getAttribute(name);\n    return value === null ? fallback : value;\n}\n/** Set attribute */\nexport function setAttr($el, name, value) {\n    if ('$host' in $el)\n        $el = $el.$host;\n    if (value === undefined || value === null || value === false) {\n        $el.removeAttribute(name);\n    }\n    else {\n        $el.setAttribute(name, value === true ? '' : value);\n    }\n}\n","/**\n * `@prop` is auxiliary decorator to define a field on the prototype level.\n *` @prop` can be used to override decorated property from the parent level\n *\n * You can also use an @override decorator in combination with ECMA Script class property definition:\n * `@prop() public field: any = initial value;`\n *\n * The class property initial value is a part of object creation, so it goes to the object itself,\n * while the @override value is defined on the prototype level.\n *\n * @param value - value to setup in prototype\n * @param prototypeConfig - prototype property configuration\n */\nexport function prop(value, prototypeConfig = {}) {\n    return function (obj, name) {\n        if (Object.hasOwnProperty.call(obj, name)) {\n            throw new TypeError('Can\\'t override own property');\n        }\n        Object.defineProperty(obj, name, {\n            value,\n            writable: !prototypeConfig.readonly,\n            enumerable: !prototypeConfig.enumerable,\n            configurable: true\n        });\n    };\n}\n","const ns = window || global;\nconst sequences = ns.__esl_sequences__ || new Map();\nns.__esl_sequences__ = sequences;\n/** Create and return sequential id */\nexport const sequentialUID = (name, prefix = name) => {\n    const uid = (sequences.get(name) || 0) + 1;\n    sequences.set(name, uid);\n    return prefix + uid;\n};\n/** Return random unique identifier */\nexport const randUID = (prefix = '') => {\n    const time = Date.now().toString(32);\n    const rand = Math.round(Math.random() * 1024 * 1024).toString(32);\n    return prefix + time + '-' + rand;\n};\n/**\n * Generate unique id\n * @deprecated Alias for {@link randUID}\n */\nexport const generateUId = randUID;\n","/** Function that does nothing */\nexport const noop = () => undefined;\n/** Function that returns the first argument */\nexport const identity = (arg) => arg;\n/** Resolves {@link PropertyProvider} function to the value */\nexport const resolveProperty = (val, origin) => typeof val === 'function' ? val.call(origin, origin) : val;\n","/**\n * Memoization decorator function. Caches the original function result according to hash generated from arguments.\n * In case the hash function returns `undefined` value will not be memoized.\n * @see MemoHashFn Hash function signature.\n */\nexport function memoizeFn(fn, hashFn = defaultArgsHashFn) {\n    function memo(...args) {\n        const key = hashFn(...args);\n        if (key !== null && typeof key !== 'string') {\n            console.warn(`Can't cache value for ${fn.name} call.`);\n            return fn.apply(this, args);\n        }\n        if (!memo.cache.has(key)) {\n            memo.cache.set(key, fn.apply(this, args));\n        }\n        return memo.cache.get(key);\n    }\n    memo.cache = new Map();\n    memo.clear = () => memo.cache.clear();\n    memo.has = (...args) => {\n        const key = hashFn(...args);\n        return key === undefined ? false : memo.cache.has(key);\n    };\n    return memo;\n}\n/**\n * Default arguments hash function.\n * Supports only 0-1 arguments with a primitive type.\n */\nexport function defaultArgsHashFn(...args) {\n    if (args.length === 0)\n        return null;\n    if (args.length > 1)\n        return;\n    if (typeof args[0] !== 'string' && typeof args[0] !== 'number' && typeof args[0] !== 'boolean')\n        return;\n    return String(args[0]);\n}\n","/** Checks that passed value is object, but not a callable-object (function) */\nexport const isObject = (obj) => !!obj && typeof obj === 'object';\n/** Checks that passed value is an object or function */\nexport const isObjectLike = (obj) => isObject(obj) || typeof obj === 'function';\n/** Checks if the passed value is primitive */\nexport const isPrimitive = (obj) => obj === null ||\n    typeof obj === 'undefined' ||\n    typeof obj === 'string' ||\n    typeof obj === 'number' ||\n    typeof obj === 'boolean' ||\n    typeof obj === 'symbol';\n/** Checks that passed object is prototype of some class */\nexport const isPrototype = (obj) => Object.hasOwnProperty.call(obj, 'constructor');\n/** Checks that passed object is array-like */\nexport const isArrayLike = (value) => {\n    if (!value || typeof value !== 'object')\n        return false;\n    if (Array.isArray(value))\n        return true;\n    if (typeof value.length !== 'number' || value.length < 0)\n        return false;\n    return !value.length || Object.hasOwnProperty.call(value, value.length - 1);\n};\n","/** @returns first defined param */\nexport function defined(...params) {\n    for (const param of params) {\n        if (param !== undefined)\n            return param;\n    }\n}\n/** Finds the closest property descriptor */\nexport function getPropertyDescriptor(o, prop) {\n    let proto = o;\n    while (proto) {\n        const desc = Object.getOwnPropertyDescriptor(proto, prop);\n        if (desc)\n            return desc;\n        proto = Object.getPrototypeOf(proto);\n    }\n}\n","import { defaultArgsHashFn, memoizeFn } from '../misc/memoize';\nimport { isPrototype, getPropertyDescriptor } from '../misc/object';\n/**\n * Memoization decorator helper.\n * @see memoizeFn Original memoizeFn function decorator.\n */\nexport function memoize(hashFn = defaultArgsHashFn) {\n    return function (target, prop, descriptor) {\n        if (!descriptor || typeof (descriptor.value || descriptor.get) !== 'function') {\n            throw new TypeError('Only get accessors or class methods can be decorated via @memoize');\n        }\n        if (isPrototype(target)) {\n            // Object members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeGetter(descriptor.get, prop));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeMethod(descriptor.value, prop, hashFn));\n        }\n        else {\n            // Static members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeFn(descriptor.get));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeFn(descriptor.value, hashFn));\n        }\n    };\n}\n// Lock storage to prevent cache logic for some key\nconst locks = new WeakMap();\nconst defineOwnKeySafe = (obj, prop, value) => {\n    locks.set(obj, prop); // IE try to get key with the prototype instance call, so we lock it\n    Object.defineProperty(obj, prop, { value, writable: true, configurable: true });\n    locks.delete(obj); // Free property key\n};\n/** Cache getter result as an object own property */\nfunction memoizeGetter(originalMethod, prop) {\n    return function () {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const value = originalMethod.call(this);\n        defineOwnKeySafe(this, prop, value);\n        return value;\n    };\n}\n/** Cache method memo function in the current context on call */\nfunction memoizeMethod(originalMethod, prop, hashFn) {\n    return function (...args) {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const memo = memoizeFn(originalMethod, hashFn);\n        defineOwnKeySafe(this, prop, memo);\n        return memo.apply(this, args);\n    };\n}\n/**\n * Clear memoization cache for passed target and property.\n * Accepts not own properties.\n * Note: be sure that you targeting memoized property or function.\n * Clear utility has no 100% check to prevent modifying incorrect (not memoized) property keys\n */\nmemoize.clear = function (target, property) {\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return;\n    if (typeof desc.get === 'function' && typeof desc.get.clear === 'function')\n        return desc.get.clear();\n    if (typeof desc.value === 'function' && typeof desc.value.clear === 'function')\n        return desc.value.clear();\n    if (Object.hasOwnProperty.call(target, property))\n        delete target[property];\n};\n/** Check if property has cache for the passed params */\nmemoize.has = function (target, property, ...params) {\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return false;\n    if (typeof desc.get === 'function' && typeof desc.get.has === 'function')\n        return desc.get.has(...params);\n    if (typeof desc.value === 'function' && typeof desc.value.has === 'function')\n        return desc.value.has(...params);\n    return Object.hasOwnProperty.call(target, property);\n};\n","import { isObject } from './types';\n/** Deeply compares passed objects */\nexport function isEqual(obj1, obj2) {\n    if (Object.is(obj1, obj2))\n        return true;\n    if (typeof obj1 !== typeof obj2)\n        return false;\n    if (isObject(obj1) && isObject(obj2)) {\n        const keys1 = Object.keys(obj1);\n        const keys2 = Object.keys(obj2);\n        if (keys1.length !== keys2.length)\n            return false;\n        return !keys1.some((key) => !isEqual(obj1[key], obj2[key]));\n    }\n    return false;\n}\n/** @deprecated alias for `isEqual` method */\nexport const deepCompare = isEqual;\n/** Check if arr and arr mask has intersection */\nfunction isIntersect(arrObj, arrMask, comparer) {\n    return arrMask.every((key) => arrObj.some((itm) => comparer(itm, key)));\n}\n/**\n * Checks if all keys presented in the `mask` are equal to the `obj` keys\n * Note: array order is not taken into account and uses intersection strategy\n */\nexport function isSimilar(obj, mask, deep = true) {\n    if (Array.isArray(obj) && Array.isArray(mask))\n        return isIntersect(obj, mask, deep ? isSimilar : Object.is);\n    if (!isObject(obj) || !isObject(mask))\n        return Object.is(obj, mask);\n    return Object.keys(mask).every((key) => (deep ? isSimilar : Object.is)(obj[key], mask[key]));\n}\n","import { identity } from './functions';\nimport { isArrayLike } from './object';\n/** Split array into tuples */\nexport const tuple = (arr) => arr.reduce((acc, el) => {\n    if (acc.length === 0 || acc[acc.length - 1].length >= 2)\n        acc.push([]);\n    acc[acc.length - 1].push(el);\n    return acc;\n}, []);\n/** Flat array - unwraps one level of nested arrays */\nexport const flat = (arr) => arr.reduce((acc, el) => el ? acc.concat(el) : acc, []);\n/** Wraps passed object or primitive to array */\nexport const wrap = (arr) => {\n    if (arr === undefined || arr === null)\n        return [];\n    if (Array.isArray(arr))\n        return arr;\n    return [arr];\n};\nexport function unwrap(value) {\n    return isArrayLike(value) ? value[0] : value;\n}\n/** Makes array values unique */\nexport const uniq = (arr) => {\n    const result = [];\n    const set = new Set();\n    arr.forEach((item) => set.add(item));\n    set.forEach((item) => result.push(item));\n    return result;\n};\nexport function range(n, filler = identity) {\n    const arr = Array(n);\n    let i = 0;\n    while (i < n)\n        arr[i] = filler(i++);\n    return arr;\n}\n/**\n * @returns object with a criteria value as a key and an array of original items that belongs to the current criteria value\n */\nexport const groupBy = (array, group) => {\n    return array.reduce((obj, el) => {\n        const key = group(el);\n        obj[key] ? obj[key].push(el) : obj[key] = [el];\n        return obj;\n    }, {});\n};\n","import { isObjectLike } from './types';\n/** @returns PathKeyDef from the PathDef */\nconst toKeyDef = (key) => typeof key === 'object' ? key : { key };\n/** Parses path to full {@link PathKeyDef} array */\nexport const parseKeys = (path) => {\n    if (Array.isArray(path))\n        return path.map(toKeyDef);\n    return parseKeysPath(path || '.');\n};\n/** Parses string path to full {@link PathKeyDef} array */\nconst parseKeysPath = (path) => {\n    let start = 0;\n    const parts = [];\n    while (start < path.length) {\n        let end = start = start + +(path[start] === '.'); // skip initial '.'\n        if (path[start] === '[') { // handle index syntax\n            end = ++start; // start bracket ignored\n            while (end < path.length && path[end] !== ']')\n                ++end;\n            const key = path.substring(start, end);\n            const isIndex = !key || Math.floor(+key) === +key;\n            parts.push({ key, isIndex });\n            start = ++end; // skip end bracket\n        }\n        else { // handle simple key\n            while (end < path.length && path[end] !== '[' && path[end] !== '.')\n                ++end;\n            const key = path.substring(start, end);\n            parts.push({ key });\n            start = end;\n        }\n    }\n    return parts;\n};\n/**\n * Gets object property using \"path\" key\n *\n * Supports three types of key definition\n * - full array of {@link PathKeyDef}\n * - array of keys (string or number), can be mixed with a full definitions {@link PathKeyDef}\n * - string path mode (supports index syntax):\n *   - `a.b` - simple key access (`{a : {b: val}}`)\n *   - `a[0]` - index access, creates collection if it's not exists  (`{a : [val]}`)\n *   - `a[]` - pushes to the end of collection (`{a : [..., val]}`)\n *   - `a[a.b.c]` - escaping: non-numeric indexes uses as a simple keys, delimiters inside square brackets are ignored (`{a : {'a.b.c': val}}`)\n *\n * @param data - object\n * @param path - key path. string or {@link PathKey} array\n * @param defaultValue - default\n * @returns specified object property\n */\nexport const getByPath = (data, path, defaultValue) => {\n    const keys = parseKeys(path);\n    const result = keys.reduce((curr, { key }) => {\n        if (isObjectLike(curr))\n            return curr[key];\n        return undefined;\n    }, data);\n    return typeof result === 'undefined' ? defaultValue : result;\n};\n/**\n * Gets object property using \"path\" with a keys separated by `.`\n * @see getByPath\n */\nexport const get = (data, path, defaultValue) => getByPath(data, (path || '').split('.'), defaultValue);\n/**\n * Sets object property using \"path\" key\n * Creates empty object if sub-key value is not presented.\n *\n * Supports three types of key definition\n * - full array of {@link PathKeyDef}\n * - array of keys (string or number), can be mixed with a full definitions {@link PathKeyDef}\n * - string path mode (supports index syntax and collection creation):\n *   - `a.b` - simple key access (`{a : {b: val}}`)\n *   - `a[0]` - index access, creates collection if it's not exists  (`{a : [val]}`)\n *   - `a[]` - pushes to the end of collection (`{a : [..., val]}`)\n *   - `a[a.b.c]` - escaping: non-numeric indexes uses as a simple keys, delimiters inside square brackets are ignored (`{a : {'a.b.c': val}}`)\n *\n * @param target - object\n * @param path - key path. string or {@link PathKey} array\n * @param value - value of property\n * @returns original object\n */\nexport const setByPath = (target, path, value) => {\n    const keys = parseKeys(path);\n    const depth = keys.length - 1;\n    keys.reduce((cur, { key, isIndex, isIndexed }, pos) => {\n        if (isIndex && !key)\n            key = cur.length || 0; // a[] only\n        if (pos !== depth && isObjectLike(cur[key]))\n            return cur[key]; // key already presented\n        if (isIndexed === undefined && pos !== depth)\n            isIndexed = keys[pos + 1].isIndex;\n        return cur[key] = (pos === depth) ? value : (isIndexed ? [] : {});\n    }, target);\n    return target;\n};\n/**\n * Sets object property using \"path\" with a keys separated by `.`\n * @see setByPath\n */\nexport const set = (target, path, value) => setByPath(target, (path || '').split('.'), value);\n","import { get } from './object';\n/** Converts string to kebab-case notation */\nexport const toKebabCase = (str) => {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').replace(/[\\s_]+/g, '-').toLowerCase();\n};\n/** Converts string to camelCase notation */\nexport const toCamelCase = (str) => {\n    return str.trim().replace(/[\\s-,_]+([a-zA-Z0-9]?)/g, (match, word) => word.toUpperCase());\n};\n/** Makes the first non-indent (space, tab, newline) letter in the string capitalized */\nexport const capitalize = (str) => {\n    let i = 0;\n    while (i < str.length && (str[i] === ' ' || str[i] === '\\t' || str[i] === '\\n'))\n        i++;\n    return str.slice(0, i) + str.charAt(i).toUpperCase() + str.slice(i + 1);\n};\n/** Unwraps string from parenthesis */\nexport const unwrapParenthesis = (str) => {\n    return str.trim().replace(/^\\((.*)\\)$/, '$1').trim();\n};\n/**\n * Parses number with the ability to pass an alternative fallback for NaN.\n * Note: falsy values except 0 are treated as NaN\n */\nexport const parseNumber = (str, nanValue) => {\n    if (str === 0)\n        return 0;\n    const value = +(str || NaN);\n    return isNaN(value) ? nanValue : value;\n};\n/**\n * Common function that returns coefficient aspect ratio\n * Supported formats: w:h, w/h, coefficient\n * @example\n * `16:9`, `16/9`, `1.77`\n * @param str - string to parse\n * @returns aspect ratio coefficient\n */\nexport function parseAspectRatio(str) {\n    const [w, h] = str.split(/[:/]/);\n    if (typeof h !== 'undefined')\n        return +w / +h;\n    return +w || 0;\n}\n/** Evaluates passed string or returns `defaultValue` */\nexport function evaluate(str, defaultValue) {\n    try {\n        // eslint-disable-next-line @typescript-eslint/no-implied-eval\n        return str ? (new Function(`return ${str}`))() : defaultValue;\n    }\n    catch (e) {\n        console.warn('Cannot parse value ', str, e);\n        return defaultValue;\n    }\n}\n/** Default RegExp to match replacements in the string for the {@link format} function */\nexport const DEF_FORMAT_MATCHER = /{[{%]?([\\w.]+)[%}]?}/g;\n/** Replaces `{key}` patterns in the string from the source object */\nexport function format(str, source, matcher = DEF_FORMAT_MATCHER) {\n    return str.replace(matcher, (match, key) => {\n        const val = get(source, key);\n        return val === undefined ? match : val;\n    });\n}\n","/** Check that `nodeA` and `nodeB` are from the same tree path */\nexport const isRelativeNode = (nodeA, nodeB) => {\n    return !!(nodeA && nodeB) && (nodeA.contains(nodeB) || nodeB.contains(nodeA));\n};\n/** Create function that finds next dom element, that matches selector, in the sequence declared by `next` function */\nexport const createSequenceFinder = (next) => {\n    return function (base, sel) {\n        for (let target = next(base); target; target = next(target)) {\n            if (!sel || target.matches(sel))\n                return target;\n        }\n        return null;\n    };\n};\n/** Checks if element matches passed selector or exact predicate function */\nexport const isMatches = (el, matcher) => {\n    if (typeof matcher === 'string')\n        return el.matches(matcher);\n    if (typeof matcher === 'function')\n        return matcher(el);\n    return false;\n};\n/** @returns first matching next sibling or null*/\nexport const findNext = createSequenceFinder((el) => el.nextElementSibling);\n/** @returns first matching previous sibling or null*/\nexport const findPrev = createSequenceFinder((el) => el.previousElementSibling);\n/** @returns first matching parent or null*/\nexport const findParent = createSequenceFinder((el) => el.parentElement);\n/** @returns Array of all matching elements in subtree or empty array */\nexport const findAll = (base, sel) => {\n    return sel ? Array.from(base.querySelectorAll(sel)) : [base];\n};\n/** @returns Array of all matching children or empty array */\nexport const findChildren = (base, sel) => {\n    return Array.from(base.children).filter((el) => !sel || el.matches(sel));\n};\n/**\n * Find closest parent node of `node` by `predicate`.\n * Optional `skipSelf` to skip initial node\n */\nexport const findClosestBy = (node, predicate, skipSelf = false) => {\n    let current = skipSelf && node ? node.parentNode : node;\n    while (current) {\n        if (predicate(current))\n            return current;\n        current = current.parentNode;\n    }\n    return null;\n};\n/** @deprecated Cumulative traversing utility set */\nexport class TraversingUtils {\n}\nTraversingUtils.isRelative = isRelativeNode;\nTraversingUtils.closestBy = findClosestBy;\nTraversingUtils.createSequenceFinder = createSequenceFinder;\nTraversingUtils.findNext = findNext;\nTraversingUtils.findPrev = findPrev;\nTraversingUtils.findParent = findParent;\nTraversingUtils.findAll = findAll;\nTraversingUtils.findChildren = findChildren;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TraversingQuery_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { tuple, wrap, uniq } from '../../esl-utils/misc/array';\nimport { unwrapParenthesis } from '../../esl-utils/misc/format';\nimport { findAll, findChildren, findNext, findParent, findPrev } from '../../esl-utils/dom/traversing';\n/**\n * Traversing Query utility to find element via extended selector query\n * Extended query supports\n * - plain CSS selectors\n * - relative selectors (selectors that don't start from a plain selector will use passed base Element as a root)\n * - ::next and ::prev sibling pseudo-selectors\n * - ::parent and ::child pseudo-selectors\n * - ::find pseudo-selector\n * - ::first, ::last and :nth(#) limitation pseudo-selectors\n * - ::filter, ::not filtration pseudo-selectors\n *\n * @example\n * - `#id .class [attr]` - find by CSS selector in a current document\n * - ` ` - get current base element\n * - `::next` - get next sibling element\n * - `::prev` - get previous sibling element\n * - `::parent` - get base element parent\n * - `::parent(#id .class [attr])` - find the closest parent matching passed selector\n * - `::child(#id .class [attr])` - find direct child element(s) that match passed selector\n * - `::find(#id .class [attr])` - find child element(s) that match passed selector\n * - `::find(buttons, a)::not([hidden])` - find all buttons and anchors that are not have hidden attribute\n * - `::find(buttons, a)::filter(:first-child)` - find all buttons and anchors that are first child in container\n * - `::parent::child(some-tag)` - find direct child element(s) that match tag 'some-tag' in the parent\n * - `#id .class [attr]::parent` - find parent of element matching selector '#id .class [attr]' in document\n * - `::find(.row)::last::parent` - find parent of the last element matching selector '.row' from the base element subtree\n */\nlet TraversingQuery = TraversingQuery_1 = class TraversingQuery {\n    /**\n     * @returns RegExp that selects all known processors in query string\n     * e.g. /(::parent|::child|::next|::prev)/\n     */\n    static get PROCESSORS_REGEX() {\n        const keys = Object.keys(this.ELEMENT_PROCESSORS).concat(Object.keys(this.COLLECTION_PROCESSORS));\n        return new RegExp(`(${keys.join('|')})`, 'g');\n    }\n    static isCollectionProcessor([name]) {\n        return !!name && (name in this.COLLECTION_PROCESSORS);\n    }\n    static processElement(el, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.ELEMENT_PROCESSORS))\n            return [];\n        return wrap(this.ELEMENT_PROCESSORS[name](el, sel));\n    }\n    static processCollection(els, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.COLLECTION_PROCESSORS))\n            return [];\n        return wrap(this.COLLECTION_PROCESSORS[name](els, sel));\n    }\n    static traverseChain(collection, processors, findFirst) {\n        if (!processors.length || !collection.length)\n            return collection;\n        const [processor, ...rest] = processors;\n        if (this.isCollectionProcessor(processor)) {\n            const processedItem = this.processCollection(collection, processor);\n            return this.traverseChain(processedItem, rest, findFirst);\n        }\n        const result = [];\n        for (const target of collection) {\n            const processedItem = this.processElement(target, processor);\n            const resultCollection = this.traverseChain(processedItem, rest, findFirst);\n            if (!resultCollection.length)\n                continue;\n            if (findFirst)\n                return resultCollection.slice(0, 1);\n            result.push(...resultCollection);\n        }\n        return uniq(result);\n    }\n    static traverse(query, findFirst, base, scope = document) {\n        const parts = query.split(this.PROCESSORS_REGEX).map((term) => term.trim());\n        const rootSel = parts.shift();\n        const baseCollection = base ? [base] : [];\n        const initial = rootSel ? Array.from(scope.querySelectorAll(rootSel)) : baseCollection;\n        return this.traverseChain(initial, tuple(parts), findFirst);\n    }\n    /** @returns first matching element reached via {@link TraversingQuery} rules */\n    static first(query, base, scope) {\n        return TraversingQuery_1.traverse(query, true, base, scope)[0] || null;\n    }\n    /** @returns Array of all matching elements reached via {@link TraversingQuery} rules */\n    static all(query, base, scope) {\n        return TraversingQuery_1.traverse(query, false, base, scope);\n    }\n};\nTraversingQuery.ELEMENT_PROCESSORS = {\n    '::find': findAll,\n    '::next': findNext,\n    '::prev': findPrev,\n    '::child': findChildren,\n    '::parent': findParent\n};\nTraversingQuery.COLLECTION_PROCESSORS = {\n    '::first': (list) => list.slice(0, 1),\n    '::last': (list) => list.slice(-1),\n    '::nth': (list, sel) => {\n        const index = sel ? +sel : NaN;\n        return wrap(list[index - 1]);\n    },\n    '::not': (list, sel) => list.filter((el) => !el.matches(sel || '')),\n    '::filter': (list, sel) => list.filter((el) => el.matches(sel || ''))\n};\nTraversingQuery = TraversingQuery_1 = __decorate([\n    ExportNs('TraversingQuery')\n], TraversingQuery);\nexport { TraversingQuery };\n","/** Checks if the passed event is {@link MouseEvent} */\nexport const isMouseEvent = (event) => window.MouseEvent && event instanceof MouseEvent;\n/** Checks if the passed event is {@link TouchEvent} */\nexport const isTouchEvent = (event) => window.TouchEvent && event instanceof TouchEvent;\n/** Checks if the passed event is {@link PointerEvent} */\nexport const isPointerEvent = (event) => window.PointerEvent && event instanceof PointerEvent;\nconst PASSIVE_EVENTS = ['wheel', 'mousewheel', 'touchstart', 'touchmove'];\n/**\n * @returns true if the passed event should be passive by default\n * @see https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n */\nexport const isPassiveByDefault = (event) => PASSIVE_EVENTS.includes(event);\n/** Gets the original CustomEvent source in case event bubbles from Shadow DOM */\nexport const getCompositeTarget = (e) => {\n    const targets = (e.composedPath && e.composedPath());\n    return targets ? targets[0] : e.target;\n};\n/** @returns touch point coordinates of {@link TouchEvent} or {@link PointerEvent} */\nexport const getTouchPoint = (event) => {\n    const source = isTouchEvent(event) ? event.changedTouches[0] : event;\n    return {\n        x: source.pageX,\n        y: source.pageY\n    };\n};\n/** @returns element offset point coordinates */\nexport const getOffsetPoint = (el) => {\n    const props = el.getBoundingClientRect();\n    const y = props.top + window.scrollY;\n    const x = props.left + window.scrollX;\n    return { x, y };\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { sequentialUID } from '../../misc/uid';\nimport { resolveProperty } from '../../misc/functions';\nimport { memoize } from '../../decorators/memoize';\nimport { isSimilar } from '../../misc/object/compare';\nimport { TraversingQuery } from '../../../esl-traversing-query/core';\nimport { isPassiveByDefault } from './misc';\nconst STORE = '__listeners';\n/**\n * `EventListener` instance, used as an 'inner' record to process subscriptions made by `EventUtils`\n * Uses `EventListenerObject` interface to subscribe on event.\n *\n * Use Chrome console `getEventListeners` method to check subscribers details when debugging ESLEventListener subscriptions.\n * */\nexport class ESLEventListener {\n    constructor($host, handler, desc) {\n        this.$host = $host;\n        this.handler = handler;\n        desc = Object.assign({}, desc);\n        desc.id = desc.id || sequentialUID('esl.event');\n        desc.target = resolveProperty(desc.target, desc.context || $host);\n        desc.selector = resolveProperty(desc.selector, desc.context || $host);\n        Object.assign(this, {\n            capture: false,\n            passive: isPassiveByDefault(this.event)\n        }, desc);\n    }\n    /** @returns target element to listen */\n    get $targets() {\n        if (typeof this.target === 'string')\n            return TraversingQuery.all(this.target, this.$host);\n        if (typeof this.target === 'undefined')\n            return [this.$host];\n        if (typeof this.target === 'object' && this.target)\n            return [this.target];\n        return [];\n    }\n    /**\n     * Checks if the passed criteria matches current event listener\n     * - `string` type criteria checked by the `event` name\n     * - `function` type criteria checked by the `handler` reference\n     * - `object` type criteria checked as descriptor using `isSimilar` comparer\n     * Note: `function` (handler) marcher has a priority over descriptor check, so handler function own properties will be ignored\n     */\n    matches(desc) {\n        if (typeof desc === 'string')\n            return this.event === desc;\n        if (typeof desc === 'function')\n            return this.handler === desc;\n        if (typeof desc === 'object')\n            return isSimilar(this, desc, false);\n        return false;\n    }\n    /** Handles caught event (used as callback for low-level subscriptions) */\n    handleEvent(e) {\n        var _a;\n        if (!this.isDelegatedTarget(e))\n            return;\n        this.handler.call((_a = this.context) !== null && _a !== void 0 ? _a : this.$host, e, this);\n        if (this.once)\n            this.unsubscribe();\n    }\n    /** Checks if the passed event can be handled by the curren event listener */\n    isDelegatedTarget(e) {\n        if (typeof this.selector !== 'string')\n            return true;\n        const target = e.target;\n        const current = e.currentTarget;\n        if (!(target instanceof HTMLElement) || !(current instanceof HTMLElement))\n            return false;\n        return current.contains(target.closest(this.selector));\n    }\n    /** (Re-)Subscribes event listener instance */\n    subscribe() {\n        const { passive, capture } = this;\n        this.unsubscribe();\n        memoize.clear(this, '$targets');\n        this.$targets.forEach((el) => el.addEventListener(this.event, this, { passive, capture }));\n        ESLEventListener.get(this.$host).push(this);\n    }\n    /** Unsubscribes event listener instance */\n    unsubscribe() {\n        const { capture } = this;\n        this.$targets.forEach((el) => el.removeEventListener(this.event, this, { capture }));\n        const listeners = ESLEventListener.get(this.$host);\n        const value = listeners.filter((listener) => listener !== this);\n        Object.defineProperty(this.$host, STORE, { value, configurable: true });\n    }\n    /** Gets stored listeners array the passed `host` object */\n    static get(host) {\n        if (!host)\n            return [];\n        if (!Object.hasOwnProperty.call(host, STORE))\n            host[STORE] = [];\n        return host[STORE];\n    }\n    /** Creates event listeners by handler and descriptors */\n    static create(target, handler, desc) {\n        const events = resolveProperty(desc.event, desc.context || target);\n        return ESLEventListener.splitEventQ(events).map((event) => {\n            const spec = Object.assign({}, desc, { event });\n            return new ESLEventListener(target, handler, spec);\n        });\n    }\n    /** Splits and deduplicate event query */\n    static splitEventQ(query) {\n        const terms = (query || '').split(' ').map((term) => term.trim());\n        const deduplicate = new Set();\n        return terms.filter((term) => {\n            if (!term || deduplicate.has(term))\n                return false;\n            deduplicate.add(term);\n            return true;\n        });\n    }\n}\n__decorate([\n    memoize()\n], ESLEventListener.prototype, \"$targets\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar EventUtils_1;\nimport { ExportNs } from '../../environment/export-ns';\nimport { ESLEventListener } from './listener';\n/** Type guard to check if the passed function is typeof {@link ESLListenerDescriptorFn} */\nexport const isDescriptorFn = (obj) => typeof obj === 'function' && Object.hasOwnProperty.call(obj, 'event');\nlet EventUtils = EventUtils_1 = class EventUtils {\n    /**\n     * Dispatches custom event.\n     * Event bubbles and is cancelable by default, use `eventInit` to override that.\n     * @param el - element target\n     * @param eventName - event name\n     * @param eventInit - custom event init. See {@link CustomEventInit}\n     */\n    static dispatch(el, eventName, eventInit) {\n        const init = Object.assign({\n            bubbles: true,\n            composed: true,\n            cancelable: true\n        }, eventInit || {});\n        return el.dispatchEvent(new CustomEvent(eventName, init));\n    }\n    /** Gets descriptors from the passed object */\n    static descriptors(target, auto = true) {\n        if (!target)\n            return [];\n        const desc = [];\n        for (const key in target) {\n            if (isDescriptorFn(target[key]) && target[key].auto === auto)\n                desc.push(target[key]);\n        }\n        return desc;\n    }\n    /**\n     * Gets currently subscribed listeners of the target\n     * @param target - host element (listeners context)\n     * @param criteria - optional set of criteria {@link ESLListenerCriteria} to filter listeners list\n     */\n    static listeners(target, ...criteria) {\n        return ESLEventListener.get(target).filter((listener) => !criteria.length || criteria.every(listener.matches, listener));\n    }\n    static subscribe(target, eventDesc, handler = eventDesc) {\n        if (typeof handler !== 'function')\n            return [];\n        if (typeof eventDesc === 'string')\n            eventDesc = { event: eventDesc };\n        if (isDescriptorFn(handler) && eventDesc !== handler)\n            eventDesc = Object.assign({}, handler, eventDesc);\n        const listeners = ESLEventListener.create(target, handler, eventDesc);\n        listeners.forEach((listener) => listener.subscribe());\n        return listeners;\n    }\n    /**\n     * Unsubscribes {@link ESLEventListener}(s) from the object\n     * @param target - host element (listeners context)\n     * @param criteria - optional set of criteria {@link ESLListenerCriteria} to filter listeners to remove\n     */\n    static unsubscribe(target, ...criteria) {\n        const listeners = EventUtils_1.listeners(target, ...criteria);\n        listeners.forEach((listener) => listener.unsubscribe());\n        return listeners;\n    }\n};\nEventUtils = EventUtils_1 = __decorate([\n    ExportNs('EventUtils')\n], EventUtils);\nexport { EventUtils };\n","import { wrap } from '../misc/array';\n/** Store locks for key element classes*/\nconst lockStore = new WeakMap();\n/** Mange className lock for the element */\nconst lock = (el, className, locker) => {\n    const elLocks = lockStore.get(el) || new Map();\n    const classLocks = elLocks.get(className) || new Set();\n    classLocks.add(locker);\n    elLocks.set(className, classLocks);\n    lockStore.set(el, elLocks);\n};\n/**\n * Manage className unlock for the element\n * @returns true if className have no locks\n */\nconst unlock = (el, className, locker) => {\n    const elLocks = lockStore.get(el);\n    if (!elLocks)\n        return true;\n    const classLocks = elLocks.get(className);\n    if (!classLocks)\n        return true;\n    classLocks.delete(locker);\n    return !classLocks.size;\n};\n/**\n * Add single class to the element.\n * Supports inversion and locker management.\n */\nconst add = (el, className, locker) => {\n    if (className[0] === '!')\n        return remove(el, className.substring(1), locker);\n    if (locker)\n        lock(el, className, locker);\n    el.classList.add(className);\n};\n/**\n * Remove single class from the element.\n * Supports inversion and locker management.\n */\nconst remove = (el, className, locker) => {\n    if (className[0] === '!')\n        return add(el, className.substring(1), locker);\n    if (locker && !unlock(el, className, locker))\n        return;\n    if (!locker)\n        CSSClassUtils.unlock(el, className);\n    el.classList.remove(className);\n};\n/**\n * Check if the element matches passed CSS class.\n * Supports inversion.\n */\nconst has = (el, className) => {\n    if (className[0] === '!')\n        return !has(el, className.substring(1));\n    return el.classList.contains(className);\n};\n/**\n * CSS class manipulation utilities.\n *\n * Allows manipulating with CSS classes with the following set of sub-features:\n * - JQuery-like enumeration - you can pass multiple tokens separated by space\n * - safe checks - empty or falsy token sting will be ignored without throwing an error\n * - inversion syntax - tokens that start from '!' will be processed with inverted action\n * (e.g. addCls(el, '!class') - will remove 'class' from the element, while removeCls(el, '!class') adds 'class' to the element)\n * - class locks - you can manipulate with classes using `locker` option that takes into account the modification initiator.\n * That means the class added in 'locker' mode will not be removed until all initiators that requested add class have requested its removal.\n * */\nexport class CSSClassUtils {\n    /** Splitting passed token string into CSS class names array. */\n    static splitTokens(tokenString) {\n        return (tokenString || '').split(' ').filter((str) => !!str);\n    }\n    /**\n     * Add all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static add(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => add(el, className, locker)));\n    }\n    /**\n     * Remove all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static remove(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => remove(el, className, locker)));\n    }\n    /**\n     * Toggle all classes from the class token string on the element to the passed state.\n     * @see CSSClassUtils\n     * */\n    static toggle(els, cls, state, locker) {\n        (state ? CSSClassUtils.add : CSSClassUtils.remove)(els, cls, locker);\n    }\n    /**\n     * Check if all class from token string matches to the element or elements.\n     * @see CSSClassUtils\n     * */\n    static has(els, cls) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        return wrap(els).every((el) => tokens.every((className) => has(el, className)));\n    }\n    /** Remove all lockers for the element or passed element className */\n    static unlock(els, className) {\n        if (className) {\n            wrap(els).forEach((el) => { var _a; return (_a = lockStore.get(el)) === null || _a === void 0 ? void 0 : _a.delete(className); });\n        }\n        else {\n            wrap(els).forEach((el) => lockStore.delete(el));\n        }\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { prop } from '../../esl-utils/decorators/prop';\nimport { EventUtils } from '../../esl-utils/dom/events';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\n/**\n * Base class for ESL custom elements\n * Allows defining custom element with the optional custom tag name\n */\nexport class ESLBaseElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this._connected = false;\n    }\n    connectedCallback() {\n        this._connected = true;\n        this.classList.add(this.constructor.is);\n        EventUtils.descriptors(this)\n            .forEach((desc) => EventUtils.subscribe(this, desc));\n    }\n    disconnectedCallback() {\n        this._connected = false;\n        EventUtils.unsubscribe(this);\n    }\n    /** Check that the element is connected and `connectedCallback` has been executed */\n    get connected() {\n        return this._connected;\n    }\n    $$on(event, handler) {\n        return EventUtils.subscribe(this, event, handler);\n    }\n    /** Unsubscribes event listener */\n    $$off(...condition) {\n        return EventUtils.unsubscribe(this, ...condition);\n    }\n    /**\n     * Gets or sets CSS classes for the current element.\n     * @param cls - CSS classes query {@link CSSClassUtils}\n     * @param value - boolean to set CSS class(es) state or undefined to skip mutation\n     * @returns current classes state or passed state\n     */\n    $$cls(cls, value) {\n        if (value === undefined)\n            return CSSClassUtils.has(this, cls);\n        CSSClassUtils.toggle(this, cls, value);\n        return value;\n    }\n    /**\n     * Gets or sets an attribute for the current element.\n     * If the `value` param is undefined then skips mutation.\n     * @param name - attribute name\n     * @param value - string attribute value, boolean attribute state or `null` to delete attribute\n     * @returns the current attribute value or previous value for mutation\n     */\n    $$attr(name, value) {\n        const prevValue = this.getAttribute(name);\n        if (value !== undefined)\n            setAttr(this, name, value);\n        return prevValue;\n    }\n    /**\n     * Dispatches component custom event.\n     * @param eventName - event name\n     * @param eventInit - custom event init. See {@link CustomEventInit}\n     */\n    $$fire(eventName, eventInit) {\n        return EventUtils.dispatch(this, eventName, eventInit);\n    }\n    /**\n     * Register component in the {@link customElements} registry\n     * @param tagName - custom tag name to register custom element\n     */\n    static register(tagName) {\n        tagName = tagName || this.is;\n        if (!tagName)\n            throw new Error('Can not define custom element');\n        const constructor = customElements.get(tagName);\n        if (constructor) {\n            if (constructor.is !== tagName)\n                throw new Error('Element declaration tag inconsistency');\n            return;\n        }\n        if (this.is !== tagName) {\n            this.is = tagName;\n        }\n        customElements.define(tagName, this);\n    }\n    /** Shortcut for `customElements.whenDefined(currentCustomElement)` */\n    static get registered() {\n        return customElements.whenDefined(this.is);\n    }\n}\n/** Custom element tag name */\nESLBaseElement.is = '';\n__decorate([\n    prop('esl:refresh')\n], ESLBaseElement.prototype, \"REFRESH_EVENT\", void 0);\n","import { identity } from '../misc/functions';\nimport { toKebabCase } from '../misc/format';\nimport { getAttr, setAttr } from '../dom/attr';\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\nexport const toString = (val) => val !== null && val !== void 0 ? val : '';\nexport const toNumber = parseFloat;\nexport const toBoolean = (val) => val !== null && val !== 'false';\n/**\n * Decorator to map current property to element attribute value.\n * Maps string type property.\n * @param config - mapping configuration. See {@link AttrDescriptor}\n */\nexport const attr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        function get() {\n            const val = getAttr(this, attrName);\n            if (val === null && 'defaultValue' in config)\n                return config.defaultValue;\n            return (config.parser || toString)(val);\n        }\n        function set(value) {\n            setAttr(this, attrName, (config.serializer || identity)(value));\n        }\n        Object.defineProperty(target, propName, config.readonly ? { get } : { get, set });\n    };\n};\n","/**\n * Postpone action after next render\n */\nexport const afterNextRender = (callback) => requestAnimationFrame(() => requestAnimationFrame(callback));\n/**\n * Decorate function to schedule execution after next render\n * @returns decorated function\n */\nexport const rafDecorator = (fn) => {\n    let lastArgs = null; // null if no calls requested\n    return function (...args) {\n        if (lastArgs === null) {\n            requestAnimationFrame(() => {\n                lastArgs && fn.call(this, ...lastArgs);\n                lastArgs = null;\n            });\n        }\n        lastArgs = args;\n    };\n};\n","const BINDINGS_STORE_KEY = '__fnBindings__';\n/** Decorator \"bind\" allows to bind prototype method context to class instance */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function bind(target, propertyKey, descriptor) {\n    // Validation check\n    if (!descriptor || (typeof descriptor.value !== 'function')) {\n        throw new TypeError('Only class methods can be decorated via @bind');\n    }\n    // Original function\n    const fn = descriptor.value;\n    return {\n        enumerable: descriptor.enumerable,\n        configurable: descriptor.configurable,\n        get() {\n            // Accessing via prototype returns original function\n            // If the constructor property is in the context then it's not an instance\n            if (!this || this === target || Object.hasOwnProperty.call(this, 'constructor')) {\n                return fn;\n            }\n            // Bounded functions store\n            let bindings = this[BINDINGS_STORE_KEY];\n            if (!bindings) {\n                bindings = this[BINDINGS_STORE_KEY] = new WeakMap();\n            }\n            // Store binding if it does not exist\n            if (!bindings.has(fn)) {\n                bindings.set(fn, fn.bind(this));\n            }\n            // Return binding\n            return bindings.get(fn);\n        },\n        set(value) {\n            Object.defineProperty(this, propertyKey, {\n                writable: true,\n                enumerable: false,\n                configurable: true,\n                value\n            });\n        }\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { memoize } from '../decorators/memoize';\n// TODO: functional\nexport class RTLUtils {\n    /** Check if the element in a RTL direction context */\n    static isRtl(el) {\n        return getComputedStyle(el || document.body).direction === 'rtl';\n    }\n    /**\n     * @returns RTL scroll type (lazy, memoized)\n     */\n    static get scrollType() {\n        let scrollType = 'default';\n        const el = createDummyEl();\n        document.body.appendChild(el);\n        if (el.scrollLeft <= 0) {\n            el.scrollLeft = 2;\n            scrollType = el.scrollLeft < 2 ? 'negative' : 'reverse';\n        }\n        document.body.removeChild(el);\n        return scrollType;\n    }\n    static normalizeScrollLeft(el, value = null, isRtl = RTLUtils.isRtl(el)) {\n        value = (value === null) ? el.scrollLeft : value;\n        switch (isRtl ? RTLUtils.scrollType : '') {\n            case 'negative':\n                return el.scrollWidth - el.clientWidth + value;\n            case 'reverse':\n                return el.scrollWidth - el.clientWidth - value;\n            default:\n                return value;\n        }\n    }\n}\n__decorate([\n    memoize()\n], RTLUtils, \"scrollType\", null);\n/** Creates the dummy test element with a horizontal scroll presented */\nfunction createDummyEl() {\n    const el = document.createElement('div');\n    el.appendChild(document.createTextNode('ESL!'));\n    el.dir = 'rtl';\n    Object.assign(el.style, {\n        position: 'absolute',\n        top: '-1000px',\n        width: '4px',\n        height: '1px',\n        fontSize: '14px',\n        overflow: 'scroll'\n    });\n    return el;\n}\n","/**\n * @returns Promise that will be resolved or rejected in `timeout` with an optional `payload`\n * If `isReject` is `true` the result promise will be rejected, otherwise (by default) the result promise will be resolved\n */\nexport function promisifyTimeout(timeout, payload, isReject) {\n    return new Promise((resolve, reject) => setTimeout((isReject ? reject : resolve).bind(null, payload), timeout));\n}\n/**\n * @returns Promise that will be resolved by dispatching `event` on `target`\n * Or it will be rejected in `timeout` if it's specified\n * Optional `options` for addEventListener can be also specified\n */\nexport function promisifyEvent(target, event, timeout, options) {\n    return new Promise((resolve, reject) => {\n        function eventCallback(e) {\n            target.removeEventListener(event, eventCallback, options);\n            resolve(e);\n        }\n        target.addEventListener(event, eventCallback, options);\n        if (typeof timeout === 'number' && timeout >= 0) {\n            setTimeout(() => reject(new Error('Rejected by timeout')), timeout);\n        }\n    });\n}\n/**\n * Short helper to make Promise from element state marker\n * @returns Promise that will be resolved if the target `marker` property is truthful or `event` is dispatched\n * @example\n * `const imgReady = promisifyMarker(eslImage, 'ready');`\n */\nexport function promisifyMarker(target, marker, event = marker) {\n    if (target[marker])\n        return Promise.resolve(target);\n    return promisifyEvent(target, event).then(() => target);\n}\n/**\n * Call `callback` limited by `tryCount` amount of times with interval in `timeout` ms\n * @returns Promise that will be resolved as soon as callback returns truthy value, or reject it by limit.\n */\nexport function tryUntil(callback, tryCount = 2, timeout = 100) {\n    return new Promise((resolve, reject) => {\n        (function check() {\n            let result;\n            try {\n                result = callback();\n            }\n            catch (_a) {\n                result = undefined;\n            }\n            if (result || (tryCount--) < 0) {\n                result ? resolve(result) : reject(new Error('Rejected by limit of tries'));\n            }\n            else {\n                setTimeout(check, timeout);\n            }\n        })();\n    });\n}\n/**\n * Call async callback in a sequence passed number of times\n * Initial call starts as a microtask\n * @param callback - async chain function\n * @param count - count o calls\n * @returns sequence end promise\n */\nexport function repeatSequence(callback, count = 1) {\n    if (count < 1)\n        return Promise.reject();\n    if (count === 1)\n        return Promise.resolve().then(callback);\n    return repeatSequence(callback, count - 1).then(callback);\n}\n/**\n * Create Deferred Object that wraps promise and its resolve and reject callbacks\n */\nexport function createDeferred() {\n    let reject;\n    let resolve;\n    // Both reject and resolve will be assigned anyway while the Promise constructing.\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve, reject };\n}\n/**\n * Safe wrap for Promise.resolve to use in Promise chain\n * @example\n * `const resolvedPromise = rejectedPromise.catch(resolvePromise);`\n */\nexport function resolvePromise(arg) {\n    return Promise.resolve(arg);\n}\n/**\n * Safe wrap for Promise.reject to use in Promise chain\n * @example\n * `const rejectedPromise = resolvedPromise.then(rejectPromise);`\n */\nexport function rejectPromise(arg) {\n    return Promise.reject(arg);\n}\n/**\n * Promise utils helper class\n * Note: use individual methods in case you need correct \"tree shaking\"\n */\nexport class PromiseUtils {\n}\nPromiseUtils.fromTimeout = promisifyTimeout;\nPromiseUtils.fromEvent = promisifyEvent;\nPromiseUtils.fromMarker = promisifyMarker;\nPromiseUtils.repeat = repeatSequence;\nPromiseUtils.tryUntil = tryUntil;\nPromiseUtils.deferred = createDeferred;\nPromiseUtils.resolve = resolvePromise;\nPromiseUtils.reject = rejectPromise;\n","import { createDeferred } from './promise';\n/**\n * Creates a debounced function that implements {@link Debounced}.\n * Debounced function delays invoking func until after wait milliseconds have elapsed\n * since the last time the debounced function was invoked.\n * The func is invoked with the last arguments provided to the debounced function.\n * @param fn - function to decorate\n * @param wait - time to debounce\n * @param thisArg - optional context to call original function, use debounced method call context if not defined\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function debounce(fn, wait = 10, thisArg) {\n    let timeout = null;\n    let deferred = null;\n    function debouncedSubject(...args) {\n        deferred = deferred || createDeferred();\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = window.setTimeout(() => {\n            timeout = null;\n            // fn.apply to save call context\n            deferred.resolve(fn.apply(thisArg || this, args));\n            deferred = null;\n        }, wait);\n    }\n    function cancel() {\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = null;\n        deferred === null || deferred === void 0 ? void 0 : deferred.reject();\n        deferred = null;\n    }\n    Object.defineProperty(debouncedSubject, 'promise', {\n        get: () => deferred ? deferred.promise : Promise.resolve()\n    });\n    Object.defineProperty(debouncedSubject, 'cancel', {\n        writable: false,\n        enumerable: false,\n        value: cancel\n    });\n    return debouncedSubject;\n}\n","import { isObject } from './types';\nexport function deepMerge(...objects) {\n    return objects.reduce((res, obj) => {\n        if (typeof obj === 'undefined')\n            return res;\n        if (typeof res === 'undefined')\n            res = Array.isArray(obj) ? [] : {};\n        if (!isObject(obj) || !isObject(res))\n            return obj;\n        Object.keys(obj).forEach((key) => {\n            res[key] = isObject(obj[key]) ? deepMerge(res[key], obj[key]) : obj[key];\n        });\n        return res;\n    }, undefined);\n}\n","/**\n * Synthetic implementation of EventTarget\n * Uses a Set collection of listeners\n * Ignores event type\n */\nexport class SyntheticEventTarget {\n    constructor() {\n        this._listeners = new Set();\n    }\n    addEventListener(type, callback = type) {\n        validateEventListenerType(callback);\n        this._listeners.add(callback);\n    }\n    removeEventListener(type, callback = type) {\n        validateEventListenerType(callback);\n        this._listeners.delete(callback);\n    }\n    dispatchEvent(e) {\n        const target = () => this; // use get due IE specific\n        Object.defineProperty(e, 'target', { get: target, enumerable: true });\n        Object.defineProperty(e, 'currentTarget', { get: target, enumerable: true });\n        Object.defineProperty(e, 'srcElement', { get: target, enumerable: true });\n        this._listeners.forEach((listener) => {\n            if (typeof listener === 'function')\n                listener.call(this, e);\n            else\n                listener.handleEvent.call(listener, e);\n        });\n        return e.defaultPrevented;\n    }\n    /** @deprecated alias for `addEventListener` */\n    addListener(cb) {\n        this.addEventListener(cb);\n    }\n    /** @deprecated alias for `removeEventListener` */\n    removeListener(cb) {\n        this.removeEventListener(cb);\n    }\n}\nfunction validateEventListenerType(callback) {\n    if (!callback || typeof callback !== 'function' && typeof callback.handleEvent !== 'function') {\n        throw Error('Callback should be a function or EventListenerObject');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from './export-ns';\nconst { userAgent, vendor, platform } = window.navigator;\n// IE Detection\nexport const isTrident = /trident/i.test(userAgent);\nexport const isIE = isTrident;\n// Edge Detection\nexport const isEdgeHTML = /edg([ea]|ios)/i.test(userAgent);\nexport const isBlinkEdge = /\\sedg\\//i.test(userAgent);\nexport const isEdge = isEdgeHTML || isBlinkEdge;\n// Gecko\nexport const isGecko = /gecko/i.test(userAgent) && !/like gecko/i.test(userAgent);\nexport const isFirefox = /firefox|iceweasel|fxios/i.test(userAgent);\n// Opera / Chrome\nexport const isOpera = /(?:^opera.+?version|opr)/.test(userAgent);\nexport const isChrome = !isOpera && /google inc/.test(vendor);\n// Webkit\nexport const isWebkit = /(apple)?webkit/i.test(userAgent);\n// Safari\nexport const isSafari = isWebkit && /^((?!chrome|android).)*safari/i.test(userAgent);\n// Blink\nexport const isBlink = isWebkit && !isSafari;\n// Bot detection\nexport const isBot = /Chrome-Lighthouse|Google Page Speed Insights/i.test(userAgent);\n// Mobile\nexport const isAndroid = /Android/i.test(userAgent);\nexport const isMobileIOS13 = /* iOS 13+ detection */ (platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\nexport const isMobileIOS = /iPad|iPhone|iPod/.test(platform) || isMobileIOS13;\nexport const isLegacyMobile = /webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\nexport const isMobile = isMobileIOS || isAndroid || isLegacyMobile;\nexport const isMobileSafari = isMobileIOS && isWebkit && /CriOS/i.test(userAgent);\n// Touch Detection\nexport const isTouchDevice = (() => {\n    const navApi = window.navigator;\n    if (navApi.maxTouchPoints || navApi.msMaxTouchPoints)\n        return true;\n    return ('ontouchstart' in window) || ('DocumentTouch' in window && document instanceof Touch);\n})();\n// Hover check\n// Note: always true for IE\nexport const hasHover = !matchMedia('(hover: none)').matches;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nexport const TOUCH_EVENTS = (() => {\n    const isTouch = isTouchDevice;\n    return {\n        START: isTouch ? 'touchstart' : 'pointerdown',\n        MOVE: isTouch ? 'touchmove' : 'pointermove',\n        END: isTouch ? 'touchend' : 'pointerup'\n    };\n})();\n/**\n * Device detection utility\n * @readonly\n */\nlet DeviceDetector = class DeviceDetector {\n};\n// IE Detection\nDeviceDetector.isTrident = isTrident;\nDeviceDetector.isIE = isIE;\n// Edge Detection\nDeviceDetector.isEdgeHTML = isEdgeHTML;\nDeviceDetector.isBlinkEdge = isBlinkEdge;\nDeviceDetector.isEdge = isEdge;\n// Gecko\nDeviceDetector.isGecko = isGecko;\nDeviceDetector.isFirefox = isFirefox;\n// Opera / Chrome\nDeviceDetector.isOpera = isOpera;\nDeviceDetector.isChrome = isChrome;\n// Webkit\nDeviceDetector.isWebkit = isWebkit;\n// Safari\nDeviceDetector.isSafari = isSafari;\n// Blink\nDeviceDetector.isBlink = isBlink;\n// Bot detection\nDeviceDetector.isBot = isBot;\n// Mobile\nDeviceDetector.isAndroid = isAndroid;\nDeviceDetector.isMobileIOS13 = isMobileIOS13;\nDeviceDetector.isMobileIOS = isMobileIOS;\nDeviceDetector.isLegacyMobile = isLegacyMobile;\nDeviceDetector.isMobile = isMobile;\nDeviceDetector.isMobileSafari = isMobileSafari;\n// Touch Detection\nDeviceDetector.isTouchDevice = isTouchDevice;\n// Hover check\n// Note: always true for IE\nDeviceDetector.hasHover = hasHover;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nDeviceDetector.TOUCH_EVENTS = TOUCH_EVENTS;\nDeviceDetector = __decorate([\n    ExportNs('DeviceDetector')\n], DeviceDetector);\nexport { DeviceDetector };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenDPR_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\n/**\n * DPR preprocessor. Used to replace DPR shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLScreenDPR = ESLScreenDPR_1 = class ESLScreenDPR {\n    static toDPI(dpr) {\n        return (96 * dpr).toFixed(1);\n    }\n    static process(match) {\n        if (!ESLScreenDPR_1.VALUE_REGEXP.test(match))\n            return;\n        const dpr = parseFloat(match);\n        if (dpr < 0 || isNaN(dpr))\n            return;\n        if (ESLScreenDPR_1.ignoreBotsDpr && DeviceDetector.isBot && dpr > 1)\n            return 'not all';\n        if (DeviceDetector.isSafari)\n            return `(-webkit-min-device-pixel-ratio: ${dpr})`;\n        return `(min-resolution: ${ESLScreenDPR_1.toDPI(dpr)}dpi)`;\n    }\n};\nESLScreenDPR.VALUE_REGEXP = /(\\d(\\.\\d)?)x/;\n/** Option to exclude dpr greater then 2 for bots */\nESLScreenDPR.ignoreBotsDpr = false;\nESLScreenDPR = ESLScreenDPR_1 = __decorate([\n    ExportNs('ScreenDPR')\n], ESLScreenDPR);\nexport { ESLScreenDPR };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenBreakpoints_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst registry = new Map();\n/**\n * ESL Screen Breakpoints registry\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Screen Breakpoint registry is used to provide custom breakpoints for {@link ESLMediaQuery}\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLScreenBreakpoints = ESLScreenBreakpoints_1 = class ESLScreenBreakpoints {\n    /**\n     * Add or replace breakpoint shortcut that can be used inside ESLMediaQuery\n     * @param name - name of shortcut\n     * @param minWidth - min width for breakpoint\n     * @param maxWidth - max width for breakpoint\n     */\n    static add(name, minWidth, maxWidth) {\n        name = name.toLowerCase();\n        if (ESLScreenBreakpoints_1.BP_NAME_REGEXP.test(name)) {\n            const current = registry.get(name);\n            registry.set(name, new ESLScreenBreakpoint(name, minWidth, maxWidth));\n            return current;\n        }\n        throw new Error('The shortcut should consist only of Latin characters and be at least one character long.');\n    }\n    /** Removes screen breakpoint */\n    static remove(name) {\n        return registry.delete(name.toLowerCase());\n    }\n    /** @returns known breakpoint shortcut instance */\n    static get(name) {\n        return registry.get((name || '').toLowerCase());\n    }\n    /** All available breakpoints names */\n    static get names() {\n        const keys = [];\n        registry.forEach((value, key) => keys.push(key));\n        return keys;\n    }\n    /** @returns breakpoints shortcut replacement */\n    static process(term) {\n        const [, sign, bp] = term.match(ESLScreenBreakpoints_1.BP_REGEXP) || [];\n        const shortcut = ESLScreenBreakpoints_1.get(bp);\n        if (!shortcut)\n            return;\n        if (sign === '+')\n            return shortcut.mediaQueryGE;\n        if (sign === '-')\n            return shortcut.mediaQueryLE;\n        return shortcut.mediaQuery;\n    }\n};\nESLScreenBreakpoints.BP_REGEXP = /^([+-]?)([a-z]+)/i;\nESLScreenBreakpoints.BP_NAME_REGEXP = /^[a-z]+/i;\nESLScreenBreakpoints = ESLScreenBreakpoints_1 = __decorate([\n    ExportNs('ScreenBreakpoints')\n], ESLScreenBreakpoints);\nexport { ESLScreenBreakpoints };\n/** ESL Screen Breakpoint description */\nexport class ESLScreenBreakpoint {\n    constructor(name, min, max) {\n        this.name = name;\n        this.min = min;\n        this.max = max;\n    }\n    get mediaQuery() {\n        return `(min-width: ${this.min}px) and (max-width: ${this.max}px)`;\n    }\n    get mediaQueryGE() {\n        return `(min-width: ${this.min}px)`;\n    }\n    get mediaQueryLE() {\n        return `(max-width: ${this.max}px)`;\n    }\n    toString() {\n        return `[${this.name}]: ${this.min} to ${this.max}`;\n    }\n}\n// Defaults\nESLScreenBreakpoints.add('xs', 1, 767);\nESLScreenBreakpoints.add('sm', 768, 991);\nESLScreenBreakpoints.add('md', 992, 1199);\nESLScreenBreakpoints.add('lg', 1200, 1599);\nESLScreenBreakpoints.add('xl', 1600, 999999);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst shortcuts = new Map();\n/**\n * Static shortcuts preprocessor. Used to store device related shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLEnvShortcuts = class ESLEnvShortcuts {\n    /**\n     * Add mapping\n     * @param shortcut - term to find in query\n     * @param value - media query string or boolean result (that represents `all` or `not all` conditions)\n     */\n    static add(shortcut, value) {\n        if (!['boolean', 'string'].includes(typeof value))\n            value = false;\n        shortcuts.set(shortcut.toLowerCase(), value);\n    }\n    /** Remove mapping for passed shortcut term */\n    static remove(shortcut) {\n        return shortcuts.delete(shortcut.toLowerCase());\n    }\n    /** Replaces shortcut to registered result */\n    static process(match) {\n        if (shortcuts.has(match))\n            return shortcuts.get(match);\n    }\n};\n// For debug purposes\nESLEnvShortcuts._shortcuts = shortcuts;\nESLEnvShortcuts = __decorate([\n    ExportNs('EnvShortcuts')\n], ESLEnvShortcuts);\nexport { ESLEnvShortcuts };\n// Touch check\nESLEnvShortcuts.add('touch', DeviceDetector.isTouchDevice);\n// Basic device type shortcuts\nESLEnvShortcuts.add('bot', DeviceDetector.isBot);\nESLEnvShortcuts.add('mobile', DeviceDetector.isMobile);\nESLEnvShortcuts.add('desktop', !DeviceDetector.isMobile);\nESLEnvShortcuts.add('android', DeviceDetector.isAndroid);\nESLEnvShortcuts.add('ios', DeviceDetector.isMobileIOS);\n// Basic browser shortcuts\nESLEnvShortcuts.add('ie', DeviceDetector.isIE);\nESLEnvShortcuts.add('edge', DeviceDetector.isEdgeHTML);\nESLEnvShortcuts.add('gecko', DeviceDetector.isGecko);\nESLEnvShortcuts.add('webkit', DeviceDetector.isWebkit);\nESLEnvShortcuts.add('blink', DeviceDetector.isBlink);\nESLEnvShortcuts.add('safari', DeviceDetector.isSafari);\nESLEnvShortcuts.add('safari-ios', DeviceDetector.isMobileSafari);\n","/**\n * Const media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Ignores listeners always return the same result.\n * Have only two instances: {@link ALL} and {@link NOT_ALL}\n */\nclass MediaQueryConstCondition {\n    constructor(_matches) {\n        this._matches = _matches;\n    }\n    get matches() {\n        return this._matches;\n    }\n    addListener() { }\n    addEventListener() { }\n    removeListener() { }\n    removeEventListener() { }\n    dispatchEvent() {\n        return false;\n    }\n    optimize() {\n        return this;\n    }\n    toString() {\n        return this._matches ? 'all' : 'not all';\n    }\n    /** Compares const media condition with the passed query instance or string */\n    eq(val) {\n        return String(val).trim() === this.toString();\n    }\n}\nexport const ALL = new MediaQueryConstCondition(true);\nexport const NOT_ALL = new MediaQueryConstCondition(false);\n","/** Custom event dispatched by {@link ESLMediaQuery} instances */\nexport class ESLMediaChangeEvent extends Event {\n    constructor(matches) {\n        super('change');\n        this.matches = matches;\n    }\n    /** Returns serialized value of the current {@link ESLMediaQuery} */\n    get media() {\n        return String(this.target);\n    }\n}\n","import { SyntheticEventTarget } from '../../../esl-utils/dom/events';\nimport { ALL, NOT_ALL } from './media-query-const';\nimport { ESLMediaChangeEvent } from './media-query-base';\n/**\n * Simple media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Wraps matchMedia instance\n */\nexport class MediaQueryCondition extends SyntheticEventTarget {\n    constructor(query, inverted = false) {\n        super();\n        this._inverted = inverted;\n        this._mq = matchMedia(query.trim() || 'all');\n        this._onChange = this._onChange.bind(this);\n    }\n    get matches() {\n        return this._inverted ? !this._mq.matches : this._mq.matches;\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this._listeners.size > 1)\n            return;\n        if (typeof this._mq.addEventListener === 'function') {\n            this._mq.addEventListener('change', this._onChange);\n        }\n        else {\n            this._mq.addListener(this._onChange);\n        }\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this._listeners.size)\n            return;\n        if (typeof this._mq.removeEventListener === 'function') {\n            this._mq.removeEventListener('change', this._onChange);\n        }\n        else {\n            this._mq.removeListener(this._onChange);\n        }\n    }\n    /** Optimize query. Can simplify query to {@link MediaQueryConstCondition} */\n    optimize() {\n        if (ALL.eq(this))\n            return this._inverted ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(this))\n            return this._inverted ? ALL : NOT_ALL;\n        return this;\n    }\n    toString() {\n        const query = this._mq.media;\n        const inverted = this._inverted;\n        const complex = inverted && /\\)[\\s\\w]+\\(/.test(query);\n        return (inverted ? 'not ' : '') + (complex ? `(${query})` : query);\n    }\n    /** Handles query change and dispatches it on top level in case result value is changed */\n    _onChange() {\n        this.dispatchEvent(new ESLMediaChangeEvent(this._mq.matches));\n    }\n}\n","import { SyntheticEventTarget } from '../../../esl-utils/dom/events';\nimport { ESLMediaChangeEvent } from './media-query-base';\nimport { ALL, NOT_ALL } from './media-query-const';\n/**\n * Abstract multiple media conditions container\n * @author Alexey Stsefanovich (ala'n)\n *\n * Observe all child items. Dispatch changes when the whole condition result is changed\n */\nclass MediaQueryContainer extends SyntheticEventTarget {\n    constructor(items = []) {\n        super();\n        this.items = items;\n        this._matches = this.matches;\n        this._onChange = this._onChange.bind(this);\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this._listeners.size > 1)\n            return;\n        this.items.forEach((item) => item.addEventListener('change', this._onChange));\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this._listeners.size)\n            return;\n        this.items.forEach((item) => item.removeEventListener('change', this._onChange));\n    }\n    optimize() {\n        return this;\n    }\n    get matches() {\n        return false;\n    }\n    /** Handles query change and dispatches it on top level in case result value is changed */\n    _onChange() {\n        const { matches } = this;\n        if (this._matches === matches)\n            return;\n        this.dispatchEvent(new ESLMediaChangeEvent(this._matches = matches));\n    }\n}\n/** Conjunction (AND) group of media conditions */\nexport class MediaQueryConjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.every((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => NOT_ALL.eq(item)))\n            return NOT_ALL;\n        const items = optimizedItems.filter((item) => !ALL.eq(item));\n        if (items.length === 0)\n            return ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryConjunction(items);\n    }\n    toString() {\n        return this.items.join(' and ');\n    }\n}\n/** Disjunction (OR) group of media conditions */\nexport class MediaQueryDisjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.some((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => ALL.eq(item)))\n            return ALL;\n        const items = optimizedItems.filter((item) => !NOT_ALL.eq(item));\n        if (items.length === 0)\n            return NOT_ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryDisjunction(items);\n    }\n    toString(pretty = false) {\n        return this.items.join(pretty ? ' or ' : ', ');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaQuery_1;\nimport { memoize } from '../../esl-utils/decorators/memoize';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLScreenDPR } from './common/screen-dpr';\nimport { ESLScreenBreakpoints } from './common/screen-breakpoint';\nimport { ESLEnvShortcuts } from './common/env-shortcuts';\nimport { ALL, NOT_ALL } from './conditions/media-query-const';\nimport { MediaQueryCondition } from './conditions/media-query-condition';\nimport { MediaQueryConjunction, MediaQueryDisjunction } from './conditions/media-query-containers';\n/**\n * ESL Media Query\n * @implements EventTarget\n * Provides special media condition syntax - ESLMediaQuery\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya, Natallia Harshunova\n *\n * Utility to support extended MediaQuery features\n * Supports\n * - CSS MediaQuery matching check\n * - DPR display queries (`@x1|@x2|@x3`)\n * - Registered screen default sizes (breakpoints) shortcuts (`@[-|+](XS|SM|MD|LG|XL)`)\n * - Device and browser shortcuts (`@MOBILE|@DESKTOP|@IE`)\n * - Custom static shortcuts and custom query preprocessors\n * - `not` logic operation (can have multiple not operators before any term of the query)\n * - `or` or `,` logical operator (have a lowest priority)\n * - Query matching change listeners\n * - Implements {@link EventTarget}, compatible with {@link ESLEventListener}\n *\n * Building query process:\n *\n * [Building query logical tree] - [preprocess nodes queries] - [building native MediaQueryList nodes] - [query tree optimization]\n */\nlet ESLMediaQuery = ESLMediaQuery_1 = class ESLMediaQuery {\n    /** Adds {@link IMediaQueryPreprocessor} instance for query preprocessing step */\n    static use(preprocessor) {\n        this._preprocessors.unshift(preprocessor);\n        return this;\n    }\n    /** Cached method to create {@link ESLMediaQuery} condition instance from query string */\n    static for(query) {\n        return ESLMediaQuery_1.from(query);\n    }\n    /** Creates {@link ESLMediaQuery} condition instance from query string */\n    static from(query) {\n        const conjunctions = query.split(/\\sor\\s|,/).map((term) => {\n            const conditions = term.split(/\\sand\\s/).map(ESLMediaQuery_1.parseSimpleQuery);\n            return new MediaQueryConjunction(conditions);\n        });\n        return new MediaQueryDisjunction(conjunctions).optimize();\n    }\n    /** Preprocess simple query term by applying replacers and shortcuts rules */\n    static preprocess(term) {\n        if (!this.SHORTCUT_PATTERN.test(term))\n            return term;\n        const shortcut = term.trim().substring(1).toLowerCase();\n        for (const replacer of this._preprocessors) {\n            const result = replacer.process(shortcut);\n            if (typeof result === 'string')\n                return result;\n            if (typeof result === 'boolean')\n                return result ? 'all' : 'not all';\n        }\n        return term;\n    }\n    /** Creates simple {@link ESLMediaQuery} condition */\n    static parseSimpleQuery(term) {\n        const query = term.replace(/^\\s*not\\s+/, '');\n        const queryInverted = query !== term;\n        const processedQuery = ESLMediaQuery_1.preprocess(query);\n        const sanitizedQuery = processedQuery.replace(/^\\s*not\\s+/, '');\n        const resultInverted = processedQuery !== sanitizedQuery;\n        const invert = queryInverted !== resultInverted;\n        if (ALL.eq(sanitizedQuery))\n            return invert ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(sanitizedQuery))\n            return invert ? ALL : NOT_ALL;\n        return new MediaQueryCondition(sanitizedQuery, invert);\n    }\n};\n/** Always true condition */\nESLMediaQuery.ALL = ALL;\n/** Always false condition */\nESLMediaQuery.NOT_ALL = NOT_ALL;\nESLMediaQuery.SHORTCUT_PATTERN = /@([a-z0-9.+-]+)/i;\nESLMediaQuery._preprocessors = [];\n__decorate([\n    memoize()\n], ESLMediaQuery, \"for\", null);\nESLMediaQuery = ESLMediaQuery_1 = __decorate([\n    ExportNs('MediaQuery')\n], ESLMediaQuery);\nexport { ESLMediaQuery };\n// Register otb preprocessors\nESLMediaQuery.use(ESLScreenDPR);\nESLMediaQuery.use(ESLScreenBreakpoints);\nESLMediaQuery.use(ESLEnvShortcuts);\n","import { ESLMediaQuery } from './esl-media-query';\n/**\n * ESL Media Rule\n * @author Yuliya Adamskaya\n *\n * Helper class to wrap {@link ESLMediaQuery} with the payload value\n * @see ESLMediaQuery\n * @see ESLMediaRuleList\n */\nexport class ESLMediaRule {\n    constructor(payload, query = '') {\n        this.query = ESLMediaQuery.for(query);\n        this.payload = payload;\n    }\n    /** @returns if the inner {@link ESLMediaQuery} is matching current device configuration */\n    get matches() {\n        return this.query.matches;\n    }\n    addEventListener(type, callback = type) {\n        this.query.addEventListener(callback);\n    }\n    removeEventListener(type, callback = type) {\n        this.query.removeEventListener(callback);\n    }\n    toString() {\n        const val = typeof this.payload === 'object' ?\n            JSON.stringify(this.payload) :\n            String(this.payload);\n        return `${this.query} => ${val}`;\n    }\n    /**\n     * Creates the {@link ESLMediaRule} instance from payload string, query and valueParser.\n     * If the payload parse result is undefined then rule will be undefined.\n     */\n    static create(payload, query, parser) {\n        const payloadValue = parser(payload.trim());\n        if (typeof payloadValue === 'undefined')\n            return undefined;\n        return new ESLMediaRule(payloadValue, query.trim());\n    }\n    /** Parses the rule string to the {@link ESLMediaRule} instance */\n    static parse(lex, parser) {\n        const parts = lex.split('=>');\n        const query = parts.length === 2 ? parts[0] : '';\n        const payload = parts.length === 2 ? parts[1] : parts[0];\n        return ESLMediaRule.create(payload, query, parser);\n    }\n    /** Shortcut to create always active {@link ESLMediaRule} with passed value */\n    static all(payload) {\n        return new ESLMediaRule(payload, 'all');\n    }\n    /** Shortcut to create always inactive {@link ESLMediaRule} */\n    static empty() {\n        return new ESLMediaRule(undefined, 'all');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaRuleList_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { evaluate } from '../../esl-utils/misc/format';\nimport { deepMerge, isEqual } from '../../esl-utils/misc/object';\nimport { SyntheticEventTarget } from '../../esl-utils/dom/events';\nimport { ESLMediaRule } from './esl-media-rule';\n/** Custom event dispatched by {@link ESLMediaRuleList} instances */\nexport class ESLMediaRuleListEvent extends Event {\n    constructor(current, previous) {\n        super('change');\n        Object.assign(this, { current, previous });\n    }\n}\n/**\n * ESLMediaRuleList - {@link ESLMediaRule} observable collection\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Represents observable object that wraps environment to value mapping\n */\nlet ESLMediaRuleList = ESLMediaRuleList_1 = class ESLMediaRuleList extends SyntheticEventTarget {\n    constructor(rules) {\n        super();\n        this._rules = rules;\n        this._onMatchChanged = this._onMatchChanged.bind(this);\n    }\n    static parse(query, ...common) {\n        const parser = typeof common[common.length - 1] === 'function' ? common.pop() : String;\n        const value = common.pop();\n        return typeof value === 'string' ?\n            ESLMediaRuleList_1.parseTuple(query, value, parser) :\n            ESLMediaRuleList_1.parseQuery(query, parser);\n    }\n    static parseQuery(query, parser = String) {\n        const rules = query.split('|')\n            .map((lex) => ESLMediaRule.parse(lex, parser))\n            .filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(rules);\n    }\n    static parseTuple(mask, values, parser = String) {\n        const queries = mask.split('|');\n        const valueList = values.split('|');\n        while (valueList.length < queries.length && valueList.length !== 0)\n            valueList.push(valueList[valueList.length - 1]);\n        if (valueList.length !== queries.length)\n            throw Error('Value doesn\\'t correspond to mask');\n        const rules = queries.map((query, i) => ESLMediaRule.create(valueList[i], query, parser));\n        const validRules = rules.filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(validRules);\n    }\n    addEventListener(type, callback = type) {\n        super.addEventListener(type, callback);\n        if (this._listeners.size > 1)\n            return;\n        this._value = this.computedValue;\n        this.rules.forEach((rule) => rule.addEventListener(this._onMatchChanged));\n    }\n    removeEventListener(type, callback = type) {\n        super.removeEventListener(type, callback);\n        if (this._listeners.size)\n            return;\n        delete this._value;\n        this.rules.forEach((rule) => rule.removeEventListener(this._onMatchChanged));\n    }\n    /** Array of {@link ESLMediaRule}s that forms the current {@link ESLMediaRuleList} */\n    get rules() {\n        return this._rules;\n    }\n    /** All active {@link ESLMediaRule}s */\n    get active() {\n        return this.rules.filter((rule) => rule.matches);\n    }\n    /** Value of the last of active rules */\n    get activeValue() {\n        var _a;\n        return (_a = this.active.pop()) === null || _a === void 0 ? void 0 : _a.payload;\n    }\n    /** All active rule values */\n    get activeValues() {\n        return this.active.map((rule) => rule.payload);\n    }\n    /**\n     * Current value of {@link ESLMediaRuleList} object\n     * Uses cache if current object is under observation\n     */\n    get value() {\n        if (!this._listeners.size)\n            return this.computedValue;\n        return Object.hasOwnProperty.call(this, '_value') ? this._value : this.computedValue;\n    }\n    /** Always computed value of the current {@link ESLMediaRuleList} object */\n    get computedValue() {\n        return deepMerge(undefined, ...this.activeValues);\n    }\n    /** Handles inner rules state change */\n    _onMatchChanged() {\n        const curValue = this.value;\n        const newValue = this.computedValue;\n        if (isEqual(curValue, newValue))\n            return;\n        this._value = newValue;\n        this.dispatchEvent(new ESLMediaRuleListEvent(newValue, curValue));\n    }\n    /** @returns serialized {@link ESLMediaRuleList} object representation*/\n    toString() {\n        return this.rules.join('|');\n    }\n};\n/** String value parser (default) */\nESLMediaRuleList.STRING_PARSER = String;\n/** Object value parser. Uses {@link evaluate} to parse value */\nESLMediaRuleList.OBJECT_PARSER = (val) => evaluate(val);\nESLMediaRuleList = ESLMediaRuleList_1 = __decorate([\n    ExportNs('MediaRuleList')\n], ESLMediaRuleList);\nexport { ESLMediaRuleList };\n","import { setAttr } from '../dom/attr';\nimport { toKebabCase } from '../misc/format';\nfunction buildConditionalDescriptor(attrName, readOnly) {\n    function get() {\n        return this.hasAttribute(attrName);\n    }\n    function set(value) {\n        setAttr(this, attrName, !!value);\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element boolean (marker) attribute state.\n * Maps boolean type property.\n * @param config - mapping configuration. See {@link BoolAttrDescriptor}\n */\nexport const boolAttr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildConditionalDescriptor(attrName, !!config.readonly));\n    };\n};\n","import { onDocumentReady } from '../dom/ready';\n/** Defer method execution to the next task with dom ready state precondition */\nexport function ready(target, propertyKey, descriptor) {\n    if (!descriptor || typeof descriptor.value !== 'function') {\n        throw new TypeError('Only class methods can be decorated via document ready decorator');\n    }\n    const fn = descriptor.value;\n    descriptor.value = function (...arg) {\n        onDocumentReady(() => fn.call(this, ...arg));\n    };\n}\n","/**\n * Execute callback in bounds of the next task with dom ready state precondition\n */\nexport function onDocumentReady(callback) {\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', function fn() {\n            document.removeEventListener('DOMContentLoaded', fn);\n            setTimeout(() => callback());\n        });\n    }\n    else {\n        setTimeout(() => callback());\n    }\n}\n","export const TAB = 'Tab';\nexport const ENTER = 'Enter';\nexport const ESC = 'Escape';\nexport const SPACE = ' ';\nexport const BACKSPACE = 'Backspace';\nexport const ALT = 'Alt';\nexport const SHIFT = 'Shift';\nexport const CONTROL = 'Control';\nexport const PAUSE = 'Pause';\nexport const END = 'End';\nexport const HOME = 'Home';\nexport const DELETE = 'Delete';\nexport const PAGE_UP = 'PageUp';\nexport const PAGE_DOWN = 'PageDown';\nexport const ARROW_LEFT = 'ArrowLeft';\nexport const ARROW_UP = 'ArrowUp';\nexport const ARROW_RIGHT = 'ArrowRight';\nexport const ARROW_DOWN = 'ArrowDown';\nexport const SYSTEM_KEYS = [TAB, ALT, SHIFT, CONTROL, PAGE_UP, PAGE_DOWN, ARROW_LEFT, ARROW_UP, ARROW_RIGHT, ARROW_DOWN];\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLToggleablePlaceholder_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nlet ESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = class ESLToggleablePlaceholder extends ESLBaseElement {\n    /** Сreates a placeholder for a given element of the toggleable's descendant */\n    static from($el) {\n        const $placeholder = document.createElement(this.is);\n        $placeholder.$origin = $el;\n        return $placeholder;\n    }\n    connectedCallback() {\n        this.copyAttributesFromOrigin();\n        super.connectedCallback();\n    }\n    /** Builds attribute name for copy */\n    buildAttrName(name) {\n        return name === 'id' ? 'original-id' : name;\n    }\n    /** Copies allowed attributes from origin to this element */\n    copyAttributesFromOrigin() {\n        const { $origin } = this;\n        if (!$origin)\n            return;\n        this.constructor.allowedAttrs.forEach((name) => {\n            const value = $origin.getAttribute(name);\n            if (value) {\n                this.setAttribute(this.buildAttrName(name), value);\n            }\n        });\n        // sanitize class list of placeholder from the tag name of origin's element\n        this.classList.remove($origin.constructor.is);\n    }\n};\nESLToggleablePlaceholder.is = 'esl-toggleable-placeholder';\n/** List of attributes allowed to copy from origin to this element */\nESLToggleablePlaceholder.allowedAttrs = ['id', 'class'];\nESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = __decorate([\n    ExportNs('ToggleablePlaceholder')\n], ESLToggleablePlaceholder);\nexport { ESLToggleablePlaceholder };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { attr, boolAttr, ESLBaseElement } from '../../esl-base-element/core';\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { ready } from '../../esl-utils/decorators/ready';\nimport { parseNumber } from '../../esl-utils/misc/format';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ENTER, SPACE } from '../../esl-utils/dom/keys';\nimport { TraversingQuery } from '../../esl-traversing-query/core';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { ESLMediaQuery } from '../../esl-media-query/core';\nimport { ESLToggleablePlaceholder } from '../../esl-toggleable/core';\nlet ESLTrigger = class ESLTrigger extends ESLBaseElement {\n    attributeChangedCallback(attrName) {\n        if (!this.connected)\n            return;\n        if (attrName === 'target')\n            return this.updateTargetFromSelector();\n    }\n    /** Target observable Toggleable */\n    get $target() {\n        return this._$target;\n    }\n    set $target(newPopupInstance) {\n        this.unbindEvents();\n        this._$target = newPopupInstance;\n        this.bindEvents();\n        this._onTargetStateChange();\n    }\n    /** Element target to setup aria attributes */\n    get $a11yTarget() {\n        return this.a11yTarget ? this.querySelector(this.a11yTarget) : this;\n    }\n    /** Value to setup aria-label */\n    get a11yLabel() {\n        if (!this.$target)\n            return null;\n        return (this.$target.open ? this.a11yLabelActive : this.a11yLabelInactive) || null;\n    }\n    /** Marker to allow track hover */\n    get allowHover() {\n        return DeviceDetector.hasHover && ESLMediaQuery.for(this.trackHover).matches;\n    }\n    /** Marker to allow track clicks */\n    get allowClick() {\n        return ESLMediaQuery.for(this.trackClick).matches;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.updateTargetFromSelector();\n        this.initA11y();\n    }\n    disconnectedCallback() {\n        this.unbindEvents();\n    }\n    bindEvents() {\n        if (!this.$target)\n            return;\n        this.$target.addEventListener('esl:show', this._onTargetStateChange);\n        this.$target.addEventListener('esl:hide', this._onTargetStateChange);\n        this.addEventListener('click', this._onClick);\n        this.addEventListener('keydown', this._onKeydown);\n        this.addEventListener('mouseenter', this._onMouseEnter);\n        this.addEventListener('mouseleave', this._onMouseLeave);\n    }\n    unbindEvents() {\n        if (!this.$target)\n            return;\n        this.$target.removeEventListener('esl:show', this._onTargetStateChange);\n        this.$target.removeEventListener('esl:hide', this._onTargetStateChange);\n        this.removeEventListener('click', this._onClick);\n        this.removeEventListener('keydown', this._onKeydown);\n        this.removeEventListener('mouseenter', this._onMouseEnter);\n        this.removeEventListener('mouseleave', this._onMouseLeave);\n    }\n    /** Update `$target` Toggleable  from `target` selector */\n    updateTargetFromSelector() {\n        if (!this.target)\n            return;\n        this.$target = TraversingQuery.first(this.target, this);\n        if (this.$target instanceof ESLToggleablePlaceholder && this.$target.$origin) {\n            // change target if it is an instance of the placeholder element\n            this.$target = this.$target.$origin;\n        }\n    }\n    /** Check if the event target should be ignored */\n    isTargetIgnored(target) {\n        if (!target || !(target instanceof HTMLElement) || !this.ignore)\n            return false;\n        const $ignore = target.closest(this.ignore);\n        // Ignore only inner elements (but do not ignore the trigger itself)\n        return !!$ignore && $ignore !== this && this.contains($ignore);\n    }\n    /** Merge params to pass to the toggleable */\n    mergeToggleableParams(...params) {\n        return Object.assign({\n            initiator: 'trigger',\n            activator: this\n        }, ...params);\n    }\n    /** Show target toggleable with passed params */\n    showTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.showDelay)\n        }, params);\n        if (this.$target && typeof this.$target.show === 'function') {\n            this.$target.show(actionParams);\n        }\n    }\n    /** Hide target toggleable with passed params */\n    hideTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.hideDelay)\n        }, params);\n        if (this.$target && typeof this.$target.hide === 'function') {\n            this.$target.hide(actionParams);\n        }\n    }\n    /** Toggles target toggleable with passed params */\n    toggleTarget(params = {}, state = !this.active) {\n        state ? this.showTarget(params) : this.hideTarget(params);\n    }\n    /**\n     * Updates trigger state according to toggleable state\n     * Does not produce `esl:change:active` event\n     */\n    updateState() {\n        var _a;\n        const isActive = !!((_a = this.$target) === null || _a === void 0 ? void 0 : _a.open);\n        const wasActive = this.active;\n        this.toggleAttribute('active', isActive);\n        const clsTarget = TraversingQuery.first(this.activeClassTarget, this);\n        clsTarget && CSSClassUtils.toggle(clsTarget, this.activeClass, isActive);\n        this.updateA11y();\n        return isActive !== wasActive;\n    }\n    /** Handles ESLToggleable state change */\n    _onTargetStateChange(originalEvent) {\n        if (!this.updateState())\n            return;\n        const detail = { active: this.active, originalEvent };\n        this.$$fire('esl:change:active', { detail });\n    }\n    /** Handles `click` event */\n    _onClick(event) {\n        if (!this.allowClick || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        switch (this.mode) {\n            case 'show':\n                return this.showTarget({ event });\n            case 'hide':\n                return this.hideTarget({ event });\n            default:\n                return this.toggleTarget({ event });\n        }\n    }\n    /** Handles `keydown` event */\n    _onKeydown(event) {\n        if (![ENTER, SPACE].includes(event.key) || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        switch (this.mode) {\n            case 'show':\n                return this.showTarget({ event });\n            case 'hide':\n                return this.hideTarget({ event });\n            default:\n                return this.toggleTarget({ event });\n        }\n    }\n    /** Handles hover `mouseenter` event */\n    _onMouseEnter(event) {\n        if (!this.allowHover)\n            return;\n        const delay = parseNumber(this.hoverShowDelay);\n        this.toggleTarget({ event, delay }, this.mode !== 'hide');\n        event.preventDefault();\n    }\n    /** Handles hover `mouseleave` event */\n    _onMouseLeave(event) {\n        if (!this.allowHover)\n            return;\n        if (this.mode === 'show' || this.mode === 'hide')\n            return;\n        const delay = parseNumber(this.hoverHideDelay);\n        this.hideTarget({ event, delay, trackHover: true });\n        event.preventDefault();\n    }\n    /** Set initial a11y attributes. Do nothing if trigger contains actionable element */\n    initA11y() {\n        if (this.$a11yTarget !== this)\n            return;\n        if (!this.hasAttribute('role'))\n            this.setAttribute('role', 'button');\n        if (this.getAttribute('role') === 'button' && !this.hasAttribute('tabindex')) {\n            this.setAttribute('tabindex', '0');\n        }\n    }\n    /** Update aria attributes */\n    updateA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        if (this.a11yLabelActive !== null || this.a11yLabelInactive !== null) {\n            setAttr(target, 'aria-label', this.a11yLabel);\n        }\n        setAttr(target, 'aria-expanded', String(this.active));\n        if (this.$target && this.$target.id) {\n            setAttr(target, 'aria-controls', this.$target.id);\n        }\n    }\n};\nESLTrigger.is = 'esl-trigger';\nESLTrigger.observedAttributes = ['target'];\n__decorate([\n    boolAttr({ readonly: true })\n], ESLTrigger.prototype, \"active\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'a[href]' })\n], ESLTrigger.prototype, \"ignore\", void 0);\n__decorate([\n    attr({ defaultValue: '::next' })\n], ESLTrigger.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'toggle' })\n], ESLTrigger.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'all' })\n], ESLTrigger.prototype, \"trackClick\", void 0);\n__decorate([\n    attr({ defaultValue: 'not all' })\n], ESLTrigger.prototype, \"trackHover\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"a11yTarget\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLTrigger.prototype, \"a11yLabelActive\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLTrigger.prototype, \"a11yLabelInactive\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"showDelay\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"hideDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverShowDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverHideDelay\", void 0);\n__decorate([\n    ready\n], ESLTrigger.prototype, \"connectedCallback\", null);\n__decorate([\n    ready\n], ESLTrigger.prototype, \"disconnectedCallback\", null);\n__decorate([\n    bind\n], ESLTrigger.prototype, \"_onTargetStateChange\", null);\n__decorate([\n    bind\n], ESLTrigger.prototype, \"_onClick\", null);\n__decorate([\n    bind\n], ESLTrigger.prototype, \"_onKeydown\", null);\n__decorate([\n    bind\n], ESLTrigger.prototype, \"_onMouseEnter\", null);\n__decorate([\n    bind\n], ESLTrigger.prototype, \"_onMouseLeave\", null);\nESLTrigger = __decorate([\n    ExportNs('Trigger')\n], ESLTrigger);\nexport { ESLTrigger };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { attr } from '../../esl-utils/decorators/attr';\nimport { setAttr } from '../../esl-utils/dom/attr';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLTrigger } from '../../esl-trigger/core';\n/**\n * ESlTab component\n * @author Julia Murashko\n *\n * Tab trigger item, usually used in conjunction with a {@link ESLTabs}.\n * Can control any {@link ESLToggleable} instance but is usually used in conjunction with {@link ESLPanel}\n */\nlet ESLTab = class ESLTab extends ESLTrigger {\n    initA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        if (target.hasAttribute('role'))\n            return;\n        setAttr(target, 'role', 'tab');\n    }\n    updateA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        if (this.a11yLabelActive !== null || this.a11yLabelInactive !== null) {\n            setAttr(target, 'aria-label', this.a11yLabel);\n        }\n        setAttr(target, 'aria-selected', String(this.active));\n        setAttr(target, 'tabindex', this.active ? '0' : '-1');\n        if (this.$target && this.$target.id) {\n            setAttr(target, 'aria-controls', this.$target.id);\n        }\n    }\n};\nESLTab.is = 'esl-tab';\n__decorate([\n    attr({ defaultValue: 'show' })\n], ESLTab.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'active' })\n], ESLTab.prototype, \"activeClass\", void 0);\nESLTab = __decorate([\n    ExportNs('Tab')\n], ESLTab);\nexport { ESLTab };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLTabs_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement, attr } from '../../esl-base-element/core';\nimport { rafDecorator } from '../../esl-utils/async/raf';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { memoize } from '../../esl-utils/decorators/memoize';\nimport { RTLUtils } from '../../esl-utils/dom/rtl';\nimport { debounce } from '../../esl-utils/async/debounce';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ESLMediaRuleList } from '../../esl-media-query/core/esl-media-rule-list';\nimport { ESLTab } from './esl-tab';\n/**\n * ESlTabs component\n * @author Julia Murashko\n *\n * Tabs container component for Tabs trigger group.\n * Uses {@link ESLTab} as an item.\n * Each individual {@link ESLTab} can control {@link ESLToggleable} or, usually, {@link ESLPanel}\n */\nlet ESLTabs = ESLTabs_1 = class ESLTabs extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._deferredUpdateArrows = debounce(this.updateArrows, 100, this);\n        this._deferredFitToViewport = debounce(this.fitToViewport, 100, this);\n        // TODO: is the raf decorator needed?\n        this._onResize = rafDecorator(() => this._deferredFitToViewport(this.$current, 'auto'));\n    }\n    /** ESLMediaRuleList instance of the scrollable type mapping */\n    get scrollableTypeRules() {\n        return ESLMediaRuleList.parse(this.scrollable);\n    }\n    /** @returns current scrollable type */\n    get currentScrollableType() {\n        return this.scrollableTypeRules.activeValue || '';\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.scrollableTypeRules.addEventListener(this._onScrollableTypeChange);\n        this.updateScrollableType();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.scrollableTypeRules.removeEventListener(this._onScrollableTypeChange);\n        this.unbindScrollableEvents();\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        if (attrName === 'scrollable') {\n            this.scrollableTypeRules.removeEventListener(this._onScrollableTypeChange);\n            memoize.clear(this, 'scrollableTypeRules');\n            this.scrollableTypeRules.addEventListener(this._onScrollableTypeChange);\n            this.updateScrollableType();\n        }\n    }\n    bindScrollableEvents() {\n        var _a;\n        this.addEventListener('esl:change:active', this._onTriggerStateChange);\n        this.addEventListener('click', this._onClick, false);\n        this.addEventListener('focusin', this._onFocus);\n        (_a = this.$scrollableTarget) === null || _a === void 0 ? void 0 : _a.addEventListener('scroll', this._onScroll, { passive: true });\n        window.addEventListener('resize', this._onResize);\n    }\n    unbindScrollableEvents() {\n        var _a;\n        this.removeEventListener('esl:change:active', this._onTriggerStateChange);\n        this.removeEventListener('click', this._onClick, false);\n        this.removeEventListener('focusin', this._onFocus);\n        (_a = this.$scrollableTarget) === null || _a === void 0 ? void 0 : _a.removeEventListener('scroll', this._onScroll);\n        window.removeEventListener('resize', this._onResize);\n    }\n    /** Collection of inner {@link ESLTab} items */\n    get $tabs() {\n        const els = this.querySelectorAll(ESLTab.is);\n        return els ? Array.from(els) : [];\n    }\n    /** Active {@link ESLTab} item */\n    get $current() {\n        return this.$tabs.find((el) => el.active) || null;\n    }\n    /** Container element to scroll */\n    get $scrollableTarget() {\n        return this.querySelector(this.scrollableTarget);\n    }\n    /** Is the scrollable mode enabled ? */\n    get isScrollable() {\n        return this.currentScrollableType !== 'disabled';\n    }\n    /** Move scroll to the next/previous item */\n    moveTo(direction, behavior = 'smooth') {\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget)\n            return;\n        let left = $scrollableTarget.offsetWidth;\n        left = RTLUtils.isRtl(this) && RTLUtils.scrollType !== 'reverse' ? -left : left;\n        left = direction === 'left' ? -left : left;\n        $scrollableTarget.scrollBy({ left, behavior });\n    }\n    /** Scroll tab to the view */\n    fitToViewport($trigger, behavior = 'smooth') {\n        this.updateMarkers();\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget || !$trigger)\n            return;\n        const areaRect = $scrollableTarget.getBoundingClientRect();\n        const itemRect = $trigger.getBoundingClientRect();\n        $scrollableTarget.scrollBy({\n            left: this.calcScrollOffset(itemRect, areaRect),\n            behavior\n        });\n        this.updateArrows();\n    }\n    /** Get scroll offset position from the selected item rectangle */\n    calcScrollOffset(itemRect, areaRect) {\n        const isReversedRTL = RTLUtils.isRtl(this) && RTLUtils.scrollType === 'reverse';\n        if (this.currentScrollableType === 'center') {\n            const shift = itemRect.left + itemRect.width / 2 - (areaRect.left + areaRect.width / 2);\n            return isReversedRTL ? -shift : shift;\n        }\n        // item is out of area from the right side\n        // else item out is of area from the left side\n        if (itemRect.right > areaRect.right) {\n            return isReversedRTL ? Math.floor(areaRect.right - itemRect.right) : Math.ceil(itemRect.right - areaRect.right);\n        }\n        else if (itemRect.left < areaRect.left) {\n            return isReversedRTL ? Math.ceil(areaRect.left - itemRect.left) : Math.floor(itemRect.left - areaRect.left);\n        }\n    }\n    updateArrows() {\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget)\n            return;\n        const swapSides = RTLUtils.isRtl(this) && RTLUtils.scrollType === 'default';\n        const scrollStart = Math.abs($scrollableTarget.scrollLeft) > 1;\n        const scrollEnd = Math.abs($scrollableTarget.scrollLeft) + $scrollableTarget.clientWidth + 1 < $scrollableTarget.scrollWidth;\n        const $rightArrow = this.querySelector('[data-tab-direction=\"right\"]');\n        const $leftArrow = this.querySelector('[data-tab-direction=\"left\"]');\n        $leftArrow && $leftArrow.toggleAttribute('disabled', !(swapSides ? scrollEnd : scrollStart));\n        $rightArrow && $rightArrow.toggleAttribute('disabled', !(swapSides ? scrollStart : scrollEnd));\n    }\n    updateMarkers() {\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget)\n            return;\n        const hasScroll = this.isScrollable && ($scrollableTarget.scrollWidth > this.clientWidth);\n        this.toggleAttribute('has-scroll', hasScroll);\n    }\n    /** Update element state according to scrollable type */\n    updateScrollableType() {\n        ESLTabs_1.supportedScrollableTypes.forEach((type) => {\n            CSSClassUtils.toggle(this, `${type}-alignment`, this.currentScrollableType === type);\n        });\n        this._deferredFitToViewport(this.$current);\n        if (this.currentScrollableType === 'disabled') {\n            this.unbindScrollableEvents();\n        }\n        else {\n            this.bindScrollableEvents();\n        }\n    }\n    _onTriggerStateChange({ detail }) {\n        if (!detail.active)\n            return;\n        this._deferredFitToViewport(this.$current);\n    }\n    _onClick(event) {\n        const eventTarget = event.target;\n        const target = eventTarget.closest('[data-tab-direction]');\n        const direction = target && target.dataset.tabDirection;\n        if (!direction)\n            return;\n        this.moveTo(direction);\n    }\n    _onFocus(e) {\n        const target = e.target;\n        if (target instanceof ESLTab)\n            this._deferredFitToViewport(target);\n    }\n    _onScroll() {\n        this._deferredUpdateArrows();\n    }\n    /** Handles scrollable type change */\n    _onScrollableTypeChange() {\n        this.updateScrollableType();\n    }\n};\nESLTabs.is = 'esl-tabs';\nESLTabs.observedAttributes = ['scrollable'];\n/** List of supported scrollable types */\nESLTabs.supportedScrollableTypes = ['disabled', 'side', 'center'];\n__decorate([\n    attr({ defaultValue: 'disabled' })\n], ESLTabs.prototype, \"scrollable\", void 0);\n__decorate([\n    attr({ defaultValue: '.esl-tab-container' })\n], ESLTabs.prototype, \"scrollableTarget\", void 0);\n__decorate([\n    memoize()\n], ESLTabs.prototype, \"scrollableTypeRules\", null);\n__decorate([\n    bind\n], ESLTabs.prototype, \"_onTriggerStateChange\", null);\n__decorate([\n    bind\n], ESLTabs.prototype, \"_onClick\", null);\n__decorate([\n    bind\n], ESLTabs.prototype, \"_onFocus\", null);\n__decorate([\n    bind\n], ESLTabs.prototype, \"_onScroll\", null);\n__decorate([\n    bind\n], ESLTabs.prototype, \"_onScrollableTypeChange\", null);\nESLTabs = ESLTabs_1 = __decorate([\n    ExportNs('Tabs')\n], ESLTabs);\nexport { ESLTabs };\n","/**\n * Task placeholder with a single place for executing deferred task.\n * Only one task can be planed per DelayedTask instance.\n * @see put DelayedTask.put behaviour description.\n */\nexport class DelayedTask {\n    constructor() {\n        this._fn = null;\n        this._timeout = null;\n        /** Execute deferred task immediately */\n        this.run = () => {\n            this._timeout = null;\n            this._fn && this._fn();\n        };\n    }\n    /** @returns Function of currently deferred (planned) task */\n    get fn() {\n        return this._fn;\n    }\n    /**\n     * Cancel deferred task and planning passed\n     * @param task - task function\n     * @param delay - time to delay task execution\n     *  - pass negative or false to execute task immediately\n     *  - pass 0 to plan task to the macrotask\n     *  - pass positive number x to delay task on x ms.\n     * */\n    put(task, delay = false) {\n        const prev = this.cancel();\n        if (typeof task === 'function') {\n            if (delay && typeof delay === 'string')\n                delay = +delay;\n            if (typeof delay === 'number' && delay >= 0) {\n                this._fn = task;\n                this._timeout = window.setTimeout(this.run, delay);\n            }\n            else {\n                task();\n            }\n        }\n        return prev;\n    }\n    /** Cancel deferred (planned) task */\n    cancel() {\n        const prev = this._fn;\n        (typeof this._timeout === 'number') && clearTimeout(this._timeout);\n        this._fn = this._timeout = null;\n        return prev;\n    }\n}\n","import { getAttr, setAttr } from '../dom/attr';\nimport { toKebabCase, evaluate } from '../misc/format';\nfunction buildJsonAttrDescriptor(attrName, readOnly, defaultValue) {\n    function get() {\n        const attrContent = getAttr(this, attrName, '').trim();\n        return evaluate(attrContent, defaultValue);\n    }\n    function set(value) {\n        try {\n            if (typeof value !== 'object')\n                throw Error('value should be object');\n            setAttr(this, attrName, value ? JSON.stringify(value) : false);\n        }\n        catch (e) {\n            console.error('[ESL] jsonAttr: Can not set json value ', e);\n        }\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value using JSON (de-)serialization rules.\n * Maps object type property.\n * @param config - mapping configuration. See {@link JsonAttrDescriptor}\n */\nexport const jsonAttr = (config = {}) => {\n    config = Object.assign({ defaultValue: {} }, config);\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildJsonAttrDescriptor(attrName, !!config.readonly, config.defaultValue));\n    };\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLToggleable_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESC, SYSTEM_KEYS } from '../../esl-utils/dom/keys';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { defined, copyDefinedKeys } from '../../esl-utils/misc/object';\nimport { sequentialUID } from '../../esl-utils/misc/uid';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { DelayedTask } from '../../esl-utils/async/delayed-task';\nimport { ESLBaseElement, attr, jsonAttr, boolAttr } from '../../esl-base-element/core';\nimport { isMatches } from '../../esl-utils/dom/traversing';\nconst activators = new WeakMap();\n/**\n * ESLToggleable component\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleable - a custom element, that is used as a base for \"Popup-like\" components creation\n */\nlet ESLToggleable = ESLToggleable_1 = class ESLToggleable extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        /** Inner state */\n        this._open = false;\n        /** Inner show/hide task manager instance */\n        this._task = new DelayedTask();\n        /** Marker for current hover listener state */\n        this._trackHover = false;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (!this.id && !this.noAutoId) {\n            const tag = this.constructor.is;\n            this.id = sequentialUID(tag, tag + '-');\n        }\n        this.initiallyOpened = this.hasAttribute('open');\n        this.bindEvents();\n        this.setInitialState();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.unbindEvents();\n        activators.delete(this);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || newVal === oldVal)\n            return;\n        switch (attrName) {\n            case 'open':\n                if (this.open === this.hasAttribute('open'))\n                    return;\n                this.toggle(this.open, { initiator: 'attribute', showDelay: 0, hideDelay: 0 });\n                break;\n            case 'group':\n                this.$$fire('esl:change:group', {\n                    detail: { oldGroupName: oldVal, newGroupName: newVal }\n                });\n                break;\n        }\n    }\n    /** Set initial state of the Toggleable */\n    setInitialState() {\n        if (this.initialParams) {\n            this.toggle(this.initiallyOpened, this.initialParams);\n        }\n    }\n    bindEvents() {\n        this.addEventListener('click', this._onClick);\n        this.addEventListener('keydown', this._onKeyboardEvent);\n        this.addEventListener('esl:show:request', this._onShowRequest);\n    }\n    unbindEvents() {\n        this.removeEventListener('click', this._onClick);\n        this.removeEventListener('keydown', this._onKeyboardEvent);\n        this.removeEventListener('esl:show:request', this._onShowRequest);\n        this.bindOutsideEventTracking(false);\n        this.bindHoverStateTracking(false);\n    }\n    /** Bind outside action event listeners */\n    bindOutsideEventTracking(track) {\n        document.body.removeEventListener('keydown', this._onOutsideAction, true);\n        document.body.removeEventListener('mouseup', this._onOutsideAction, true);\n        document.body.removeEventListener('touchend', this._onOutsideAction, true);\n        if (track) {\n            document.body.addEventListener('keydown', this._onOutsideAction, true);\n            document.body.addEventListener('mouseup', this._onOutsideAction, true);\n            document.body.addEventListener('touchend', this._onOutsideAction, true);\n        }\n    }\n    /** Bind hover events listeners for the Toggleable itself */\n    bindHoverStateTracking(track, hideDelay) {\n        if (!DeviceDetector.hasHover)\n            return;\n        this._trackHoverDelay = track && hideDelay !== undefined ? +hideDelay : undefined;\n        if (this._trackHover === track)\n            return;\n        this._trackHover = track;\n        this.removeEventListener('mouseenter', this._onMouseEnter);\n        this.removeEventListener('mouseleave', this._onMouseLeave);\n        if (this._trackHover) {\n            this.addEventListener('mouseenter', this._onMouseEnter);\n            this.addEventListener('mouseleave', this._onMouseLeave);\n        }\n    }\n    /** Function to merge the result action params */\n    mergeDefaultParams(params) {\n        return Object.assign({}, this.defaultParams, copyDefinedKeys(params));\n    }\n    /** Toggle the element state */\n    toggle(state = !this.open, params) {\n        return state ? this.show(params) : this.hide(params);\n    }\n    /** Change the element state to active */\n    show(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.showTask.bind(this, params), defined(params.showDelay, params.delay));\n        this.bindOutsideEventTracking(this.closeOnOutsideAction);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Change the element state to inactive */\n    hide(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.hideTask.bind(this, params), defined(params.hideDelay, params.delay));\n        this.bindOutsideEventTracking(false);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Actual show task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    showTask(params) {\n        if (!params.force && this.open)\n            return;\n        if (!params.silent && !this.$$fire('esl:before:show', { detail: { params } }))\n            return;\n        this.activator = params.activator;\n        this.open = true;\n        this.onShow(params);\n        if (!params.silent)\n            this.$$fire('esl:show', { detail: { params }, cancelable: false });\n    }\n    /** Actual hide task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    hideTask(params) {\n        if (!params.force && !this.open)\n            return;\n        if (!params.silent && !this.$$fire('esl:before:hide', { detail: { params } }))\n            return;\n        this.open = false;\n        this.onHide(params);\n        this.bindOutsideEventTracking(false);\n        if (!params.silent)\n            this.$$fire('esl:hide', { detail: { params }, cancelable: false });\n    }\n    /**\n     * Actions to execute on show toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Adds CSS classes, update a11y and fire {@link ESLToggleable.REFRESH_EVENT} event by default.\n     */\n    onShow(params) {\n        CSSClassUtils.add(this, this.activeClass);\n        CSSClassUtils.add(document.body, this.bodyClass, this);\n        this.updateA11y();\n        this.$$fire(this.REFRESH_EVENT); // To notify other components about content change\n    }\n    /**\n     * Actions to execute on hide toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Removes CSS classes and update a11y by default.\n     */\n    onHide(params) {\n        CSSClassUtils.remove(this, this.activeClass);\n        CSSClassUtils.remove(document.body, this.bodyClass, this);\n        this.updateA11y();\n    }\n    /** Active state marker */\n    get open() {\n        return this._open;\n    }\n    set open(value) {\n        this.toggleAttribute('open', this._open = value);\n    }\n    /** Last component that has activated the element. Uses {@link ToggleableActionParams.activator}*/\n    get activator() {\n        return activators.get(this);\n    }\n    set activator(el) {\n        el ? activators.set(this, el) : activators.delete(this);\n    }\n    /** Returns the element to apply a11y attributes */\n    get $a11yTarget() {\n        const target = this.getAttribute('a11y-target');\n        if (target === 'none')\n            return null;\n        return target ? this.querySelector(target) : this;\n    }\n    /** Called on show and on hide actions to update a11y state accordingly */\n    updateA11y() {\n        const targetEl = this.$a11yTarget;\n        if (!targetEl)\n            return;\n        targetEl.setAttribute('aria-hidden', String(!this._open));\n    }\n    /** @returns if the passed event should trigger hide action */\n    isOutsideAction(e) {\n        const target = e.target;\n        // target is inside current toggleable\n        if (this.contains(target))\n            return false;\n        // target is inside last activator\n        if (this.activator && this.activator.contains(target))\n            return false;\n        // Event is not a system command key\n        return !(e instanceof KeyboardEvent && SYSTEM_KEYS.includes(e.key));\n    }\n    _onClick(e) {\n        const target = e.target;\n        if (this.closeTrigger && target.closest(this.closeTrigger)) {\n            this.hide({ initiator: 'close', activator: target, event: e });\n        }\n    }\n    _onOutsideAction(e) {\n        if (!this.isOutsideAction(e))\n            return;\n        // Used 0 delay to decrease priority of the request\n        this.hide({ initiator: 'outsideaction', hideDelay: 0, event: e });\n    }\n    _onKeyboardEvent(e) {\n        if (this.closeOnEsc && e.key === ESC) {\n            this.hide({ initiator: 'keyboard', event: e });\n        }\n    }\n    _onMouseEnter(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = { initiator: 'mouseenter', trackHover: true, activator: this.activator, event: e, hideDelay };\n        this.show(Object.assign(baseParams, this.trackHoverParams));\n    }\n    _onMouseLeave(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = { initiator: 'mouseleave', trackHover: true, activator: this.activator, event: e, hideDelay };\n        this.hide(Object.assign(baseParams, this.trackHoverParams));\n    }\n    /** Actions to execute on show request */\n    _onShowRequest(e) {\n        const detail = e.detail;\n        if (isMatches(this, detail === null || detail === void 0 ? void 0 : detail.ignore))\n            return;\n        const params = { event: e };\n        if (detail && typeof detail.delay === 'number')\n            Object.assign(params, { showDelay: detail.delay });\n        if (detail && typeof detail.params === 'object')\n            Object.assign(params, detail.params || {});\n        this.show(params);\n    }\n};\nESLToggleable.is = 'esl-toggleable';\nESLToggleable.observedAttributes = ['open', 'group'];\n__decorate([\n    attr()\n], ESLToggleable.prototype, \"bodyClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'open' })\n], ESLToggleable.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ name: 'group' })\n], ESLToggleable.prototype, \"groupName\", void 0);\n__decorate([\n    attr({ name: 'close-on' })\n], ESLToggleable.prototype, \"closeTrigger\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"noAutoId\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { force: true, initiator: 'init' } })\n], ESLToggleable.prototype, \"initialParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"defaultParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"trackHoverParams\", void 0);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onClick\", null);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onOutsideAction\", null);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onKeyboardEvent\", null);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onMouseEnter\", null);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onMouseLeave\", null);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onShowRequest\", null);\nESLToggleable = ESLToggleable_1 = __decorate([\n    ExportNs('Toggleable')\n], ESLToggleable);\nexport { ESLToggleable };\n","/** Makes a plain copy of obj with properties satisfying the predicate\n * If no predicate provided copies all own properties */\nexport function copy(obj, predicate = () => true) {\n    const result = Object.assign({}, obj || {});\n    Object.keys(result).forEach((key) => {\n        (!predicate(key, result[key])) && delete result[key];\n    });\n    return result;\n}\n/** Makes a flat copy without undefined keys */\nexport function copyDefinedKeys(obj) {\n    return copy(obj || {}, (key, value) => value !== void 0);\n}\n/** Omits copying provided properties from object */\nexport function omit(obj, keys) {\n    return copy(obj, key => !keys.includes(key));\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { getCompositeTarget } from '../../esl-utils/dom/events';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLToggleable } from './esl-toggleable';\n/**\n * ESLToggleableDispatcher\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleableDispatcher - plugin component, that prevents activation of multiple ESLToggleable instances in bounds of managed container.\n */\nlet ESLToggleableDispatcher = class ESLToggleableDispatcher extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._popups = new Map();\n    }\n    /**\n     * Initialize ToggleableGroupDispatcher\n     * Uses esl-toggleable-dispatcher tag and document body root by default\n     */\n    static init(root = document.body, tagName = this.is) {\n        if (!root)\n            throw new Error('Root element should be specified');\n        const instances = root.getElementsByTagName(tagName);\n        if (instances.length)\n            return;\n        this.register(tagName);\n        root.insertAdjacentElement('afterbegin', document.createElement(tagName));\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.root = this.parentElement;\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.root = null;\n    }\n    bindEvents() {\n        if (!this.root)\n            return;\n        this.root.addEventListener('esl:before:show', this._onBeforeShow);\n        this.root.addEventListener('esl:show', this._onShow);\n        this.root.addEventListener('esl:hide', this._onHide);\n        this.root.addEventListener('esl:change:group', this._onChangeGroup);\n    }\n    unbindEvents() {\n        if (!this.root)\n            return;\n        this.root.removeEventListener('esl:before:show', this._onBeforeShow);\n        this.root.removeEventListener('esl:show', this._onShow);\n        this.root.removeEventListener('esl:hide', this._onHide);\n        this.root.removeEventListener('esl:change:group', this._onChangeGroup);\n    }\n    /** Observed element */\n    get root() {\n        return this._root;\n    }\n    set root(root) {\n        this.unbindEvents();\n        this._root = root;\n        this.bindEvents();\n    }\n    /** Guard-condition for targets */\n    isAcceptable(target) {\n        if (!(target instanceof ESLToggleable))\n            return false;\n        return !!target.groupName && target.groupName !== 'none';\n    }\n    /** Hides active element in group */\n    hideActive(groupName, activator) {\n        const active = this.getActive(groupName);\n        if (!active || active === activator)\n            return;\n        active.hide({\n            initiator: 'dispatcher',\n            dispatcher: this,\n            activator\n        });\n    }\n    /** Sets active element in group */\n    setActive(groupName, popup) {\n        if (!groupName)\n            return;\n        this.hideActive(groupName, popup);\n        this._popups.set(groupName, popup);\n    }\n    /** Gets active element in group or undefined if group doesn't exist */\n    getActive(groupName) {\n        return this._popups.get(groupName);\n    }\n    /** Deletes element from the group if passed element is currently active */\n    deleteActive(groupName, popup) {\n        if (this.getActive(groupName) !== popup)\n            return;\n        this._popups.delete(groupName);\n    }\n    /** Hides active element before e.target will be shown */\n    _onBeforeShow(e) {\n        const target = getCompositeTarget(e);\n        if (!this.isAcceptable(target))\n            return;\n        this.hideActive(target.groupName, target);\n    }\n    /** Updates active element after a new element is shown */\n    _onShow(e) {\n        const target = getCompositeTarget(e);\n        if (!this.isAcceptable(target))\n            return;\n        this.setActive(target.groupName, target);\n    }\n    /** Updates group state after active element is hidden */\n    _onHide(e) {\n        const target = getCompositeTarget(e);\n        if (!this.isAcceptable(target))\n            return;\n        this.deleteActive(target.groupName, target);\n    }\n    /** Updates active elements */\n    _onChangeGroup(e) {\n        const target = getCompositeTarget(e);\n        if (!this.isAcceptable(target))\n            return;\n        const { oldGroupName, newGroupName } = e.detail;\n        this.deleteActive(oldGroupName, target);\n        this.setActive(newGroupName, target);\n    }\n};\nESLToggleableDispatcher.is = 'esl-toggleable-dispatcher';\n__decorate([\n    bind\n], ESLToggleableDispatcher.prototype, \"_onBeforeShow\", null);\n__decorate([\n    bind\n], ESLToggleableDispatcher.prototype, \"_onShow\", null);\n__decorate([\n    bind\n], ESLToggleableDispatcher.prototype, \"_onHide\", null);\n__decorate([\n    bind\n], ESLToggleableDispatcher.prototype, \"_onChangeGroup\", null);\nESLToggleableDispatcher = __decorate([\n    ExportNs('ToggleableDispatcher')\n], ESLToggleableDispatcher);\nexport { ESLToggleableDispatcher };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { afterNextRender } from '../../esl-utils/async/raf';\nimport { attr, boolAttr, jsonAttr } from '../../esl-base-element/core';\nimport { ESLToggleable } from '../../esl-toggleable/core';\nimport { ESLPanelGroup } from '../../esl-panel-group/core';\n/**\n * ESLPanel component\n * @author Julia Murashko\n *\n * ESLPanel is a custom element that is used as a wrapper for content that can be shown or hidden.\n * Can use collapsing/expanding animation (smooth height change).\n * Can be used in conjunction with {@link ESLPanelGroup} to control a group of ESLPopups\n */\nlet ESLPanel = class ESLPanel extends ESLToggleable {\n    constructor() {\n        super(...arguments);\n        /** Inner height state that updates after show/hide actions but before show/hide events triggered */\n        this._initialHeight = 0;\n    }\n    /** @returns Previous active panel height at the start of the animation */\n    get initialHeight() {\n        return this._initialHeight;\n    }\n    /** @returns Closest panel group or null if not presented */\n    get $group() {\n        if (this.groupName === 'none' || this.groupName)\n            return null;\n        return this.closest(ESLPanelGroup.is);\n    }\n    bindEvents() {\n        super.bindEvents();\n        this.addEventListener('transitionend', this._onTransitionEnd);\n    }\n    unbindEvents() {\n        super.unbindEvents();\n        this.removeEventListener('transitionend', this._onTransitionEnd);\n    }\n    /** Process show action */\n    onShow(params) {\n        this._initialHeight = this.scrollHeight;\n        super.onShow(params);\n        this.beforeAnimate();\n        if (params.noAnimate) {\n            if (params.capturedBy)\n                return;\n            afterNextRender(() => this.afterAnimate());\n        }\n        else {\n            this.onAnimate(0, this._initialHeight);\n        }\n    }\n    /** Process hide action */\n    onHide(params) {\n        this._initialHeight = this.scrollHeight;\n        super.onHide(params);\n        this.beforeAnimate();\n        if (params.noAnimate) {\n            afterNextRender(() => this.afterAnimate());\n        }\n        else {\n            this.onAnimate(this._initialHeight, 0);\n        }\n    }\n    /** Pre-processing animation action */\n    beforeAnimate() {\n        this.toggleAttribute('animating', true);\n        CSSClassUtils.add(this, this.animateClass);\n        this.postAnimateClass && afterNextRender(() => CSSClassUtils.add(this, this.postAnimateClass));\n    }\n    /** Process animation */\n    onAnimate(from, to) {\n        // set initial height\n        this.style.setProperty('max-height', `${from}px`);\n        // make sure that browser applies initial height for animation\n        afterNextRender(() => {\n            this.style.setProperty('max-height', `${to}px`);\n            this.fallbackAnimate();\n        });\n    }\n    /** Checks if transition happens and runs afterAnimate step if transition is not presented*/\n    fallbackAnimate() {\n        afterNextRender(() => {\n            const distance = parseFloat(this.style.maxHeight) - this.clientHeight;\n            if (Math.abs(distance) <= 1)\n                this.afterAnimate();\n        });\n    }\n    /** Post-processing animation action */\n    afterAnimate() {\n        const { animating } = this;\n        this.clearAnimation();\n        // Prevent fallback calls from being tracked\n        if (!animating)\n            return;\n        this.$$fire(this.open ? 'esl:after:show' : 'esl:after:hide');\n    }\n    /** Clear animation properties */\n    clearAnimation() {\n        this.toggleAttribute('animating', false);\n        this.style.removeProperty('max-height');\n        CSSClassUtils.remove(this, this.animateClass);\n        CSSClassUtils.remove(this, this.postAnimateClass);\n    }\n    /** Catching CSS transition end event to start post-animate processing */\n    _onTransitionEnd(e) {\n        if (!e || (e.propertyName === 'max-height' && e.target === this)) {\n            this.afterAnimate();\n        }\n    }\n    /** Merge params that are used by panel group for actions */\n    mergeDefaultParams(params) {\n        var _a;\n        const stackConfig = ((_a = this.$group) === null || _a === void 0 ? void 0 : _a.panelConfig) || {};\n        return Object.assign({}, stackConfig, this.defaultParams, params || {});\n    }\n};\nESLPanel.is = 'esl-panel';\n__decorate([\n    attr({ defaultValue: 'open' })\n], ESLPanel.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'animate' })\n], ESLPanel.prototype, \"animateClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'post-animate' })\n], ESLPanel.prototype, \"postAnimateClass\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { force: true, initiator: 'init' } })\n], ESLPanel.prototype, \"initialParams\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLPanel.prototype, \"animating\", void 0);\n__decorate([\n    bind\n], ESLPanel.prototype, \"_onTransitionEnd\", null);\nESLPanel = __decorate([\n    ExportNs('Panel')\n], ESLPanel);\nexport { ESLPanel };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLPanelGroup_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { attr, jsonAttr, ESLBaseElement } from '../../esl-base-element/core';\nimport { afterNextRender } from '../../esl-utils/async/raf';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { format } from '../../esl-utils/misc/format';\nimport { memoize } from '../../esl-utils/decorators/memoize';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ESLMediaRuleList } from '../../esl-media-query/core';\nimport { TraversingQuery } from '../../esl-traversing-query/core';\nimport { ESLPanel } from '../../esl-panel/core';\n/**\n * ESLPanelGroup component\n * @author Julia Murashko\n *\n * ESLPanelGroup is a custom element that is used as a container for a group of {@link ESLPanel}s\n */\nlet ESLPanelGroup = ESLPanelGroup_1 = class ESLPanelGroup extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        /** Height of previous active panel */\n        this._previousHeight = 0;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.bindEvents();\n        this.modeRules.addEventListener(this._onModeChange);\n        this.updateMode();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.modeRules.removeEventListener(this._onModeChange);\n        this.unbindEvents();\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        if (attrName === 'mode') {\n            this.modeRules.removeEventListener(this._onModeChange);\n            memoize.clear(this, 'modeRules');\n            this.modeRules.addEventListener(this._onModeChange);\n            this.updateMode();\n        }\n        if (attrName === 'accordion-group') {\n            if (newVal !== 'single' && newVal !== 'multiple') {\n                this.accordionGroup = oldVal;\n                return;\n            }\n            this.reset();\n        }\n    }\n    bindEvents() {\n        this.addEventListener('esl:before:show', this._onBeforeShow);\n        this.addEventListener('esl:show', this._onShow);\n        this.addEventListener('esl:before:hide', this._onBeforeHide);\n        this.addEventListener('transitionend', this._onTransitionEnd);\n    }\n    unbindEvents() {\n        this.removeEventListener('esl:before:show', this._onBeforeShow);\n        this.removeEventListener('esl:show', this._onShow);\n        this.removeEventListener('esl:before:hide', this._onBeforeHide);\n        this.removeEventListener('transitionend', this._onTransitionEnd);\n    }\n    /** Updates element state according to current mode */\n    updateMode() {\n        const prevMode = this.getAttribute('current-mode');\n        const currentMode = this.currentMode;\n        this.setAttribute('current-mode', currentMode);\n        this.updateModeCls();\n        this.reset();\n        if (prevMode !== currentMode) {\n            this.$$fire('esl:change:mode', { detail: { prevMode, currentMode } });\n        }\n    }\n    /** Updates mode class marker */\n    updateModeCls() {\n        const { modeCls, currentMode } = this;\n        if (!modeCls)\n            return;\n        const $target = TraversingQuery.first(this.modeClsTarget, this);\n        if (!$target)\n            return;\n        ESLPanelGroup_1.supportedModes.forEach((mode) => {\n            const className = format(modeCls, { mode });\n            $target.classList.toggle(className, currentMode === mode);\n        });\n    }\n    /** @returns ESLMediaRuleList instance of the mode mapping */\n    get modeRules() {\n        return ESLMediaRuleList.parse(this.mode);\n    }\n    /** @returns current mode */\n    get currentMode() {\n        return this.modeRules.activeValue || '';\n    }\n    /** @returns panels that are processed by the current panel group */\n    get $panels() {\n        const els = Array.from(this.querySelectorAll(ESLPanel.is));\n        return els.filter((el) => this.includesPanel(el));\n    }\n    /** @returns panels that are active */\n    get $activePanels() {\n        return this.$panels.filter((el) => el.open);\n    }\n    /** @returns whether the collapse/expand animation should be handheld by the group */\n    get shouldAnimate() {\n        const noAnimateModes = this.noAnimate.split(',').map((mode) => mode.trim());\n        return !noAnimateModes.includes('all') && !noAnimateModes.includes(this.currentMode);\n    }\n    /** @returns action params config that's used (inherited) by controlled {@link ESLPanel}s */\n    get panelConfig() {\n        return {\n            capturedBy: this.currentMode === 'tabs' ? this : undefined,\n            noAnimate: !this.shouldAnimate || (this.currentMode === 'tabs')\n        };\n    }\n    /** @returns merged panel action params for show/hide requests from the group */\n    mergeActionParams(...params) {\n        return Object.assign({ initiator: 'group', activator: this }, ...params);\n    }\n    /** Condition-guard to check if the passed target is a Panel that should be controlled by the Group */\n    includesPanel(target) {\n        if (!(target instanceof ESLPanel))\n            return false;\n        return target.$group === this;\n    }\n    /** Shows all panels besides excluded ones */\n    showAll(excluded = [], params = {}) {\n        this.$panels.forEach((el) => !excluded.includes(el) && el.show(this.mergeActionParams(params)));\n    }\n    /** Hides all active panels besides excluded ones */\n    hideAll(excluded = [], params = {}) {\n        this.$activePanels.forEach((el) => !excluded.includes(el) && el.hide(this.mergeActionParams(params)));\n    }\n    /** Toggles all panels by predicate */\n    toggleAllBy(shouldOpen, params = {}) {\n        this.$panels.forEach((panel) => panel.toggle(shouldOpen(panel), this.mergeActionParams(params)));\n    }\n    /** Resets to default state applicable to the current mode */\n    reset() {\n        ESLPanel.registered.then(() => {\n            if (this.currentMode === 'open')\n                this.toggleAllBy(() => true, this.transformParams);\n            if (this.currentMode === 'tabs' || (this.currentMode === 'accordion' && this.accordionGroup === 'single')) {\n                const $activePanel = this.$panels.find((panel) => panel.initiallyOpened);\n                this.toggleAllBy((panel) => panel === $activePanel, this.transformParams);\n            }\n            if (this.currentMode === 'accordion' && this.accordionGroup === 'multiple') {\n                this.toggleAllBy((panel) => panel.initiallyOpened, this.transformParams);\n            }\n        });\n    }\n    /** Animates the height of the component */\n    onAnimate(from, to) {\n        const hasCurrent = this.style.height && this.style.height !== 'auto';\n        if (hasCurrent) {\n            this.style.height = `${to}px`;\n            this.fallbackAnimate();\n        }\n        else {\n            // set initial height\n            this.style.height = `${from}px`;\n            // make sure that browser applies initial height to animate\n            afterNextRender(() => {\n                this.style.height = `${to}px`;\n                this.fallbackAnimate();\n            });\n        }\n    }\n    /** Checks if transition happens and runs afterAnimate step if transition is not presented */\n    fallbackAnimate() {\n        afterNextRender(() => {\n            const distance = parseFloat(this.style.height) - this.clientHeight;\n            if (Math.abs(distance) <= 1)\n                this.afterAnimate();\n        });\n    }\n    /** Pre-processing animation action */\n    beforeAnimate() {\n        CSSClassUtils.add(this, this.animationClass);\n    }\n    /** Post-processing animation action */\n    afterAnimate(silent) {\n        this.style.removeProperty('height');\n        CSSClassUtils.remove(this, this.animationClass);\n        if (silent)\n            return;\n        this.$activePanels.forEach((panel) => panel.$$fire('esl:after:show'));\n    }\n    /** Process {@link ESLPanel} pre-show event */\n    _onBeforeShow(e) {\n        const panel = e.target;\n        if (!this.includesPanel(panel))\n            return;\n        if (this.currentMode === 'accordion' && this.accordionGroup === 'multiple')\n            return;\n        this.hideAll([panel]);\n    }\n    /** Process {@link ESLPanel} show event */\n    _onShow(e) {\n        const panel = e.target;\n        if (!this.includesPanel(panel))\n            return;\n        if (this.currentMode !== 'tabs')\n            return;\n        this.beforeAnimate();\n        if (this.shouldAnimate) {\n            this.onAnimate(this._previousHeight, panel.initialHeight);\n        }\n        else {\n            afterNextRender(() => this.afterAnimate(true));\n        }\n    }\n    /** Process {@link ESLPanel} pre-hide event */\n    _onBeforeHide(e) {\n        const panel = e.target;\n        if (!this.includesPanel(panel))\n            return;\n        if (this.currentMode === 'open') {\n            // TODO: refactor\n            e.preventDefault();\n            return;\n        }\n        this._previousHeight = this.clientHeight;\n    }\n    /** Catches CSS transition end event to start post-animate processing */\n    _onTransitionEnd(e) {\n        if (!e || (e.propertyName === 'height' && e.target === this)) {\n            this.afterAnimate();\n        }\n    }\n    /** Handles mode change */\n    _onModeChange() {\n        this.updateMode();\n    }\n};\nESLPanelGroup.is = 'esl-panel-group';\nESLPanelGroup.observedAttributes = ['mode', 'accordion-group'];\n/** List of supported modes */\nESLPanelGroup.supportedModes = ['tabs', 'accordion', 'open'];\n__decorate([\n    attr({ defaultValue: 'accordion' })\n], ESLPanelGroup.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'esl-{mode}-view' })\n], ESLPanelGroup.prototype, \"modeCls\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLPanelGroup.prototype, \"modeClsTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'animate' })\n], ESLPanelGroup.prototype, \"animationClass\", void 0);\n__decorate([\n    attr()\n], ESLPanelGroup.prototype, \"noAnimate\", void 0);\n__decorate([\n    attr({ defaultValue: 'single' })\n], ESLPanelGroup.prototype, \"accordionGroup\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { noAnimate: true } })\n], ESLPanelGroup.prototype, \"transformParams\", void 0);\n__decorate([\n    memoize()\n], ESLPanelGroup.prototype, \"modeRules\", null);\n__decorate([\n    bind\n], ESLPanelGroup.prototype, \"_onBeforeShow\", null);\n__decorate([\n    bind\n], ESLPanelGroup.prototype, \"_onShow\", null);\n__decorate([\n    bind\n], ESLPanelGroup.prototype, \"_onBeforeHide\", null);\n__decorate([\n    bind\n], ESLPanelGroup.prototype, \"_onTransitionEnd\", null);\n__decorate([\n    bind\n], ESLPanelGroup.prototype, \"_onModeChange\", null);\nESLPanelGroup = ESLPanelGroup_1 = __decorate([\n    ExportNs('PanelGroup')\n], ESLPanelGroup);\nexport { ESLPanelGroup };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement, attr, boolAttr } from '../../esl-base-element/core';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { ready } from '../../esl-utils/decorators/ready';\nimport { rafDecorator } from '../../esl-utils/async/raf';\nimport { isMouseEvent, isTouchEvent, getTouchPoint, getOffsetPoint } from '../../esl-utils/dom/events';\nimport { isRelativeNode } from '../../esl-utils/dom/traversing';\nimport { TraversingQuery } from '../../esl-traversing-query/core';\nimport { RTLUtils } from '../../esl-utils/dom/rtl';\n/**\n * ESLScrollbar is a reusable web component that replaces the browser's default scrollbar with\n * a custom scrollbar implementation.\n *\n * @author Yuliya Adamskaya\n */\nlet ESLScrollbar = class ESLScrollbar extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._deferredDrag = rafDecorator((e) => this._onPointerDrag(e));\n        this._deferredRefresh = rafDecorator(() => this.refresh());\n        this._scrollTimer = 0;\n        this._resizeObserver = new ResizeObserver(this._deferredRefresh);\n        this._mutationObserver = new MutationObserver((rec) => this.updateContentObserve(rec));\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.findTarget();\n        this.render();\n        this.bindEvents();\n    }\n    disconnectedCallback() {\n        this.unbindEvents();\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected && oldVal === newVal)\n            return;\n        if (attrName === 'target')\n            this.findTarget();\n        if (attrName === 'horizontal')\n            this.refresh();\n    }\n    findTarget() {\n        this.$target = this.target ?\n            TraversingQuery.first(this.target, this) :\n            null;\n    }\n    /** Target element to observe and scroll */\n    get $target() {\n        return this._$target || null;\n    }\n    set $target(content) {\n        this.unbindTargetEvents();\n        this._$target = content;\n        this.bindTargetEvents();\n        this._deferredRefresh();\n    }\n    render() {\n        this.innerHTML = '';\n        this.$scrollbarTrack = document.createElement('div');\n        this.$scrollbarTrack.className = this.trackClass;\n        this.$scrollbarThumb = document.createElement('div');\n        this.$scrollbarThumb.className = this.thumbClass;\n        this.$scrollbarTrack.appendChild(this.$scrollbarThumb);\n        this.appendChild(this.$scrollbarTrack);\n    }\n    bindEvents() {\n        window.MouseEvent && this.addEventListener('mousedown', this._onPointerDown);\n        window.TouchEvent && this.addEventListener('touchstart', this._onPointerDown, { passive: true });\n        window.addEventListener(this.REFRESH_EVENT, this._onRefresh);\n    }\n    bindTargetEvents() {\n        if (!this.$target)\n            return;\n        if (document.documentElement === this.$target) {\n            window.addEventListener('resize', this._onRefresh, { passive: true });\n            window.addEventListener('scroll', this._onRefresh, { passive: true });\n        }\n        else {\n            this._resizeObserver.observe(this.$target);\n            this._mutationObserver.observe(this.$target, { childList: true });\n            Array.from(this.$target.children).forEach((el) => this._resizeObserver.observe(el));\n            this.$target.addEventListener('scroll', this._onRefresh, { passive: true });\n        }\n    }\n    updateContentObserve(recs = []) {\n        if (!this.$target)\n            return;\n        const contentChanges = recs.filter((rec) => rec.type === 'childList');\n        contentChanges.forEach((rec) => {\n            Array.from(rec.addedNodes)\n                .filter((el) => el instanceof Element)\n                .forEach((el) => this._resizeObserver.observe(el));\n            Array.from(rec.removedNodes)\n                .filter((el) => el instanceof Element)\n                .forEach((el) => this._resizeObserver.unobserve(el));\n        });\n        if (contentChanges.length)\n            this._deferredRefresh();\n    }\n    unbindEvents() {\n        window.MouseEvent && this.removeEventListener('mousedown', this._onPointerDown);\n        window.TouchEvent && this.removeEventListener('touchstart', this._onPointerDown);\n        this.unbindTargetEvents();\n        window.removeEventListener(this.REFRESH_EVENT, this._onRefresh);\n    }\n    unbindTargetEvents() {\n        if (!this.$target)\n            return;\n        if (document.documentElement === this.$target) {\n            window.removeEventListener('resize', this._onRefresh);\n            window.removeEventListener('scroll', this._onRefresh);\n        }\n        else {\n            this._resizeObserver.disconnect();\n            this._mutationObserver.disconnect();\n            this.$target.removeEventListener('scroll', this._onRefresh);\n        }\n    }\n    /** @readonly Scrollable distance size value (px) */\n    get scrollableSize() {\n        if (!this.$target)\n            return 0;\n        return this.horizontal ?\n            this.$target.scrollWidth - this.$target.clientWidth :\n            this.$target.scrollHeight - this.$target.clientHeight;\n    }\n    /** @readonly Track size value (px) */\n    get trackOffset() {\n        return this.horizontal ? this.$scrollbarTrack.offsetWidth : this.$scrollbarTrack.offsetHeight;\n    }\n    /** @readonly Thumb size value (px) */\n    get thumbOffset() {\n        return this.horizontal ? this.$scrollbarThumb.offsetWidth : this.$scrollbarThumb.offsetHeight;\n    }\n    /** @readonly Relative thumb size value (between 0.0 and 1.0) */\n    get thumbSize() {\n        // behave as native scroll\n        if (!this.$target || !this.$target.scrollWidth || !this.$target.scrollHeight)\n            return 1;\n        const areaSize = this.horizontal ? this.$target.clientWidth : this.$target.clientHeight;\n        const scrollSize = this.horizontal ? this.$target.scrollWidth : this.$target.scrollHeight;\n        return Math.min((areaSize + 1) / scrollSize, 1);\n    }\n    /** Relative position value (between 0.0 and 1.0) */\n    get position() {\n        if (!this.$target)\n            return 0;\n        const scrollOffset = this.horizontal ? RTLUtils.normalizeScrollLeft(this.$target) : this.$target.scrollTop;\n        return this.scrollableSize ? (scrollOffset / this.scrollableSize) : 0;\n    }\n    set position(position) {\n        this.scrollTargetTo(this.scrollableSize * this.normalizePosition(position));\n        this.update();\n    }\n    /** Normalizes position value (between 0.0 and 1.0) */\n    normalizePosition(position) {\n        const relativePosition = Math.min(1, Math.max(0, position));\n        if (!RTLUtils.isRtl(this.$target) || !this.horizontal)\n            return relativePosition;\n        return RTLUtils.scrollType === 'negative' ? (relativePosition - 1) : (1 - relativePosition);\n    }\n    /** Scrolls target element to passed position */\n    scrollTargetTo(pos) {\n        if (!this.$target)\n            return;\n        this.$target.scrollTo({\n            [this.horizontal ? 'left' : 'top']: pos,\n            behavior: this.dragging ? 'auto' : 'smooth'\n        });\n    }\n    /** Updates thumb size and position */\n    update() {\n        this.$$fire('esl:change:scroll', { bubbles: false });\n        if (!this.$scrollbarThumb || !this.$scrollbarTrack)\n            return;\n        const thumbSize = this.trackOffset * this.thumbSize;\n        const thumbPosition = (this.trackOffset - thumbSize) * this.position;\n        const style = {\n            [this.horizontal ? 'left' : 'top']: `${thumbPosition}px`,\n            [this.horizontal ? 'width' : 'height']: `${thumbSize}px`\n        };\n        Object.assign(this.$scrollbarThumb.style, style);\n    }\n    /** Updates auxiliary markers */\n    updateMarkers() {\n        const { position, thumbSize } = this;\n        this.toggleAttribute('at-start', thumbSize < 1 && position <= 0);\n        this.toggleAttribute('at-end', thumbSize < 1 && position >= 1);\n        this.toggleAttribute('inactive', thumbSize >= 1);\n    }\n    /** Refreshes scroll state and position */\n    refresh() {\n        this.update();\n        this.updateMarkers();\n    }\n    /** Returns position from MouseEvent coordinates (not normalized) */\n    toPosition(event) {\n        const { horizontal, thumbOffset, trackOffset } = this;\n        const point = getTouchPoint(event);\n        const offset = getOffsetPoint(this.$scrollbarTrack);\n        const pointPosition = horizontal ? point.x - offset.x : point.y - offset.y;\n        const freeTrackArea = trackOffset - thumbOffset; // size of free track px\n        const clickPositionNoOffset = pointPosition - thumbOffset / 2;\n        return clickPositionNoOffset / freeTrackArea;\n    }\n    // Event listeners\n    /** Handles `mousedown` / `touchstart` event to manage thumb drag start and scroll clicks */\n    _onPointerDown(event) {\n        this._initialPosition = this.position;\n        this._pointerPosition = this.toPosition(event);\n        const point = getTouchPoint(event);\n        this._initialMousePosition = this.horizontal ? point.x : point.y;\n        if (event.target === this.$scrollbarThumb) {\n            this._onThumbPointerDown(event); // Drag start handler\n        }\n        else {\n            this._onPointerDownTick(true); // Continuous scroll and click handler\n        }\n        // Subscribes inverse handlers\n        isMouseEvent(event) && window.addEventListener('mouseup', this._onPointerUp);\n        isTouchEvent(event) && window.addEventListener('touchend', this._onPointerUp);\n        // Prevents default text selection, etc.\n        if (isMouseEvent(event))\n            event.preventDefault();\n    }\n    /** Handles a scroll click / continuous scroll*/\n    _onPointerDownTick(first) {\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        const position = this.position;\n        const allowedOffset = (first ? 1 : 1.5) * this.thumbSize;\n        this.position = Math.min(position + allowedOffset, Math.max(position - allowedOffset, this._pointerPosition));\n        if (this.position === this._pointerPosition || this.noContinuousScroll)\n            return;\n        this._scrollTimer = window.setTimeout(this._onPointerDownTick, 400);\n    }\n    /** Handles thumb drag start */\n    _onThumbPointerDown(event) {\n        var _a;\n        this.toggleAttribute('dragging', true);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.setProperty('scroll-behavior', 'auto');\n        // Attaches drag listeners\n        window.addEventListener('click', this._onBodyClick, { capture: true });\n        isMouseEvent(event) && window.addEventListener('mousemove', this._onPointerMove);\n        isTouchEvent(event) && window.addEventListener('touchmove', this._onPointerMove, { passive: false });\n    }\n    /** Sets position on drag */\n    _onPointerDrag(event) {\n        const point = getTouchPoint(event);\n        const mousePosition = this.horizontal ? point.x : point.y;\n        const positionChange = mousePosition - this._initialMousePosition;\n        const scrollableAreaHeight = this.trackOffset - this.thumbOffset;\n        const absChange = scrollableAreaHeight ? (positionChange / scrollableAreaHeight) : 0;\n        this.position = this._initialPosition + absChange;\n        this.updateMarkers();\n    }\n    /** `mousemove` document handler for thumb drag event. Active only if drag action is active */\n    _onPointerMove(event) {\n        if (!this.dragging)\n            return;\n        // Request position update\n        this._deferredDrag(event);\n        // Prevents default text selection, etc.\n        event.preventDefault();\n        event.stopPropagation();\n    }\n    /** `mouseup` short-time document handler for drag end action */\n    _onPointerUp(event) {\n        var _a;\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        this.toggleAttribute('dragging', false);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.removeProperty('scroll-behavior');\n        // Unbinds drag listeners\n        if (isMouseEvent(event)) {\n            window.removeEventListener('mousemove', this._onPointerMove);\n            window.removeEventListener('mouseup', this._onPointerUp);\n        }\n        if (isTouchEvent(event)) {\n            window.removeEventListener('touchmove', this._onPointerMove);\n            window.removeEventListener('touchend', this._onPointerUp);\n        }\n    }\n    /** Body `click` short-time handler to prevent clicks event on thumb drag. Handles capture phase */\n    _onBodyClick(event) {\n        event.stopImmediatePropagation();\n        window.removeEventListener('click', this._onBodyClick, { capture: true });\n    }\n    /**\n     * Handler for refresh events to update the scroll.\n     * @param event - instance of 'resize' or 'scroll' or {@link ESLScrollbar.REFRESH_EVENT} event.\n     */\n    _onRefresh(event) {\n        const target = event.target;\n        if (event.type === 'scroll' && this.dragging)\n            return;\n        if (event.type === this.REFRESH_EVENT && !isRelativeNode(target.parentNode, this.$target))\n            return;\n        this._deferredRefresh();\n    }\n};\nESLScrollbar.is = 'esl-scrollbar';\nESLScrollbar.observedAttributes = ['target', 'horizontal'];\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"horizontal\", void 0);\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"noContinuousScroll\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLScrollbar.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-thumb' })\n], ESLScrollbar.prototype, \"thumbClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-track' })\n], ESLScrollbar.prototype, \"trackClass\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"dragging\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"inactive\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atStart\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atEnd\", void 0);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"connectedCallback\", null);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"disconnectedCallback\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerDown\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerDownTick\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onThumbPointerDown\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerMove\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerUp\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onBodyClick\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onRefresh\", null);\nESLScrollbar = __decorate([\n    ExportNs('Scrollbar')\n], ESLScrollbar);\nexport { ESLScrollbar };\n","import { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { ESLImage } from './esl-image';\nlet iObserver;\n/** ESL Image lazy loading IntersectionObserver instance */\nexport function getIObserver() {\n    if (!iObserver) {\n        iObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(handleViewport);\n        }, {\n            threshold: [0.01],\n            rootMargin: DeviceDetector.isMobile ? '250px' : '500px' // rootMargin value for IntersectionObserver\n        });\n    }\n    return iObserver;\n}\nfunction handleViewport(entry) {\n    const { target: image } = entry;\n    if (!(image instanceof ESLImage))\n        return;\n    // Check that entry is going to appear in the viewport area\n    if (entry.isIntersecting || entry.intersectionRatio > 0) {\n        image.triggerLoad();\n    }\n}\n","/** checks if the attribute is dangerous */\nconst isDangerousAttribute = (name, value) => {\n    const val = value.replace(/\\s+/g, '').toLowerCase();\n    if (['src', 'data', 'href', 'xlink:href'].includes(name)\n        && (val.includes('javascript:') || val.includes('data:text/html')))\n        return true;\n    if (name.indexOf('on') === 0)\n        return true;\n    return false;\n};\n/** loops through each attribute, if it's dangerous, remove it */\nconst removeDangerousAttributes = (el) => {\n    Array.from(el.attributes).forEach(({ name, value }) => {\n        if (isDangerousAttribute(name, value)) {\n            el.removeAttribute(name);\n        }\n    });\n};\n/** removes malicious attributes from element and its children */\nconst sanitizeElAttributes = (body) => {\n    Array.from(body.children).forEach((el) => {\n        removeDangerousAttributes(el);\n        sanitizeElAttributes(el);\n    });\n};\n/** removes script elements inside element */\nconst removeScripts = (body) => {\n    const scripts = body.querySelectorAll('script');\n    Array.from(scripts).forEach((script) => script.remove());\n};\nconst filterElements = (body, allowedTopLevelTags) => {\n    if (!allowedTopLevelTags.length)\n        return;\n    Array.from(body.childNodes).forEach((el) => {\n        if (!allowedTopLevelTags.includes(el.tagName))\n            body.removeChild(el);\n    });\n};\n/**\n * Sanitizes html string from malicious attributes, values, and scripts\n * Can also filter elements at the top nesting level by tag names.\n * @param html - html string to sanitize\n * @param allowedTopLevelTags - array of allowed tag names\n */\nexport function sanitize(html, allowedTopLevelTags = []) {\n    // converts the string to an HTML document\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n    const body = doc.body || document.createElement('body');\n    // sanitizes html\n    removeScripts(body);\n    sanitizeElAttributes(body);\n    // filter allowed tags\n    filterElements(body, allowedTopLevelTags);\n    return body.innerHTML;\n}\n","import { sanitize } from '../../esl-utils/dom/sanitize';\nimport { ESLImage } from './esl-image';\nexport const STRATEGIES = {\n    'cover': {\n        apply(img, shadowImg) {\n            const src = shadowImg.src;\n            const isEmpty = !src || ESLImage.isEmptyImage(src);\n            img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n        },\n        clear(img) {\n            img.style.backgroundImage = '';\n        }\n    },\n    'save-ratio': {\n        apply(img, shadowImg) {\n            const src = shadowImg.src;\n            const isEmpty = !src || ESLImage.isEmptyImage(src);\n            img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n            if (shadowImg.width === 0)\n                return;\n            img.style.paddingTop = isEmpty ? '' : `${(shadowImg.height * 100 / shadowImg.width)}%`;\n        },\n        clear(img) {\n            img.style.paddingTop = '';\n            img.style.backgroundImage = '';\n        }\n    },\n    'fit': {\n        apply(img, shadowImg) {\n            const innerImg = img.attachInnerImage();\n            innerImg.src = shadowImg.src;\n            innerImg.removeAttribute('width');\n        },\n        clear(img) {\n            img.removeInnerImage();\n        }\n    },\n    'origin': {\n        apply(img, shadowImg) {\n            const innerImg = img.attachInnerImage();\n            innerImg.src = shadowImg.src;\n            innerImg.width = shadowImg.width / window.devicePixelRatio;\n        },\n        clear(img) {\n            img.removeInnerImage();\n        }\n    },\n    'inner-svg': {\n        apply(img, shadowImg) {\n            const request = new XMLHttpRequest();\n            request.open('GET', shadowImg.src, true);\n            request.onreadystatechange = () => {\n                if (request.readyState !== 4 || request.status !== 200)\n                    return;\n                img.innerHTML = sanitize(request.responseText, ['svg']);\n            };\n            request.send();\n        },\n        clear(img) {\n            img.innerHTML = '';\n        }\n    }\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLImage_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { prop } from '../../esl-utils/decorators/prop';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ESLBaseElement, attr, boolAttr } from '../../esl-base-element/core';\nimport { ESLMediaRuleList } from '../../esl-media-query/core';\nimport { TraversingQuery } from '../../esl-traversing-query/core/esl-traversing-query';\nimport { getIObserver } from './esl-image-iobserver';\nimport { STRATEGIES } from './esl-image-strategies';\nconst isLoadState = (state) => ['error', 'loaded', 'ready'].includes(state);\n/**\n * ESLImage - custom element, that provides flexible ways to include images on web pages.\n * Was originally developed as an alternative to `<picture>` element, but with more features inside.\n *\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya\n */\nlet ESLImage = ESLImage_1 = class ESLImage extends ESLBaseElement {\n    static get STRATEGIES() {\n        return STRATEGIES;\n    }\n    static get EMPTY_IMAGE() {\n        return 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.alt =\n            this.alt || this.getAttribute('aria-label') || this.getAttribute('data-alt') || '';\n        this.updateA11y();\n        this.srcRules.addEventListener(this._onMediaMatchChange);\n        if (this.lazyObservable) {\n            this.removeAttribute('lazy-triggered');\n            getIObserver().observe(this);\n            this._detachLazyTrigger = function () {\n                getIObserver().unobserve(this);\n                this._detachLazyTrigger = null;\n            };\n        }\n        this.refresh();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this._detachLazyTrigger && this._detachLazyTrigger();\n        if (this._srcRules) {\n            this._srcRules.removeEventListener(this._onMediaMatchChange);\n        }\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        switch (attrName) {\n            case 'aria-label':\n                this.alt = newVal || '';\n                break;\n            case 'alt':\n            case 'role':\n                this.updateA11y();\n                break;\n            case 'data-src':\n                this.srcRules = ESLMediaRuleList.parse(newVal);\n                this.refresh();\n                break;\n            case 'data-src-base':\n                this.refresh();\n                break;\n            case 'mode':\n                this.changeMode(oldVal, newVal);\n                break;\n            case 'lazy-triggered':\n                this.lazyTriggered && this.update();\n                break;\n        }\n    }\n    get srcRules() {\n        if (!this._srcRules) {\n            this.srcRules = ESLMediaRuleList.parse(this.src);\n        }\n        return this._srcRules;\n    }\n    set srcRules(rules) {\n        if (this._srcRules) {\n            this._srcRules.removeEventListener(this._onMediaMatchChange);\n        }\n        this._srcRules = rules;\n        this._srcRules.addEventListener(this._onMediaMatchChange);\n    }\n    get currentSrc() {\n        return this._currentSrc;\n    }\n    get empty() {\n        return !this._currentSrc || ESLImage_1.isEmptyImage(this._currentSrc);\n    }\n    get canUpdate() {\n        return this.lazyTriggered || this.lazy === 'none';\n    }\n    get lazyObservable() {\n        return this.lazy !== 'none' && this.lazy !== 'manual';\n    }\n    get originalWidth() {\n        return this._shadowImageElement ? this._shadowImageElement.width : 0;\n    }\n    get originalHeight() {\n        return this._shadowImageElement ? this._shadowImageElement.height : 0;\n    }\n    triggerLoad() {\n        this.setAttribute('lazy-triggered', '');\n    }\n    changeMode(oldVal, newVal) {\n        oldVal = oldVal || 'save-ratio';\n        newVal = newVal || 'save-ratio';\n        if (oldVal === newVal)\n            return;\n        if (!STRATEGIES[newVal]) {\n            this.mode = oldVal;\n            throw new Error('ESL Image: Unsupported mode: ' + newVal);\n        }\n        this.clearImage();\n        if (this.loaded)\n            this.syncImage();\n    }\n    update(force = false) {\n        if (!this.canUpdate)\n            return;\n        const src = this.getPath(this.srcRules.activeValue);\n        if (this._currentSrc !== src || !this.ready || force) {\n            this._currentSrc = src;\n            this._shadowImg.src = src;\n            if (this.refreshOnUpdate || !this.ready) {\n                this.syncImage();\n            }\n            if (this._shadowImg.complete) {\n                this._shadowImgError ? this._onError() : this._onLoad();\n            }\n        }\n        this._detachLazyTrigger && this._detachLazyTrigger();\n    }\n    updateA11y() {\n        const role = this.getAttribute('role') || 'img';\n        this.setAttribute('role', role);\n        this.innerImage && (this.innerImage.alt = this.alt);\n        if (role === 'img')\n            this.setAttribute('aria-label', this.alt);\n    }\n    getPath(src) {\n        if (!src || src === '0' || src === 'none') {\n            return ESLImage_1.EMPTY_IMAGE;\n        }\n        return this.srcBase + src;\n    }\n    refresh() {\n        this.removeAttribute('loaded');\n        this.removeAttribute('ready');\n        this.updateContainerClasses();\n        this.clearImage();\n        this.update(true);\n    }\n    syncImage() {\n        const strategy = STRATEGIES[this.mode];\n        this._strategy = strategy;\n        strategy && strategy.apply(this, this._shadowImg);\n    }\n    clearImage() {\n        this._strategy && this._strategy.clear(this);\n        this._strategy = null;\n    }\n    get innerImage() {\n        return this._innerImg;\n    }\n    attachInnerImage() {\n        if (!this._innerImg) {\n            this._innerImg = this.querySelector(`img.${this.innerImageClass}`) ||\n                this._shadowImg.cloneNode();\n            this._innerImg.className = this.innerImageClass;\n        }\n        if (!this._innerImg.parentNode) {\n            this.appendChild(this._innerImg);\n        }\n        this._innerImg.alt = this.alt;\n        return this._innerImg;\n    }\n    removeInnerImage() {\n        if (!this.innerImage)\n            return;\n        this.removeChild(this.innerImage);\n        setTimeout(() => {\n            if (this._innerImg && !this._innerImg.parentNode) {\n                this._innerImg = null;\n            }\n        });\n    }\n    get _shadowImg() {\n        if (!this._shadowImageElement) {\n            this._shadowImageElement = new Image();\n            this._shadowImageElement.onload = this._onLoad;\n            this._shadowImageElement.onerror = this._onError;\n        }\n        return this._shadowImageElement;\n    }\n    get _shadowImgError() {\n        if (!this._shadowImg.complete)\n            return false;\n        if (this._shadowImg.src.substring(-4) === '.svg')\n            return false;\n        return this._shadowImg.naturalHeight <= 0;\n    }\n    _onLoad() {\n        this.syncImage();\n        this._onReadyState(true);\n        this.updateContainerClasses();\n    }\n    _onError() {\n        this._onReadyState(false);\n        this.updateContainerClasses();\n    }\n    _onMediaMatchChange() {\n        this.update();\n    }\n    _onReadyState(successful) {\n        if (this.ready)\n            return;\n        this.toggleAttribute('loaded', successful);\n        this.toggleAttribute('error', !successful);\n        this.toggleAttribute('ready', true);\n        this.$$fire(successful ? this.LOAD_EVENT : this.ERROR_EVENT, { bubbles: false });\n        this.$$fire(this.READY_EVENT, { bubbles: false });\n    }\n    updateContainerClasses() {\n        if (this.containerClass === null)\n            return;\n        const cls = this.containerClass || this.constructor.DEFAULT_CONTAINER_CLS;\n        const state = isLoadState(this.containerClassState) && this[this.containerClassState];\n        const targetEl = TraversingQuery.first(this.containerClassTarget, this);\n        targetEl && CSSClassUtils.toggle(targetEl, cls, state);\n    }\n    static isEmptyImage(src) {\n        return src === ESLImage_1.EMPTY_IMAGE;\n    }\n};\nESLImage.is = 'esl-image';\nESLImage.observedAttributes = ['alt', 'role', 'mode', 'aria-label', 'data-src', 'data-src-base', 'lazy-triggered'];\n/** Default container class value */\nESLImage.DEFAULT_CONTAINER_CLS = 'img-container-loaded';\n__decorate([\n    prop('ready')\n], ESLImage.prototype, \"READY_EVENT\", void 0);\n__decorate([\n    prop('load')\n], ESLImage.prototype, \"LOAD_EVENT\", void 0);\n__decorate([\n    prop('error')\n], ESLImage.prototype, \"ERROR_EVENT\", void 0);\n__decorate([\n    attr()\n], ESLImage.prototype, \"alt\", void 0);\n__decorate([\n    attr({ defaultValue: 'save-ratio' })\n], ESLImage.prototype, \"mode\", void 0);\n__decorate([\n    attr({ dataAttr: true })\n], ESLImage.prototype, \"src\", void 0);\n__decorate([\n    attr({ dataAttr: true })\n], ESLImage.prototype, \"srcBase\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLImage.prototype, \"lazy\", void 0);\n__decorate([\n    boolAttr()\n], ESLImage.prototype, \"lazyTriggered\", void 0);\n__decorate([\n    boolAttr()\n], ESLImage.prototype, \"refreshOnUpdate\", void 0);\n__decorate([\n    attr({ defaultValue: 'inner-image' })\n], ESLImage.prototype, \"innerImageClass\", void 0);\n__decorate([\n    attr({ defaultValue: null })\n], ESLImage.prototype, \"containerClass\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLImage.prototype, \"containerClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'ready' })\n], ESLImage.prototype, \"containerClassState\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"ready\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"loaded\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLImage.prototype, \"error\", void 0);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onLoad\", null);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onError\", null);\n__decorate([\n    bind\n], ESLImage.prototype, \"_onMediaMatchChange\", null);\nESLImage = ESLImage_1 = __decorate([\n    ExportNs('Image')\n], ESLImage);\nexport { ESLImage };\n","import { isDescriptorFn } from '../dom/events';\nexport function listen(desc) {\n    return function listener(target, propertyKey, descriptor) {\n        desc = typeof desc === 'string' || typeof desc === 'function' ? { event: desc } : desc;\n        desc = Object.assign({ auto: true }, desc);\n        if (!descriptor || typeof descriptor.value !== 'function') {\n            throw new TypeError('Only class methods can be decorated via listener decorator');\n        }\n        if (isDescriptorFn(descriptor.value) && descriptor.value.event !== desc.event) {\n            throw new TypeError(`Method ${propertyKey} already decorated as ESLListenerDescriptor`);\n        }\n        Object.assign(descriptor.value, desc);\n        // Allow collecting\n        descriptor.enumerable = true;\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { attr } from '@exadel/esl/modules/esl-utils/decorators/attr';\nimport { prop } from '@exadel/esl/modules/esl-utils/decorators/prop';\nimport { listen } from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport { ESLMediaQuery } from '@exadel/esl/modules/esl-media-query/core';\nimport { ESLToggleable } from '@exadel/esl/modules/esl-toggleable/core';\nexport class EAKSidebar extends ESLToggleable {\n    constructor() {\n        super(...arguments);\n        this.closeOnEsc = true;\n        this.closeOnOutsideAction = true;\n        this.submenus = '.sidebar-nav-secondary.nav-secondary-panel';\n        this.activeMenuAttr = 'data-open';\n    }\n    get $submenus() {\n        return Array.from(this.querySelectorAll(this.submenus));\n    }\n    setInitialState() {\n        const isDesktop = ESLMediaQuery.for('@+MD').matches;\n        this.toggle(isDesktop, { force: true, initiator: 'init', immediate: true });\n    }\n    collapseAll() {\n        this.$submenus.forEach((menu) => menu.hide({ activator: this }));\n    }\n    expandActive(noCollapse = false) {\n        this.$submenus\n            .filter((menu) => menu.hasAttribute('data-open'))\n            .forEach((menu) => menu.show({ noCollapse, activator: this }));\n    }\n    updateA11y() {\n        const targetEl = this.$a11yTarget;\n        if (!targetEl)\n            return;\n        targetEl.setAttribute('aria-expanded', String(this.open));\n    }\n    hide(params) {\n        if (ESLMediaQuery.for('@+MD').matches)\n            return this;\n        return super.hide(params);\n    }\n    onShow(params) {\n        this._animation = !params.immediate;\n        super.onShow(params);\n        this.expandActive(params.initiator === 'init');\n    }\n    onHide(params) {\n        this._animation = !params.immediate;\n        super.onHide(params);\n        this.collapseAll();\n    }\n    onBreakpointChange({ matches: isDesktop }) {\n        this.toggle(isDesktop, { force: true, initiator: 'bp-change', immediate: !isDesktop });\n    }\n}\nEAKSidebar.is = 'eak-sidebar';\n__decorate([\n    prop()\n], EAKSidebar.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    prop()\n], EAKSidebar.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    prop()\n], EAKSidebar.prototype, \"submenus\", void 0);\n__decorate([\n    prop()\n], EAKSidebar.prototype, \"activeMenuAttr\", void 0);\n__decorate([\n    attr({ name: 'animation' })\n], EAKSidebar.prototype, \"_animation\", void 0);\n__decorate([\n    listen({\n        event: 'change',\n        target: ESLMediaQuery.for('@+MD')\n    })\n], EAKSidebar.prototype, \"onBreakpointChange\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement, attr } from '@exadel/esl/modules/esl-base-element/core';\nimport { ready } from '@exadel/esl/modules/esl-utils/decorators/ready';\nimport { isIE } from '@exadel/esl/modules/esl-utils/environment/device-detector';\nimport { bind } from '@exadel/esl/modules/esl-utils/decorators/bind';\nimport { memoize } from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport { range } from '@exadel/esl/modules/esl-utils/misc/array';\nexport class EAKBanner extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._animateTimer = 0;\n        this._$active = [];\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (isIE)\n            return;\n        this.startAnimation();\n    }\n    disconnectedCallback() {\n        this.stopAnimation();\n        super.disconnectedCallback();\n    }\n    get $lines() {\n        return Array.from(this.querySelectorAll(EAKBanner.TARGETS));\n    }\n    get $randomLine() {\n        const index = Math.floor(Math.random() * this.$lines.length);\n        return this.$lines[index];\n    }\n    startAnimation() {\n        this._onIteration();\n    }\n    stopAnimation() {\n        this._animateTimer && window.clearTimeout(this._animateTimer);\n    }\n    _onIteration() {\n        const $candidates = range(this.targetsNumber, () => this.$randomLine);\n        const delay = this.iterationTime / this.targetsNumber;\n        if (!$candidates.length)\n            return;\n        this._$active.forEach((line, i) => {\n            window.setTimeout(() => {\n                line.classList.remove('animate');\n                line.style.strokeDashoffset = '';\n            }, delay * i);\n        });\n        $candidates.forEach((line, i) => {\n            window.setTimeout(() => {\n                line.classList.add('animate');\n                const lineLength = line.getTotalLength();\n                line.style.strokeDasharray = lineLength + '';\n                line.style.strokeDashoffset = lineLength + '';\n            }, delay * i);\n        });\n        this._$active = $candidates;\n        this._animateTimer = window.setTimeout(this._onIteration, this.iterationTime);\n    }\n}\nEAKBanner.is = 'eak-banner';\nEAKBanner.TARGETS = 'g > path';\n__decorate([\n    attr({ defaultValue: 2, parser: parseInt })\n], EAKBanner.prototype, \"targetsNumber\", void 0);\n__decorate([\n    attr({ defaultValue: 4000, parser: parseInt })\n], EAKBanner.prototype, \"iterationTime\", void 0);\n__decorate([\n    ready\n], EAKBanner.prototype, \"connectedCallback\", null);\n__decorate([\n    memoize()\n], EAKBanner.prototype, \"$lines\", null);\n__decorate([\n    bind\n], EAKBanner.prototype, \"_onIteration\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement } from '@exadel/esl/modules/esl-base-element/core';\nimport { listen } from '@exadel/esl/modules/esl-utils/decorators/listen';\nimport { attr } from '@exadel/esl/modules/esl-utils/decorators/attr';\nimport { boolAttr } from '@exadel/esl/modules/esl-utils/decorators/bool-attr';\nimport { memoize } from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport { getTouchPoint } from '@exadel/esl/modules/esl-utils/dom/events/misc';\nexport class EAKZoomImage extends ESLBaseElement {\n    get $image() {\n        const originalImage = document.createElement('esl-image');\n        originalImage.setAttribute('data-src', this.src);\n        originalImage.setAttribute('lazy', '');\n        originalImage.setAttribute('mode', 'fit');\n        return originalImage;\n    }\n    get $closeButton() {\n        const button = document.createElement('button');\n        button.setAttribute('class', 'close-button');\n        return button;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.appendChild(this.$image);\n        this.appendChild(this.$closeButton);\n    }\n    zoom() {\n        if (this.inDrag || this.inZoom)\n            return;\n        this.inZoom = true;\n        this.$image.style.transform = `scale(${this.scale})`;\n        this.$image.style.marginTop = '0';\n        this.$image.style.marginLeft = '0';\n        this.style.width = `${this.$image.offsetWidth}px`;\n        this.style.height = `${this.$image.offsetHeight}px`;\n        this.$$on('pointerdown', this.onPointerDown);\n    }\n    unzoom() {\n        this.inZoom = false;\n        this.$image.style.removeProperty('transform');\n        this.$image.style.marginTop = '0';\n        this.$image.style.marginLeft = '0';\n        this.style.width = 'auto';\n        this.style.height = 'auto';\n        this.$$off(this.onPointerDown);\n    }\n    onPointerDown(e) {\n        this.inDrag = true;\n        this.startPoint = getTouchPoint(e);\n        this.startPosition = {\n            x: parseInt(this.$image.style.marginLeft, 10) || 0,\n            y: parseInt(this.$image.style.marginTop, 10) || 0,\n        };\n        this.$$on('pointermove', this.onPointerMove);\n        this.$$on('pointerup', this.onPointerUp);\n        this.setPointerCapture(e.pointerId);\n        e.preventDefault();\n    }\n    onPointerUp(e) {\n        if (!this.inDrag)\n            return;\n        e.preventDefault();\n        this.inDrag = false;\n        this.$$off(this.onPointerMove);\n        this.$$off(this.onPointerUp);\n        this.releasePointerCapture(e.pointerId);\n    }\n    onPointerMove(e) {\n        if (!this.inDrag)\n            return;\n        const point = getTouchPoint(e);\n        const scale = parseInt(this.scale, 10);\n        const offsetX = point.x - this.startPoint.x;\n        const offsetY = point.y - this.startPoint.y;\n        const maxOffsetX = (this.$image.offsetWidth * scale - this.offsetWidth) * 0.5;\n        const maxOffsetY = (this.$image.offsetHeight * scale - this.offsetHeight) * 0.5;\n        if (maxOffsetX < 0 || maxOffsetY < 0)\n            return;\n        const x = this.startPosition.x + offsetX;\n        const y = this.startPosition.y + offsetY;\n        const normalizedX = Math.min(maxOffsetX, Math.max(-maxOffsetX, x));\n        const normalizedY = Math.min(maxOffsetY, Math.max(-maxOffsetY, y));\n        this.$image.style.marginTop = `${normalizedY}px`;\n        this.$image.style.marginLeft = `${normalizedX}px`;\n        e.preventDefault();\n    }\n    onClick(e) {\n        const isCloseBtn = this.$closeButton.contains(e.target);\n        isCloseBtn ? this.unzoom() : this.zoom();\n    }\n    onOutsideClick(e) {\n        if (!this.$image.contains(e.target)) {\n            this.unzoom();\n        }\n    }\n}\nEAKZoomImage.is = 'eak-zoom-image';\n__decorate([\n    attr({ dataAttr: true })\n], EAKZoomImage.prototype, \"src\", void 0);\n__decorate([\n    attr({ defaultValue: '2' })\n], EAKZoomImage.prototype, \"scale\", void 0);\n__decorate([\n    boolAttr()\n], EAKZoomImage.prototype, \"inZoom\", void 0);\n__decorate([\n    boolAttr()\n], EAKZoomImage.prototype, \"inDrag\", void 0);\n__decorate([\n    memoize()\n], EAKZoomImage.prototype, \"$image\", null);\n__decorate([\n    memoize()\n], EAKZoomImage.prototype, \"$closeButton\", null);\n__decorate([\n    listen('pointerdown')\n], EAKZoomImage.prototype, \"onClick\", null);\n__decorate([\n    listen({ event: 'pointerdown', target: 'body' })\n], EAKZoomImage.prototype, \"onOutsideClick\", null);\n","import { ESLTabs, ESLTab, ESLPanel, ESLPanelGroup, ESLTrigger, ESLScrollbar, ESLToggleableDispatcher, ESLImage, } from '@exadel/esl';\nimport { EAKSidebar } from './navigation/navigation';\nimport { EAKBanner } from './landing/banner/banner';\nimport { EAKZoomImage } from './eak-zoom-image/eak-zoom-image';\nESLTabs.register();\nESLTab.register();\nESLToggleableDispatcher.init();\nESLPanelGroup.register();\nESLPanel.register();\nESLTrigger.register();\nESLScrollbar.register();\nESLImage.register();\nEAKBanner.register();\nEAKSidebar.register();\nEAKZoomImage.register();\n"],"names":["__webpack_require__","g","globalThis","this","Function","e","window","ExportNs","name","module","root","value","split","reduce","obj","key","index","parts","length","type","Error","exportNs","getAttr","$el","fallback","$host","getAttribute","setAttr","removeAttribute","setAttribute","prop","prototypeConfig","Object","hasOwnProperty","call","TypeError","defineProperty","writable","readonly","enumerable","configurable","declare","ns","sequences","__esl_sequences__","Map","sequentialUID","prefix","uid","get","set","identity","arg","resolveProperty","val","origin","memoizeFn","fn","hashFn","defaultArgsHashFn","memo","args","console","warn","apply","cache","has","clear","undefined","String","isObject","defined","params","param","getPropertyDescriptor","o","proto","desc","getOwnPropertyDescriptor","getPrototypeOf","memoize","target","descriptor","originalMethod","locks","defineOwnKeySafe","memoizeGetter","memoizeMethod","WeakMap","delete","isEqual","obj1","obj2","is","keys1","keys","keys2","some","isSimilar","mask","deep","Array","isArray","arrObj","arrMask","comparer","every","itm","property","wrap","arr","toKeyDef","parseKeysPath","path","start","end","substring","isIndex","Math","floor","push","getByPath","data","defaultValue","result","map","parseKeys","curr","toKebabCase","str","replace","toLowerCase","unwrapParenthesis","trim","parseNumber","nanValue","NaN","isNaN","evaluate","isRelativeNode","nodeA","nodeB","contains","createSequenceFinder","next","base","sel","matches","findNext","el","nextElementSibling","findPrev","previousElementSibling","findParent","parentElement","findAll","from","querySelectorAll","findChildren","children","filter","TraversingUtils","isRelative","closestBy","node","predicate","skipSelf","current","parentNode","TraversingQuery_1","TraversingQuery","PROCESSORS_REGEX","ELEMENT_PROCESSORS","concat","COLLECTION_PROCESSORS","RegExp","join","static","selString","els","collection","processors","findFirst","processor","rest","isCollectionProcessor","processedItem","processCollection","traverseChain","processElement","resultCollection","slice","Set","forEach","item","add","uniq","query","scope","document","term","rootSel","shift","baseCollection","initial","acc","traverse","list","decorators","d","c","arguments","r","Reflect","decorate","i","__decorate","isMouseEvent","event","MouseEvent","isTouchEvent","TouchEvent","PASSIVE_EVENTS","getCompositeTarget","targets","composedPath","getTouchPoint","source","changedTouches","x","pageX","y","pageY","STORE","ESLEventListener","constructor","handler","assign","id","context","selector","capture","passive","includes","$targets","all","handleEvent","_a","isDelegatedTarget","once","unsubscribe","currentTarget","HTMLElement","closest","subscribe","addEventListener","removeEventListener","listener","host","events","splitEventQ","spec","terms","deduplicate","prototype","EventUtils_1","isDescriptorFn","EventUtils","eventName","eventInit","init","bubbles","composed","cancelable","dispatchEvent","CustomEvent","auto","criteria","eventDesc","listeners","create","lockStore","className","locker","remove","elLocks","classLocks","lock","classList","size","unlock","CSSClassUtils","tokenString","cls","tokens","splitTokens","state","ESLBaseElement","super","_connected","connectedCallback","descriptors","disconnectedCallback","connected","$$on","$$off","condition","$$cls","toggle","$$attr","prevValue","$$fire","dispatch","tagName","customElements","define","registered","whenDefined","attr","parseFloat","config","propName","attrName","dataAttr","buildAttrName","parser","serializer","afterNextRender","callback","requestAnimationFrame","rafDecorator","lastArgs","bind","propertyKey","bindings","RTLUtils","getComputedStyle","body","direction","scrollType","createElement","appendChild","createTextNode","dir","style","position","top","width","height","fontSize","overflow","createDummyEl","scrollLeft","removeChild","isRtl","scrollWidth","clientWidth","promisifyEvent","timeout","options","Promise","resolve","reject","eventCallback","setTimeout","createDeferred","promise","res","rej","PromiseUtils","debounce","wait","thisArg","deferred","debouncedSubject","clearTimeout","deepMerge","objects","fromTimeout","payload","isReject","fromEvent","fromMarker","marker","then","repeat","repeatSequence","count","tryUntil","tryCount","check","SyntheticEventTarget","_listeners","validateEventListenerType","defaultPrevented","addListener","cb","removeListener","userAgent","vendor","platform","navigator","isTrident","test","isIE","isEdgeHTML","isBlinkEdge","isEdge","isGecko","isFirefox","isOpera","isChrome","isWebkit","isSafari","isBlink","isBot","isAndroid","isMobileIOS13","maxTouchPoints","isMobileIOS","isLegacyMobile","isMobile","isMobileSafari","isTouchDevice","navApi","msMaxTouchPoints","Touch","hasHover","matchMedia","TOUCH_EVENTS","START","MOVE","END","DeviceDetector","ESLScreenDPR_1","ESLScreenDPR","dpr","toFixed","match","VALUE_REGEXP","ignoreBotsDpr","toDPI","ESLScreenBreakpoints_1","registry","ESLScreenBreakpoints","minWidth","maxWidth","BP_NAME_REGEXP","ESLScreenBreakpoint","names","sign","bp","BP_REGEXP","shortcut","mediaQueryGE","mediaQueryLE","mediaQuery","min","max","toString","shortcuts","ESLEnvShortcuts","_shortcuts","MediaQueryConstCondition","_matches","optimize","eq","ALL","NOT_ALL","ESLMediaChangeEvent","Event","media","MediaQueryCondition","inverted","_inverted","_mq","_onChange","MediaQueryContainer","items","MediaQueryConjunction","optimizedItems","MediaQueryDisjunction","pretty","ESLMediaQuery_1","ESLMediaQuery","preprocessor","_preprocessors","unshift","conjunctions","conditions","parseSimpleQuery","SHORTCUT_PATTERN","replacer","process","queryInverted","processedQuery","preprocess","sanitizedQuery","invert","use","ESLMediaRule","JSON","stringify","payloadValue","lex","ESLMediaRuleList_1","ESLMediaRuleListEvent","previous","ESLMediaRuleList","rules","_rules","_onMatchChanged","common","pop","parseTuple","parseQuery","parse","rule","values","queries","valueList","validRules","_value","computedValue","active","activeValue","activeValues","curValue","newValue","STRING_PARSER","OBJECT_PARSER","boolAttr","readOnly","hasAttribute","buildConditionalDescriptor","ready","readyState","ENTER","SPACE","SYSTEM_KEYS","ESLToggleablePlaceholder","$placeholder","$origin","copyAttributesFromOrigin","allowedAttrs","ESLTrigger","attributeChangedCallback","updateTargetFromSelector","$target","_$target","newPopupInstance","unbindEvents","bindEvents","_onTargetStateChange","$a11yTarget","a11yTarget","querySelector","a11yLabel","open","a11yLabelActive","a11yLabelInactive","allowHover","trackHover","allowClick","trackClick","initA11y","_onClick","_onKeydown","_onMouseEnter","_onMouseLeave","first","isTargetIgnored","ignore","$ignore","mergeToggleableParams","initiator","activator","showTarget","actionParams","delay","showDelay","show","hideTarget","hideDelay","hide","toggleTarget","updateState","isActive","wasActive","toggleAttribute","clsTarget","activeClassTarget","activeClass","updateA11y","originalEvent","detail","preventDefault","mode","hoverShowDelay","hoverHideDelay","observedAttributes","ESLTab","ESLTabs_1","ESLTabs","_deferredUpdateArrows","updateArrows","_deferredFitToViewport","fitToViewport","_onResize","$current","scrollableTypeRules","scrollable","currentScrollableType","_onScrollableTypeChange","updateScrollableType","unbindScrollableEvents","oldVal","newVal","bindScrollableEvents","_onTriggerStateChange","_onFocus","$scrollableTarget","_onScroll","$tabs","find","scrollableTarget","isScrollable","moveTo","behavior","left","offsetWidth","scrollBy","$trigger","updateMarkers","areaRect","getBoundingClientRect","itemRect","calcScrollOffset","isReversedRTL","right","ceil","swapSides","scrollStart","abs","scrollEnd","$rightArrow","$leftArrow","hasScroll","supportedScrollableTypes","dataset","tabDirection","DelayedTask","_fn","_timeout","run","put","task","prev","cancel","jsonAttr","error","buildJsonAttrDescriptor","activators","ESLToggleable","_open","_task","_trackHover","noAutoId","tag","initiallyOpened","setInitialState","oldGroupName","newGroupName","initialParams","_onKeyboardEvent","_onShowRequest","bindOutsideEventTracking","bindHoverStateTracking","track","_onOutsideAction","_trackHoverDelay","mergeDefaultParams","defaultParams","copy","showTask","closeOnOutsideAction","hideTask","force","silent","onShow","onHide","bodyClass","REFRESH_EVENT","targetEl","isOutsideAction","KeyboardEvent","closeTrigger","closeOnEsc","baseParams","trackHoverParams","matcher","ESLToggleableDispatcher","_popups","getElementsByTagName","register","insertAdjacentElement","_onBeforeShow","_onShow","_onHide","_onChangeGroup","_root","isAcceptable","groupName","hideActive","getActive","dispatcher","setActive","popup","deleteActive","ESLPanel","_initialHeight","initialHeight","$group","ESLPanelGroup","_onTransitionEnd","scrollHeight","beforeAnimate","noAnimate","capturedBy","afterAnimate","onAnimate","animateClass","postAnimateClass","to","setProperty","fallbackAnimate","distance","maxHeight","clientHeight","animating","clearAnimation","removeProperty","propertyName","stackConfig","panelConfig","ESLPanelGroup_1","_previousHeight","modeRules","_onModeChange","updateMode","accordionGroup","reset","_onBeforeHide","prevMode","currentMode","updateModeCls","modeCls","modeClsTarget","supportedModes","DEF_FORMAT_MATCHER","format","$panels","includesPanel","$activePanels","shouldAnimate","noAnimateModes","mergeActionParams","showAll","excluded","hideAll","toggleAllBy","shouldOpen","panel","transformParams","$activePanel","animationClass","iObserver","ESLScrollbar","_deferredDrag","_onPointerDrag","_deferredRefresh","refresh","_scrollTimer","_resizeObserver","ResizeObserver","_mutationObserver","MutationObserver","rec","updateContentObserve","findTarget","render","content","unbindTargetEvents","bindTargetEvents","innerHTML","$scrollbarTrack","trackClass","$scrollbarThumb","thumbClass","_onPointerDown","_onRefresh","documentElement","observe","childList","recs","contentChanges","addedNodes","Element","removedNodes","unobserve","disconnect","scrollableSize","horizontal","trackOffset","offsetHeight","thumbOffset","thumbSize","areaSize","scrollSize","scrollOffset","normalizeScrollLeft","scrollTop","scrollTargetTo","normalizePosition","update","relativePosition","pos","scrollTo","dragging","thumbPosition","toPosition","point","offset","props","scrollY","scrollX","getOffsetPoint","_initialPosition","_pointerPosition","_initialMousePosition","_onThumbPointerDown","_onPointerDownTick","_onPointerUp","allowedOffset","noContinuousScroll","_onBodyClick","_onPointerMove","positionChange","scrollableAreaHeight","absChange","stopPropagation","stopImmediatePropagation","getIObserver","IntersectionObserver","entries","handleViewport","threshold","rootMargin","entry","image","ESLImage","isIntersecting","intersectionRatio","triggerLoad","sanitizeElAttributes","attributes","indexOf","isDangerousAttribute","removeDangerousAttributes","STRATEGIES","img","shadowImg","src","isEmpty","isEmptyImage","backgroundImage","paddingTop","innerImg","attachInnerImage","removeInnerImage","devicePixelRatio","request","XMLHttpRequest","onreadystatechange","status","html","allowedTopLevelTags","DOMParser","parseFromString","scripts","script","removeScripts","childNodes","filterElements","sanitize","responseText","send","ESLImage_1","EMPTY_IMAGE","alt","srcRules","_onMediaMatchChange","lazyObservable","_detachLazyTrigger","_srcRules","changeMode","lazyTriggered","currentSrc","_currentSrc","empty","canUpdate","lazy","originalWidth","_shadowImageElement","originalHeight","clearImage","loaded","syncImage","getPath","_shadowImg","refreshOnUpdate","complete","_shadowImgError","_onError","_onLoad","role","innerImage","srcBase","updateContainerClasses","strategy","_strategy","_innerImg","innerImageClass","cloneNode","Image","onload","onerror","naturalHeight","_onReadyState","successful","LOAD_EVENT","ERROR_EVENT","READY_EVENT","containerClass","DEFAULT_CONTAINER_CLS","isLoadState","containerClassState","containerClassTarget","listen","EAKSidebar","submenus","activeMenuAttr","$submenus","isDesktop","immediate","collapseAll","menu","expandActive","noCollapse","_animation","onBreakpointChange","EAKBanner","_animateTimer","_$active","startAnimation","stopAnimation","$lines","TARGETS","$randomLine","random","_onIteration","$candidates","n","filler","range","targetsNumber","iterationTime","line","strokeDashoffset","lineLength","getTotalLength","strokeDasharray","parseInt","EAKZoomImage","$image","originalImage","$closeButton","button","zoom","inDrag","inZoom","transform","scale","marginTop","marginLeft","onPointerDown","unzoom","startPoint","startPosition","onPointerMove","onPointerUp","setPointerCapture","pointerId","releasePointerCapture","offsetX","offsetY","maxOffsetX","maxOffsetY","normalizedX","normalizedY","onClick","onOutsideClick"],"sourceRoot":""}