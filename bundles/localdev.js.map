{"version":3,"file":"localdev.js","mappings":"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","sources":["webpack://EAK/webpack/bootstrap","webpack://EAK/webpack/runtime/global","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/environment/export-ns.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/dom/attr.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/dom/events.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/misc/functions.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/misc/array.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/dom/class.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-base-element/core/esl-base-element.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/misc/object.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/misc/format.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-base-element/decorators/attr.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/async/raf.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/decorators/bind.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/misc/memoize.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/decorators/memoize.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/dom/rtl.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/async/promise.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/async/debounce.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/abstract/observable.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/environment/device-detector.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-dpr.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-media-query/core/common/screen-breakpoint.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-media-query/core/common/env-shortcuts.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-base.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-condition.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-media-query/core/conditions/media-query-containers.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-query.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-media-query/core/esl-media-rule-list.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-base-element/decorators/bool-attr.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/decorators/ready.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/dom/ready.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/dom/keys.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/dom/traversing.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-traversing-query/core/esl-traversing-query.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable-placeholder.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-trigger/core/esl-trigger.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-tab/core/esl-tab.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-tab/core/esl-tabs.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/misc/uid.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/async/delayed-task.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-base-element/decorators/json-attr.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-toggleable/core/esl-toggleable-dispatcher.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-panel/core/esl-panel.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-panel-group/core/esl-panel-group.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-scrollbar/core/esl-scrollbar.js","webpack://EAK/./node_modules/@exadel/esl/modules/esl-utils/decorators/prop.js","webpack://EAK/./src/navigation/sidebar/sidebar.ts","webpack://EAK/./src/landing/banner-logo/banner-logo.ts","webpack://EAK/./src/localdev.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","const NS_NAME = 'ESL';\n/**\n * Nested declaration helper\n */\nfunction define(root, name, value) {\n    name.split('.').reduce((obj, key, index, parts) => {\n        if (parts.length === index + 1) {\n            return (obj[key] = obj[key] || value);\n        }\n        const type = typeof obj[key];\n        if (type !== 'undefined' && type !== 'object' && type !== 'function') {\n            throw new Error(`Can not define ${value} on ${name}`);\n        }\n        return (obj[key] = obj[key] || {});\n    }, root);\n}\n/**\n * Method to manually declare key in library namespace\n * See {@link ExportNs} decorator for details\n */\nexport const exportNs = (name, module) => {\n    if (!(NS_NAME in window))\n        return;\n    define(window[NS_NAME], name, module);\n};\n/**\n * Decorator to declare function or class in a global ns\n * @param name - key path to declare in ESL global ns\n * NOTE: path parts should be separated by dots\n * @example\n * ```ts\n * @Export('Package.Component')\n * ```\n * NOTE: in case declaration contains components-packages, their origins will be mixed with declaration in a Runtime\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function ExportNs(name) {\n    return (module) => exportNs(name || module.name, module);\n}\n/** Declare ESL global */\nExportNs.declare = () => {\n    if ('ESL' in window)\n        return;\n    Object.defineProperty(window, 'ESL', { value: {} });\n};\n","export function getAttr($el, name, fallback = null) {\n    if ('$host' in $el)\n        $el = $el.$host;\n    const value = $el.getAttribute(name);\n    return value === null ? fallback : value;\n}\n/** Set attribute */\nexport function setAttr($el, name, value) {\n    if ('$host' in $el)\n        $el = $el.$host;\n    if (value === undefined || value === null || value === false) {\n        $el.removeAttribute(name);\n    }\n    else {\n        $el.setAttribute(name, value === true ? '' : value);\n    }\n}\n","export class EventUtils {\n    /**\n     * Dispatch custom event.\n     * Event bubbles and is cancelable by default, use `eventInit` to override that.\n     * @param el - element target\n     * @param eventName - event name\n     * @param eventInit - custom event init. See {@link CustomEventInit}\n     */\n    static dispatch(el, eventName, eventInit) {\n        const init = Object.assign({\n            bubbles: true,\n            composed: true,\n            cancelable: true\n        }, eventInit || {});\n        return el.dispatchEvent(new CustomEvent(eventName, init));\n    }\n    /** Get original CustomEvent source */\n    static source(e) {\n        const targets = (e.composedPath && e.composedPath());\n        return targets ? targets[0] : e.target;\n    }\n    /** Check if the passed event is {@link MouseEvent} */\n    static isMouseEvent(event) {\n        return window.MouseEvent && event instanceof MouseEvent;\n    }\n    /** Check if the passed event is {@link TouchEvent} */\n    static isTouchEvent(event) {\n        return window.TouchEvent && event instanceof TouchEvent;\n    }\n    /** Normalize TouchEvent or PointerEvent */\n    static normalizeTouchPoint(event) {\n        const source = EventUtils.isTouchEvent(event) ? event.changedTouches[0] : event;\n        return {\n            x: source.pageX,\n            y: source.pageY\n        };\n    }\n    /** Normalize MouseEvent */\n    static normalizeCoordinates(event, elem) {\n        const source = EventUtils.isTouchEvent(event) ? event.changedTouches[0] : event;\n        const props = elem.getBoundingClientRect();\n        const top = props.top + window.scrollY;\n        const left = props.left + window.scrollX;\n        return {\n            x: source.pageX - left,\n            y: source.pageY - top\n        };\n    }\n    /** Stub method to prevent event from bubbling out of target */\n    static stopPropagation(e) {\n        e === null || e === void 0 ? void 0 : e.stopPropagation();\n    }\n    /** Stub method to prevent default event behaviour */\n    static preventDefault(e) {\n        e === null || e === void 0 ? void 0 : e.preventDefault();\n    }\n}\n","/** Function that does nothing */\nexport const noop = () => undefined;\n/** Function that returns the first argument */\nexport const identity = (arg) => arg;\n","import { identity } from './functions';\nimport { isArrayLike } from './object';\n/** Split array into tuples */\nexport const tuple = (arr) => arr.reduce((acc, el) => {\n    if (acc.length === 0 || acc[acc.length - 1].length >= 2)\n        acc.push([]);\n    acc[acc.length - 1].push(el);\n    return acc;\n}, []);\n/** Flat array - unwraps one level of nested arrays */\nexport const flat = (arr) => arr.reduce((acc, el) => el ? acc.concat(el) : acc, []);\n/** Wraps passed object or primitive to array */\nexport const wrap = (arr) => {\n    if (arr === undefined || arr === null)\n        return [];\n    if (Array.isArray(arr))\n        return arr;\n    return [arr];\n};\nexport function unwrap(value) {\n    return isArrayLike(value) ? value[0] : value;\n}\n/** Makes array values unique */\nexport const uniq = (arr) => {\n    const result = [];\n    const set = new Set();\n    arr.forEach((item) => set.add(item));\n    set.forEach((item) => result.push(item));\n    return result;\n};\nexport function range(n, filler = identity) {\n    const arr = Array(n);\n    let i = 0;\n    while (i < n)\n        arr[i] = filler(i++);\n    return arr;\n}\n/**\n * @returns object with a criteria value as a key and an array of original items that belongs to the current criteria value\n */\nexport const groupBy = (array, group) => {\n    return array.reduce((obj, el) => {\n        const key = group(el);\n        obj[key] ? obj[key].push(el) : obj[key] = [el];\n        return obj;\n    }, {});\n};\n","import { wrap } from '../misc/array';\n/** Store locks for key element classes*/\nconst lockStore = new WeakMap();\n/** Mange className lock for the element */\nconst lock = (el, className, locker) => {\n    const elLocks = lockStore.get(el) || new Map();\n    const classLocks = elLocks.get(className) || new Set();\n    classLocks.add(locker);\n    elLocks.set(className, classLocks);\n    lockStore.set(el, elLocks);\n};\n/**\n * Manage className unlock for the element\n * @returns true if className have no locks\n */\nconst unlock = (el, className, locker) => {\n    const elLocks = lockStore.get(el);\n    if (!elLocks)\n        return true;\n    const classLocks = elLocks.get(className);\n    if (!classLocks)\n        return true;\n    classLocks.delete(locker);\n    return !classLocks.size;\n};\n/**\n * Add single class to the element.\n * Supports inversion and locker management.\n */\nconst add = (el, className, locker) => {\n    if (className[0] === '!')\n        return remove(el, className.substring(1), locker);\n    if (locker)\n        lock(el, className, locker);\n    el.classList.add(className);\n};\n/**\n * Remove single class from the element.\n * Supports inversion and locker management.\n */\nconst remove = (el, className, locker) => {\n    if (className[0] === '!')\n        return add(el, className.substring(1), locker);\n    if (locker && !unlock(el, className, locker))\n        return;\n    if (!locker)\n        CSSClassUtils.unlock(el, className);\n    el.classList.remove(className);\n};\n/**\n * Check if the element matches passed CSS class.\n * Supports inversion.\n */\nconst has = (el, className) => {\n    if (className[0] === '!')\n        return !has(el, className.substring(1));\n    return el.classList.contains(className);\n};\n/**\n * CSS class manipulation utilities.\n *\n * Allows manipulating with CSS classes with the following set of sub-features:\n * - JQuery-like enumeration - you can pass multiple tokens separated by space\n * - safe checks - empty or falsy token sting will be ignored without throwing an error\n * - inversion syntax - tokens that start from '!' will be processed with inverted action\n * (e.g. addCls(el, '!class') - will remove 'class' from the element, while removeCls(el, '!class') adds 'class' to the element)\n * - class locks - you can manipulate with classes using `locker` option that takes into account the modification initiator.\n * That means the class added in 'locker' mode will not be removed until all initiators that requested add class have requested its removal.\n * */\nexport class CSSClassUtils {\n    /** Splitting passed token string into CSS class names array. */\n    static splitTokens(tokenString) {\n        return (tokenString || '').split(' ').filter((str) => !!str);\n    }\n    /**\n     * Add all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static add(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => add(el, className, locker)));\n    }\n    /**\n     * Remove all classes from the class token string to the element.\n     * @see CSSClassUtils\n     * */\n    static remove(els, cls, locker) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        wrap(els).forEach((el) => tokens.forEach((className) => remove(el, className, locker)));\n    }\n    /**\n     * Toggle all classes from the class token string on the element to the passed state.\n     * @see CSSClassUtils\n     * */\n    static toggle(els, cls, state, locker) {\n        (state ? CSSClassUtils.add : CSSClassUtils.remove)(els, cls, locker);\n    }\n    /**\n     * Check if all class from token string matches to the element or elements.\n     * @see CSSClassUtils\n     * */\n    static has(els, cls) {\n        const tokens = CSSClassUtils.splitTokens(cls);\n        return wrap(els).every((el) => tokens.every((className) => has(el, className)));\n    }\n    /** Remove all lockers for the element or passed element className */\n    static unlock(els, className) {\n        if (className) {\n            wrap(els).forEach((el) => { var _a; return (_a = lockStore.get(el)) === null || _a === void 0 ? void 0 : _a.delete(className); });\n        }\n        else {\n            wrap(els).forEach((el) => lockStore.delete(el));\n        }\n    }\n}\n","import { setAttr } from '../../esl-utils/dom/attr';\nimport { EventUtils } from '../../esl-utils/dom/events';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\n/**\n * Base class for ESL custom elements.\n * Allows defining custom element with the optional custom tag name.\n */\nexport class ESLBaseElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this._connected = false;\n    }\n    connectedCallback() {\n        this._connected = true;\n        this.classList.add(this.constructor.is);\n    }\n    disconnectedCallback() {\n        this._connected = false;\n    }\n    /** Check that the element is connected and `connectedCallback` has been executed */\n    get connected() {\n        return this._connected;\n    }\n    /**\n     * Gets or sets CSS classes for the current element.\n     * @param cls - CSS classes query {@link CSSClassUtils}\n     * @param value - boolean to set CSS class(es) state or undefined to skip mutation\n     * @returns current classes state or passed state\n     */\n    $$cls(cls, value) {\n        if (value === undefined)\n            return CSSClassUtils.has(this, cls);\n        CSSClassUtils.toggle(this, cls, value);\n        return value;\n    }\n    /**\n     * Gets or sets an attribute for the current element.\n     * If the `value` param is undefined then skips mutation.\n     * @param name - attribute name\n     * @param value - string attribute value, boolean attribute state or `null` to delete attribute\n     * @returns the current attribute value or previous value for mutation\n     */\n    $$attr(name, value) {\n        const prevValue = this.getAttribute(name);\n        if (value !== undefined)\n            setAttr(this, name, value);\n        return prevValue;\n    }\n    /**\n     * Dispatches component custom event.\n     * Uses 'esl:' prefix for event name, overridable to customize event namespaces.\n     * @param eventName - event name\n     * @param eventInit - custom event init. See {@link CustomEventInit}\n     */\n    $$fire(eventName, eventInit) {\n        return EventUtils.dispatch(this, 'esl:' + eventName, eventInit);\n    }\n    /**\n     * Register component in the {@link customElements} registry\n     * @param tagName - custom tag name to register custom element\n     */\n    static register(tagName) {\n        tagName = tagName || this.is;\n        if (!tagName)\n            throw new Error('Can not define custom element');\n        const constructor = customElements.get(tagName);\n        if (constructor) {\n            if (constructor.is !== tagName)\n                throw new Error('Element declaration tag inconsistency');\n            return;\n        }\n        if (this.is !== tagName) {\n            this.is = tagName;\n        }\n        customElements.define(tagName, this);\n    }\n    /** Shortcut for `customElements.whenDefined(currentCustomElement)` */\n    static get registered() {\n        return customElements.whenDefined(this.is);\n    }\n}\n/** Custom element tag name */\nESLBaseElement.is = '';\n","/** Checks that passed value is object, but not a callable-object (function) */\nexport const isObject = (obj) => !!obj && typeof obj === 'object';\n/** Checks that passed value is an object or function */\nexport const isObjectLike = (obj) => isObject(obj) || typeof obj === 'function';\n/** Checks if the passed value is primitive */\nexport const isPrimitive = (obj) => obj === null ||\n    typeof obj === 'undefined' ||\n    typeof obj === 'string' ||\n    typeof obj === 'number' ||\n    typeof obj === 'boolean' ||\n    typeof obj === 'symbol';\n/** Checks that passed object is prototype of some class */\nexport const isPrototype = (obj) => Object.hasOwnProperty.call(obj, 'constructor');\n/** Checks that passed object is array-like */\nexport const isArrayLike = (value) => {\n    if (!value || typeof value !== 'object')\n        return false;\n    if (Array.isArray(value))\n        return true;\n    if (typeof value.length !== 'number' || value.length < 0)\n        return false;\n    return !value.length || Object.hasOwnProperty.call(value, value.length - 1);\n};\n/** Deep object compare */\nexport function deepCompare(obj1, obj2) {\n    if (Object.is(obj1, obj2))\n        return true;\n    if (typeof obj1 !== typeof obj2)\n        return false;\n    if (isObject(obj1) && isObject(obj2)) {\n        const keys1 = Object.keys(obj1);\n        const keys2 = Object.keys(obj2);\n        if (keys1.length !== keys2.length)\n            return false;\n        return !keys1.some((key) => !deepCompare(obj1[key], obj2[key]));\n    }\n    return false;\n}\n/** Find the closest property descriptor */\nexport function getPropertyDescriptor(o, prop) {\n    let proto = o;\n    while (proto) {\n        const desc = Object.getOwnPropertyDescriptor(proto, prop);\n        if (desc)\n            return desc;\n        proto = Object.getPrototypeOf(proto);\n    }\n}\n/** @returns first defined param */\nexport function defined(...params) {\n    for (const param of params) {\n        if (param !== undefined)\n            return param;\n    }\n}\n/** Makes a plain copy of obj with properties satisfying the predicate\n * If no predicate provided copies all own properties */\nexport function copy(obj, predicate = () => true) {\n    const result = Object.assign({}, obj || {});\n    Object.keys(result).forEach((key) => {\n        (!predicate(key, result[key])) && delete result[key];\n    });\n    return result;\n}\n/** Makes a flat copy without undefined keys */\nexport function copyDefinedKeys(obj) {\n    return copy(obj || {}, (key, value) => value !== void 0);\n}\n/** Omit copying provided properties from object */\nexport function omit(obj, keys) {\n    return copy(obj, key => !keys.includes(key));\n}\n/**\n * Set object property using \"path\" key\n *\n * @param target - object\n * @param path - key path, use '.' as delimiter\n * @param value - value of property\n */\nexport const set = (target, path, value) => {\n    const parts = (path || '').split('.');\n    const depth = parts.length - 1;\n    parts.reduce((cur, key, index) => {\n        if (index === depth)\n            return cur[key] = value;\n        return cur[key] = isObjectLike(cur[key]) ? cur[key] : {};\n    }, target);\n};\n/**\n * Gets object property using \"path\" key\n * Creates empty object if sub-key value is not presented.\n *\n * @param data - object\n * @param path - key path, use '.' as delimiter\n * @param defaultValue - default\n */\nexport const get = (data, path, defaultValue) => {\n    const parts = (path || '').split('.');\n    const result = parts.reduce((curr, key) => {\n        if (isObjectLike(curr))\n            return curr[key];\n        return undefined;\n    }, data);\n    return typeof result === 'undefined' ? defaultValue : result;\n};\nexport function deepMerge(...objects) {\n    return objects.reduce((res, obj, index) => {\n        if (index === 0 && Array.isArray(obj))\n            res = [];\n        isObject(obj) && Object.keys(obj).forEach((key) => {\n            const resultVal = res[key];\n            const objectVal = obj[key];\n            let mergeResult = objectVal;\n            if (isObject(objectVal)) {\n                if (typeof resultVal === 'undefined')\n                    mergeResult = deepMerge(objectVal);\n                else if (isObject(resultVal))\n                    mergeResult = deepMerge(resultVal, objectVal);\n            }\n            res[key] = mergeResult;\n        });\n        return res;\n    }, {});\n}\n","import { get } from './object';\n/** Converts string to kebab-case notation */\nexport const toKebabCase = (str) => {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').replace(/[\\s_]+/g, '-').toLowerCase();\n};\n/** Converts string to camelCase notation */\nexport const toCamelCase = (str) => {\n    return str.trim().replace(/[\\s-,_]+([a-zA-Z0-9]?)/g, (match, word) => word.toUpperCase());\n};\n/** Makes the first non-indent (space, tab, newline) letter in the string capitalized */\nexport const capitalize = (str) => {\n    let i = 0;\n    while (i < str.length && (str[i] === ' ' || str[i] === '\\t' || str[i] === '\\n'))\n        i++;\n    return str.slice(0, i) + str.charAt(i).toUpperCase() + str.slice(i + 1);\n};\n/** Unwraps string from parenthesis */\nexport const unwrapParenthesis = (str) => {\n    return str.trim().replace(/^\\((.*)\\)$/, '$1').trim();\n};\n/**\n * Parses number with the ability to pass an alternative fallback for NaN.\n * Note: falsy values except 0 are treated as NaN\n */\nexport const parseNumber = (str, nanValue) => {\n    if (str === 0)\n        return 0;\n    const value = +(str || NaN);\n    return isNaN(value) ? nanValue : value;\n};\n/**\n * Common function that returns coefficient aspect ratio\n * Supported formats: w:h, w/h, coefficient\n * @example\n * `16:9`, `16/9`, `1.77`\n * @param str - string to parse\n * @returns aspect ratio coefficient\n */\nexport function parseAspectRatio(str) {\n    const [w, h] = str.split(/[:/]/);\n    if (typeof h !== 'undefined')\n        return +w / +h;\n    return +w || 0;\n}\n/** Evaluates passed string or returns `defaultValue` */\nexport function evaluate(str, defaultValue) {\n    try {\n        // eslint-disable-next-line @typescript-eslint/no-implied-eval\n        return str ? (new Function(`return ${str}`))() : defaultValue;\n    }\n    catch (e) {\n        console.warn('Cannot parse value ', str, e);\n        return defaultValue;\n    }\n}\n/** Default RegExp to match replacements in the string for the {@link format} function */\nexport const DEF_FORMAT_MATCHER = /{[{%]?([\\w.]+)[%}]?}/g;\n/** Replaces `{key}` patterns in the string from the source object */\nexport function format(str, source, matcher = DEF_FORMAT_MATCHER) {\n    return str.replace(matcher, (match, key) => {\n        const val = get(source, key);\n        return val === undefined ? match : val;\n    });\n}\n","import { toKebabCase } from '../../esl-utils/misc/format';\nimport { getAttr, setAttr } from '../../esl-utils/dom/attr';\nfunction buildSimpleDescriptor(attrName, readOnly, defaultValue) {\n    function get() {\n        return getAttr(this, attrName, defaultValue);\n    }\n    function set(value) {\n        setAttr(this, attrName, value);\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value.\n * Maps string type property.\n * @param config - mapping configuration. See {@link AttrDescriptor}\n */\nexport const attr = (config = {}) => {\n    config = Object.assign({ defaultValue: '' }, config);\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildSimpleDescriptor(attrName, !!config.readonly, config.defaultValue));\n    };\n};\n","/**\n * Postpone action after next render\n */\nexport const afterNextRender = (callback) => requestAnimationFrame(() => requestAnimationFrame(callback));\n/**\n * Decorate function to schedule execution after next render\n * @returns decorated function\n */\nexport const rafDecorator = (fn) => {\n    let lastArgs = null; // null if no calls requested\n    return function (...args) {\n        if (lastArgs === null) {\n            requestAnimationFrame(() => {\n                lastArgs && fn.call(this, ...lastArgs);\n                lastArgs = null;\n            });\n        }\n        lastArgs = args;\n    };\n};\n","const BINDINGS_STORE_KEY = '__fnBindings__';\n/** Decorator \"bind\" allows to bind prototype method context to class instance */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function bind(target, propertyKey, descriptor) {\n    // Validation check\n    if (!descriptor || (typeof descriptor.value !== 'function')) {\n        throw new TypeError('Only class methods can be decorated via @bind');\n    }\n    // Original function\n    const fn = descriptor.value;\n    return {\n        enumerable: descriptor.enumerable,\n        configurable: descriptor.configurable,\n        get() {\n            // Accessing via prototype returns original function\n            // If the constructor property is in the context then it's not an instance\n            if (!this || this === target || Object.hasOwnProperty.call(this, 'constructor')) {\n                return fn;\n            }\n            // Bounded functions store\n            let bindings = this[BINDINGS_STORE_KEY];\n            if (!bindings) {\n                bindings = this[BINDINGS_STORE_KEY] = new WeakMap();\n            }\n            // Store binding if it does not exist\n            if (!bindings.has(fn)) {\n                bindings.set(fn, fn.bind(this));\n            }\n            // Return binding\n            return bindings.get(fn);\n        },\n        set(value) {\n            Object.defineProperty(this, propertyKey, {\n                writable: true,\n                enumerable: false,\n                configurable: true,\n                value\n            });\n        }\n    };\n}\n","/**\n * Memoization decorator function. Caches the original function result according to hash generated from arguments.\n * In case the hash function returns `undefined` value will not be memoized.\n * @see MemoHashFn Hash function signature.\n */\nexport function memoizeFn(fn, hashFn = defaultArgsHashFn) {\n    function memo(...args) {\n        const key = hashFn(...args);\n        if (key !== null && typeof key !== 'string') {\n            console.warn(`Can't cache value for ${fn.name} call.`);\n            return fn.apply(this, args);\n        }\n        if (!memo.cache.has(key)) {\n            memo.cache.set(key, fn.apply(this, args));\n        }\n        return memo.cache.get(key);\n    }\n    memo.cache = new Map();\n    memo.clear = () => memo.cache.clear();\n    memo.has = (...args) => {\n        const key = hashFn(...args);\n        return key === undefined ? false : memo.cache.has(key);\n    };\n    return memo;\n}\n/**\n * Default arguments hash function.\n * Supports only 0-1 arguments with a primitive type.\n */\nexport function defaultArgsHashFn(...args) {\n    if (args.length === 0)\n        return null;\n    if (args.length > 1)\n        return;\n    if (typeof args[0] !== 'string' && typeof args[0] !== 'number' && typeof args[0] !== 'boolean')\n        return;\n    return String(args[0]);\n}\n","import { defaultArgsHashFn, memoizeFn } from '../misc/memoize';\nimport { isPrototype, getPropertyDescriptor } from '../misc/object';\n/**\n * Memoization decorator helper.\n * @see memoizeFn Original memoizeFn function decorator.\n */\nexport function memoize(hashFn = defaultArgsHashFn) {\n    return function (target, prop, descriptor) {\n        if (!descriptor || typeof (descriptor.value || descriptor.get) !== 'function') {\n            throw new TypeError('Only get accessors or class methods can be decorated via @memoize');\n        }\n        if (isPrototype(target)) {\n            // Object members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeGetter(descriptor.get, prop));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeMethod(descriptor.value, prop, hashFn));\n        }\n        else {\n            // Static members\n            (typeof descriptor.get === 'function') && (descriptor.get = memoizeFn(descriptor.get));\n            (typeof descriptor.value === 'function') && (descriptor.value = memoizeFn(descriptor.value, hashFn));\n        }\n    };\n}\n// Lock storage to prevent cache logic for some key\nconst locks = new WeakMap();\nconst defineOwnKeySafe = (obj, prop, value) => {\n    locks.set(obj, prop); // IE try to get key with the prototype instance call, so we lock it\n    Object.defineProperty(obj, prop, { value, writable: true, configurable: true });\n    locks.delete(obj); // Free property key\n};\n/** Cache getter result as an object own property */\nfunction memoizeGetter(originalMethod, prop) {\n    return function () {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const value = originalMethod.call(this);\n        defineOwnKeySafe(this, prop, value);\n        return value;\n    };\n}\n/** Cache method memo function in the current context on call */\nfunction memoizeMethod(originalMethod, prop, hashFn) {\n    return function (...args) {\n        if (locks.get(this) === prop)\n            return originalMethod;\n        const memo = memoizeFn(originalMethod, hashFn);\n        defineOwnKeySafe(this, prop, memo);\n        return memo.apply(this, args);\n    };\n}\n/**\n * Clear memoization cache for passed target and property.\n * Accepts not own properties.\n * Note: be sure that you targeting memoized property or function.\n * Clear utility has no 100% check to prevent modifying incorrect (not memoized) property keys\n */\nmemoize.clear = function (target, property) {\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return;\n    if (typeof desc.get === 'function' && typeof desc.get.clear === 'function')\n        return desc.get.clear();\n    if (typeof desc.value === 'function' && typeof desc.value.clear === 'function')\n        return desc.value.clear();\n    if (Object.hasOwnProperty.call(target, property))\n        delete target[property];\n};\n/** Check if property has cache for the passed params */\nmemoize.has = function (target, property, ...params) {\n    const desc = getPropertyDescriptor(target, property);\n    if (!desc)\n        return false;\n    if (typeof desc.get === 'function' && typeof desc.get.has === 'function')\n        return desc.get.has(...params);\n    if (typeof desc.value === 'function' && typeof desc.value.has === 'function')\n        return desc.value.has(...params);\n    return Object.hasOwnProperty.call(target, property);\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { memoize } from '../decorators/memoize';\n// TODO: functional\nexport class RTLUtils {\n    /** Check if the element in a RTL direction context */\n    static isRtl(el) {\n        return getComputedStyle(el || document.body).direction === 'rtl';\n    }\n    /**\n     * @returns RTL scroll type (lazy, memoized)\n     */\n    static get scrollType() {\n        let scrollType = 'default';\n        const el = createDummyEl();\n        document.body.appendChild(el);\n        if (el.scrollLeft <= 0) {\n            el.scrollLeft = 2;\n            scrollType = el.scrollLeft < 2 ? 'negative' : 'reverse';\n        }\n        document.body.removeChild(el);\n        return scrollType;\n    }\n    static normalizeScrollLeft(el, value = null, isRtl = RTLUtils.isRtl(el)) {\n        value = (value === null) ? el.scrollLeft : value;\n        switch (isRtl ? RTLUtils.scrollType : '') {\n            case 'negative':\n                return el.scrollWidth - el.clientWidth + value;\n            case 'reverse':\n                return el.scrollWidth - el.clientWidth - value;\n            default:\n                return value;\n        }\n    }\n}\n__decorate([\n    memoize()\n], RTLUtils, \"scrollType\", null);\n/** Creates the dummy test element with a horizontal scroll presented */\nfunction createDummyEl() {\n    const el = document.createElement('div');\n    el.appendChild(document.createTextNode('ESL!'));\n    el.dir = 'rtl';\n    Object.assign(el.style, {\n        position: 'absolute',\n        top: '-1000px',\n        width: '4px',\n        height: '1px',\n        fontSize: '14px',\n        overflow: 'scroll'\n    });\n    return el;\n}\n","/**\n * @returns Promise that will be resolved in `timeout` with optional `payload`\n */\nexport function promisifyTimeout(timeout, payload) {\n    return new Promise((resolve) => setTimeout(resolve.bind(null, payload), timeout));\n}\n/**\n * @returns Promise that will be resolved by dispatching `event` on `target`\n * Or it will be rejected in `timeout` if it's specified\n * Optional `options` for addEventListener can be also specified\n */\nexport function promisifyEvent(target, event, timeout, options) {\n    return new Promise((resolve, reject) => {\n        function eventCallback(e) {\n            target.removeEventListener(event, eventCallback, options);\n            resolve(e);\n        }\n        target.addEventListener(event, eventCallback, options);\n        if (typeof timeout === 'number' && timeout >= 0) {\n            setTimeout(() => reject(new Error('Rejected by timeout')), timeout);\n        }\n    });\n}\n/**\n * Short helper to make Promise from element state marker\n * @returns Promise that will be resolved if the target `marker` property is truthful or `event` is dispatched\n * @example\n * `const imgReady = promisifyMarker(eslImage, 'ready');`\n */\nexport function promisifyMarker(target, marker, event = marker) {\n    if (target[marker])\n        return Promise.resolve(target);\n    return promisifyEvent(target, event).then(() => target);\n}\n/**\n * Call `callback` limited by `tryCount` amount of times with interval in `timeout` ms\n * @returns Promise that will be resolved as soon as callback returns truthy value, or reject it by limit.\n */\nexport function tryUntil(callback, tryCount = 2, timeout = 100) {\n    return new Promise((resolve, reject) => {\n        (function check() {\n            let result;\n            try {\n                result = callback();\n            }\n            catch (_a) {\n                result = undefined;\n            }\n            if (result || (tryCount--) < 0) {\n                result ? resolve(result) : reject(new Error('Rejected by limit of tries'));\n            }\n            else {\n                setTimeout(check, timeout);\n            }\n        })();\n    });\n}\n/**\n * Call async callback in a sequence passed number of times\n * Initial call starts as a microtask\n * @param callback - async chain function\n * @param count - count o calls\n * @returns sequence end promise\n */\nexport function repeatSequence(callback, count = 1) {\n    if (count < 1)\n        return Promise.reject();\n    if (count === 1)\n        return Promise.resolve().then(callback);\n    return repeatSequence(callback, count - 1).then(callback);\n}\n/**\n * Create Deferred Object that wraps promise and its resolve and reject callbacks\n */\nexport function createDeferred() {\n    let reject;\n    let resolve;\n    // Both reject and resolve will be assigned anyway while the Promise constructing.\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve, reject };\n}\n/**\n * Safe wrap for Promise.resolve to use in Promise chain\n * @example\n * `const resolvedPromise = rejectedPromise.catch(resolvePromise);`\n */\nexport function resolvePromise(arg) {\n    return Promise.resolve(arg);\n}\n/**\n * Safe wrap for Promise.reject to use in Promise chain\n * @example\n * `const rejectedPromise = resolvedPromise.then(rejectPromise);`\n */\nexport function rejectPromise(arg) {\n    return Promise.reject(arg);\n}\n/**\n * Promise utils helper class\n * Note: use individual methods in case you need correct \"tree shaking\"\n */\nexport class PromiseUtils {\n}\nPromiseUtils.fromTimeout = promisifyTimeout;\nPromiseUtils.fromEvent = promisifyEvent;\nPromiseUtils.fromMarker = promisifyMarker;\nPromiseUtils.repeat = repeatSequence;\nPromiseUtils.tryUntil = tryUntil;\nPromiseUtils.deferred = createDeferred;\nPromiseUtils.resolve = resolvePromise;\nPromiseUtils.reject = rejectPromise;\n","import { createDeferred } from './promise';\n/**\n * Creates a debounced function that implements {@link Debounced}.\n * Debounced function delays invoking func until after wait milliseconds have elapsed\n * since the last time the debounced function was invoked.\n * The func is invoked with the last arguments provided to the debounced function.\n * @param fn - function to decorate\n * @param wait - time to debounce\n * @param thisArg - optional context to call original function, use debounced method call context if not defined\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function debounce(fn, wait = 10, thisArg) {\n    let timeout = null;\n    let deferred = null;\n    function debouncedSubject(...args) {\n        deferred = deferred || createDeferred();\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = window.setTimeout(() => {\n            timeout = null;\n            // fn.apply to save call context\n            deferred.resolve(fn.apply(thisArg || this, args));\n            deferred = null;\n        }, wait);\n    }\n    function cancel() {\n        (typeof timeout === 'number') && clearTimeout(timeout);\n        timeout = null;\n        deferred === null || deferred === void 0 ? void 0 : deferred.reject();\n        deferred = null;\n    }\n    Object.defineProperty(debouncedSubject, 'promise', {\n        get: () => deferred ? deferred.promise : Promise.resolve()\n    });\n    Object.defineProperty(debouncedSubject, 'cancel', {\n        writable: false,\n        enumerable: false,\n        value: cancel\n    });\n    return debouncedSubject;\n}\n","/**\n * Abstract Observable implementation\n * @author Yuliya Adamskaya\n */\nexport class Observable {\n    constructor() {\n        this._listeners = new Set();\n    }\n    addListener(listener) {\n        this._listeners.add(listener);\n    }\n    removeListener(listener) {\n        this._listeners.delete(listener);\n    }\n    fire(...args) {\n        this._listeners.forEach((listener) => {\n            try {\n                listener.apply(this, args);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        });\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from './export-ns';\nconst { userAgent, vendor, platform } = window.navigator;\n// IE Detection\nexport const isTrident = /trident/i.test(userAgent);\nexport const isIE = isTrident;\n// Edge Detection\nexport const isEdgeHTML = /edg([ea]|ios)/i.test(userAgent);\nexport const isBlinkEdge = /\\sedg\\//i.test(userAgent);\nexport const isEdge = isEdgeHTML || isBlinkEdge;\n// Gecko\nexport const isGecko = /gecko/i.test(userAgent) && !/like gecko/i.test(userAgent);\nexport const isFirefox = /firefox|iceweasel|fxios/i.test(userAgent);\n// Opera / Chrome\nexport const isOpera = /(?:^opera.+?version|opr)/.test(userAgent);\nexport const isChrome = !isOpera && /google inc/.test(vendor);\n// Webkit\nexport const isWebkit = /(apple)?webkit/i.test(userAgent);\n// Safari\nexport const isSafari = isWebkit && /^((?!chrome|android).)*safari/i.test(userAgent);\n// Blink\nexport const isBlink = isWebkit && !isSafari;\n// Bot detection\nexport const isBot = /Chrome-Lighthouse|Google Page Speed Insights/i.test(userAgent);\n// Mobile\nexport const isAndroid = /Android/i.test(userAgent);\nexport const isMobileIOS13 = /* iOS 13+ detection */ (platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\nexport const isMobileIOS = /iPad|iPhone|iPod/.test(platform) || isMobileIOS13;\nexport const isLegacyMobile = /webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\nexport const isMobile = isMobileIOS || isAndroid || isLegacyMobile;\nexport const isMobileSafari = isMobileIOS && isWebkit && /CriOS/i.test(userAgent);\n// Touch Detection\nexport const isTouchDevice = (() => {\n    const navApi = window.navigator;\n    if (navApi.maxTouchPoints || navApi.msMaxTouchPoints)\n        return true;\n    return ('ontouchstart' in window) || ('DocumentTouch' in window && document instanceof Touch);\n})();\n// Hover check\n// Note: always true for IE\nexport const hasHover = !matchMedia('(hover: none)').matches;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nexport const TOUCH_EVENTS = (() => {\n    const isTouch = isTouchDevice;\n    return {\n        START: isTouch ? 'touchstart' : 'pointerdown',\n        MOVE: isTouch ? 'touchmove' : 'pointermove',\n        END: isTouch ? 'touchend' : 'pointerup'\n    };\n})();\n/**\n * Device detection utility\n * @readonly\n */\nlet DeviceDetector = class DeviceDetector {\n};\n// IE Detection\nDeviceDetector.isTrident = isTrident;\nDeviceDetector.isIE = isIE;\n// Edge Detection\nDeviceDetector.isEdgeHTML = isEdgeHTML;\nDeviceDetector.isBlinkEdge = isBlinkEdge;\nDeviceDetector.isEdge = isEdge;\n// Gecko\nDeviceDetector.isGecko = isGecko;\nDeviceDetector.isFirefox = isFirefox;\n// Opera / Chrome\nDeviceDetector.isOpera = isOpera;\nDeviceDetector.isChrome = isChrome;\n// Webkit\nDeviceDetector.isWebkit = isWebkit;\n// Safari\nDeviceDetector.isSafari = isSafari;\n// Blink\nDeviceDetector.isBlink = isBlink;\n// Bot detection\nDeviceDetector.isBot = isBot;\n// Mobile\nDeviceDetector.isAndroid = isAndroid;\nDeviceDetector.isMobileIOS13 = isMobileIOS13;\nDeviceDetector.isMobileIOS = isMobileIOS;\nDeviceDetector.isLegacyMobile = isLegacyMobile;\nDeviceDetector.isMobile = isMobile;\nDeviceDetector.isMobileSafari = isMobileSafari;\n// Touch Detection\nDeviceDetector.isTouchDevice = isTouchDevice;\n// Hover check\n// Note: always true for IE\nDeviceDetector.hasHover = hasHover;\n/** @deprecated TODO: needs to be reworked or moved away from device detector */\nDeviceDetector.TOUCH_EVENTS = TOUCH_EVENTS;\nDeviceDetector = __decorate([\n    ExportNs('DeviceDetector')\n], DeviceDetector);\nexport { DeviceDetector };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenDPR_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\n/**\n * DPR preprocessor. Used to replace DPR shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLScreenDPR = ESLScreenDPR_1 = class ESLScreenDPR {\n    static toDPI(dpr) {\n        return (96 * dpr).toFixed(1);\n    }\n    static process(match) {\n        if (!ESLScreenDPR_1.VALUE_REGEXP.test(match))\n            return;\n        const dpr = parseFloat(match);\n        if (dpr < 0 || isNaN(dpr))\n            return;\n        if (ESLScreenDPR_1.ignoreBotsDpr && DeviceDetector.isBot && dpr > 1)\n            return 'not all';\n        if (DeviceDetector.isSafari)\n            return `(-webkit-min-device-pixel-ratio: ${dpr})`;\n        return `(min-resolution: ${ESLScreenDPR_1.toDPI(dpr)}dpi)`;\n    }\n};\nESLScreenDPR.VALUE_REGEXP = /(\\d(\\.\\d)?)x/;\n/** Option to exclude dpr greater then 2 for bots */\nESLScreenDPR.ignoreBotsDpr = false;\nESLScreenDPR = ESLScreenDPR_1 = __decorate([\n    ExportNs('ScreenDPR')\n], ESLScreenDPR);\nexport { ESLScreenDPR };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLScreenBreakpoints_1;\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst registry = new Map();\n/**\n * ESL Screen Breakpoints registry\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n *\n * Screen Breakpoint registry is used to provide custom breakpoints for {@link ESLMediaQuery}\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLScreenBreakpoints = ESLScreenBreakpoints_1 = class ESLScreenBreakpoints {\n    /**\n     * Add or replace breakpoint shortcut that can be used inside ESLMediaQuery\n     * @param name - name of shortcut\n     * @param minWidth - min width for breakpoint\n     * @param maxWidth - max width for breakpoint\n     */\n    static add(name, minWidth, maxWidth) {\n        name = name.toLowerCase();\n        if (ESLScreenBreakpoints_1.BP_NAME_REGEXP.test(name)) {\n            const current = registry.get(name);\n            registry.set(name, new ESLScreenBreakpoint(name, minWidth, maxWidth));\n            return current;\n        }\n        throw new Error('The shortcut should consist only of Latin characters and be at least one character long.');\n    }\n    /** Removes screen breakpoint */\n    static remove(name) {\n        return registry.delete(name.toLowerCase());\n    }\n    /** @returns known breakpoint shortcut instance */\n    static get(name) {\n        return registry.get((name || '').toLowerCase());\n    }\n    /** All available breakpoints names */\n    static get names() {\n        const keys = [];\n        registry.forEach((value, key) => keys.push(key));\n        return keys;\n    }\n    /** @returns breakpoints shortcut replacement */\n    static process(term) {\n        const [, sign, bp] = term.match(ESLScreenBreakpoints_1.BP_REGEXP) || [];\n        const shortcut = ESLScreenBreakpoints_1.get(bp);\n        if (!shortcut)\n            return;\n        if (sign === '+')\n            return shortcut.mediaQueryGE;\n        if (sign === '-')\n            return shortcut.mediaQueryLE;\n        return shortcut.mediaQuery;\n    }\n};\nESLScreenBreakpoints.BP_REGEXP = /^([+-]?)([a-z]+)/i;\nESLScreenBreakpoints.BP_NAME_REGEXP = /^[a-z]+/i;\nESLScreenBreakpoints = ESLScreenBreakpoints_1 = __decorate([\n    ExportNs('ScreenBreakpoints')\n], ESLScreenBreakpoints);\nexport { ESLScreenBreakpoints };\n/** ESL Screen Breakpoint description */\nexport class ESLScreenBreakpoint {\n    constructor(name, min, max) {\n        this.name = name;\n        this.min = min;\n        this.max = max;\n    }\n    get mediaQuery() {\n        return `(min-width: ${this.min}px) and (max-width: ${this.max}px)`;\n    }\n    get mediaQueryGE() {\n        return `(min-width: ${this.min}px)`;\n    }\n    get mediaQueryLE() {\n        return `(max-width: ${this.max}px)`;\n    }\n    toString() {\n        return `[${this.name}]: ${this.min} to ${this.max}`;\n    }\n}\n// Defaults\nESLScreenBreakpoints.add('xs', 1, 767);\nESLScreenBreakpoints.add('sm', 768, 991);\nESLScreenBreakpoints.add('md', 992, 1199);\nESLScreenBreakpoints.add('lg', 1200, 1599);\nESLScreenBreakpoints.add('xl', 1600, 999999);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DeviceDetector } from '../../../esl-utils/environment/device-detector';\nimport { ExportNs } from '../../../esl-utils/environment/export-ns';\nconst shortcuts = new Map();\n/**\n * Static shortcuts preprocessor. Used to store device related shortcuts.\n * @author Alexey Stsefanovich (ala'n)\n *\n * @implements IMediaQueryPreprocessor statically\n */\nlet ESLEnvShortcuts = class ESLEnvShortcuts {\n    /**\n     * Add mapping\n     * @param shortcut - term to find in query\n     * @param value - media query string or boolean result (that represents `all` or `not all` conditions)\n     */\n    static add(shortcut, value) {\n        if (!['boolean', 'string'].includes(typeof value))\n            value = false;\n        shortcuts.set(shortcut.toLowerCase(), value);\n    }\n    /** Remove mapping for passed shortcut term */\n    static remove(shortcut) {\n        return shortcuts.delete(shortcut.toLowerCase());\n    }\n    /** Replaces shortcut to registered result */\n    static process(match) {\n        if (shortcuts.has(match))\n            return shortcuts.get(match);\n    }\n};\n// For debug purposes\nESLEnvShortcuts._shortcuts = shortcuts;\nESLEnvShortcuts = __decorate([\n    ExportNs('EnvShortcuts')\n], ESLEnvShortcuts);\nexport { ESLEnvShortcuts };\n// Touch check\nESLEnvShortcuts.add('touch', DeviceDetector.isTouchDevice);\n// Basic device type shortcuts\nESLEnvShortcuts.add('bot', DeviceDetector.isBot);\nESLEnvShortcuts.add('mobile', DeviceDetector.isMobile);\nESLEnvShortcuts.add('desktop', !DeviceDetector.isMobile);\nESLEnvShortcuts.add('android', DeviceDetector.isAndroid);\nESLEnvShortcuts.add('ios', DeviceDetector.isMobileIOS);\n// Basic browser shortcuts\nESLEnvShortcuts.add('ie', DeviceDetector.isIE);\nESLEnvShortcuts.add('edge', DeviceDetector.isEdgeHTML);\nESLEnvShortcuts.add('gecko', DeviceDetector.isGecko);\nESLEnvShortcuts.add('blink', DeviceDetector.isBlink);\nESLEnvShortcuts.add('safari', DeviceDetector.isSafari);\nESLEnvShortcuts.add('safari-ios', DeviceDetector.isMobileSafari);\n","/**\n * Const media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Ignores listeners always return the same result.\n * Have only two instances: {@link ALL} and {@link NOT_ALL}\n */\nclass MediaQueryConstCondition {\n    constructor(_matches) {\n        this._matches = _matches;\n    }\n    get matches() {\n        return this._matches;\n    }\n    addListener(cb) { }\n    removeListener(cb) { }\n    optimize() {\n        return this;\n    }\n    toString() {\n        return this._matches ? 'all' : 'not all';\n    }\n    /** Compare const media condition with the passed query instance or string */\n    eq(val) {\n        return val.toString().trim() === this.toString();\n    }\n}\nexport const ALL = new MediaQueryConstCondition(true);\nexport const NOT_ALL = new MediaQueryConstCondition(false);\n","import { ALL, NOT_ALL } from './media-query-base';\n/**\n * Simple media condition implementation\n * @author Alexey Stsefanovich (ala'n)\n *\n * Wraps matchMedia instance\n */\nexport class MediaQueryCondition {\n    constructor(query, inverted = false) {\n        this._inverted = inverted;\n        this._mq = matchMedia(query.trim() || 'all');\n    }\n    get matches() {\n        return this._inverted ? !this._mq.matches : this._mq.matches;\n    }\n    addListener(listener) {\n        if (typeof this._mq.addEventListener === 'function') {\n            this._mq.addEventListener('change', listener);\n        }\n        else {\n            this._mq.addListener(listener);\n        }\n    }\n    removeListener(listener) {\n        if (typeof this._mq.removeEventListener === 'function') {\n            this._mq.removeEventListener('change', listener);\n        }\n        else {\n            this._mq.removeListener(listener);\n        }\n    }\n    /** Optimize query. Can simplify query to {@link MediaQueryConstCondition} */\n    optimize() {\n        if (ALL.eq(this))\n            return this._inverted ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(this))\n            return this._inverted ? ALL : NOT_ALL;\n        return this;\n    }\n    toString() {\n        const query = this._mq.media;\n        const inverted = this._inverted;\n        const complex = inverted && /\\)[\\s\\w]+\\(/.test(query);\n        return (inverted ? 'not ' : '') + (complex ? `(${query})` : query);\n    }\n}\n","import { Observable } from '../../../esl-utils/abstract/observable';\nimport { ALL, NOT_ALL } from './media-query-base';\n/**\n * Abstract multiple media conditions container\n * @author Alexey Stsefanovich (ala'n)\n *\n * Observe all child items. Dispatch changes when the whole condition result is changed\n */\nclass MediaQueryContainer extends Observable {\n    constructor(items = []) {\n        super();\n        this.items = items;\n        this._matches = this.matches;\n        this._onChildChange = this._onChildChange.bind(this);\n    }\n    addListener(listener) {\n        super.addListener(listener);\n        if (this._listeners.size > 1)\n            return;\n        this.items.forEach((item) => item.addListener(this._onChildChange));\n    }\n    removeListener(listener) {\n        super.removeListener(listener);\n        if (this._listeners.size)\n            return;\n        this.items.forEach((item) => item.removeListener(this._onChildChange));\n    }\n    get matches() {\n        return false;\n    }\n    /** Exclude const conditions. Unwrap empty or trivial (with one item) containers */\n    optimize() {\n        return this;\n    }\n    /** Handle query change and dispatch it on top level in case result value is changed */\n    _onChildChange() {\n        const { matches } = this;\n        if (this._matches === matches)\n            return;\n        this.fire(this._matches = matches);\n    }\n}\n/** Conjunction (AND) group of media conditions */\nexport class MediaQueryConjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.every((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => NOT_ALL.eq(item)))\n            return NOT_ALL;\n        const items = optimizedItems.filter((item) => !ALL.eq(item));\n        if (items.length === 0)\n            return ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryConjunction(items);\n    }\n    toString() {\n        return this.items.join(' and ');\n    }\n}\n/** Disjunction (OR) group of media conditions */\nexport class MediaQueryDisjunction extends MediaQueryContainer {\n    get matches() {\n        return this.items.some((item) => item.matches);\n    }\n    optimize() {\n        const optimizedItems = this.items.map((item) => item.optimize());\n        if (optimizedItems.some((item) => ALL.eq(item)))\n            return ALL;\n        const items = optimizedItems.filter((item) => !NOT_ALL.eq(item));\n        if (items.length === 0)\n            return NOT_ALL;\n        if (items.length === 1)\n            return items[0];\n        return new MediaQueryDisjunction(items);\n    }\n    toString(pretty = false) {\n        return this.items.join(pretty ? ' or ' : ', ');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaQuery_1;\nimport { memoize } from '../../esl-utils/decorators/memoize';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLScreenDPR } from './common/screen-dpr';\nimport { ESLScreenBreakpoints } from './common/screen-breakpoint';\nimport { ESLEnvShortcuts } from './common/env-shortcuts';\nimport { ALL, NOT_ALL } from './conditions/media-query-base';\nimport { MediaQueryCondition } from './conditions/media-query-condition';\nimport { MediaQueryConjunction, MediaQueryDisjunction } from './conditions/media-query-containers';\n/**\n * ESL Media Query\n * Provides special media condition syntax - ESLMediaQuery\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya, Natallia Harshunova\n *\n * Utility to support extended MediaQuery features\n * Supports\n * - CSS MediaQuery matching check\n * - DPR display queries (`@x1|@x2|@x3`)\n * - Registered screen default sizes (breakpoints) shortcuts (`@[-|+](XS|SM|MD|LG|XL)`)\n * - Device and browser shortcuts (`@MOBILE|@DESKTOP|@IE`)\n * - Custom static shortcuts and custom query preprocessors\n * - `not` logic operation (can have multiple not operators before any term of the query)\n * - `or` or `,` logical operator (have a lowest priority)\n * - Query matching change listeners\n *\n * Building query process:\n *\n * [Building query logical tree] - [preprocess nodes queries] - [building native MediaQueryList nodes] - [query tree optimization]\n */\nlet ESLMediaQuery = ESLMediaQuery_1 = class ESLMediaQuery {\n    /** Adds {@link IMediaQueryPreprocessor} instance for query preprocessing step */\n    static use(preprocessor) {\n        this._preprocessors.unshift(preprocessor);\n        return this;\n    }\n    /** Cached method to create {@link ESLMediaQuery} condition instance from query string */\n    static for(query) {\n        return ESLMediaQuery_1.from(query);\n    }\n    /** Creates {@link ESLMediaQuery} condition instance from query string */\n    static from(query) {\n        const conjunctions = query.split(/\\sor\\s|,/).map((term) => {\n            const conditions = term.split(/\\sand\\s/).map(ESLMediaQuery_1.parseSimpleQuery);\n            return new MediaQueryConjunction(conditions);\n        });\n        return new MediaQueryDisjunction(conjunctions).optimize();\n    }\n    /** Preprocess simple query term by applying replacers and shortcuts rules */\n    static preprocess(term) {\n        if (!this.SHORTCUT_PATTERN.test(term))\n            return term;\n        const shortcut = term.trim().substring(1).toLowerCase();\n        for (const replacer of this._preprocessors) {\n            const result = replacer.process(shortcut);\n            if (typeof result === 'string')\n                return result;\n            if (typeof result === 'boolean')\n                return result ? 'all' : 'not all';\n        }\n        return term;\n    }\n    /** Creates simple {@link ESLMediaQuery} condition */\n    static parseSimpleQuery(term) {\n        const query = term.replace(/^\\s*not\\s+/, '');\n        const queryInverted = query !== term;\n        const processedQuery = ESLMediaQuery_1.preprocess(query);\n        const sanitizedQuery = processedQuery.replace(/^\\s*not\\s+/, '');\n        const resultInverted = processedQuery !== sanitizedQuery;\n        const invert = queryInverted !== resultInverted;\n        if (ALL.eq(sanitizedQuery))\n            return invert ? NOT_ALL : ALL;\n        if (NOT_ALL.eq(sanitizedQuery))\n            return invert ? ALL : NOT_ALL;\n        return new MediaQueryCondition(sanitizedQuery, invert);\n    }\n};\n/** Always true condition */\nESLMediaQuery.ALL = ALL;\n/** Always false condition */\nESLMediaQuery.NOT_ALL = NOT_ALL;\nESLMediaQuery.SHORTCUT_PATTERN = /@([a-z0-9.+-]+)/i;\nESLMediaQuery._preprocessors = [];\n__decorate([\n    memoize()\n], ESLMediaQuery, \"for\", null);\nESLMediaQuery = ESLMediaQuery_1 = __decorate([\n    ExportNs('MediaQuery')\n], ESLMediaQuery);\nexport { ESLMediaQuery };\n// Register otb preprocessors\nESLMediaQuery.use(ESLScreenDPR);\nESLMediaQuery.use(ESLScreenBreakpoints);\nESLMediaQuery.use(ESLEnvShortcuts);\n","import { ESLMediaQuery } from './esl-media-query';\n/**\n * ESL Media Rule\n * @author Yuliya Adamskaya\n *\n * Helper class to wrap {@link ESLMediaQuery} with the payload value\n * @see ESLMediaQuery\n * @see ESLMediaRuleList\n */\nexport class ESLMediaRule {\n    constructor(payload, query = '') {\n        this._query = ESLMediaQuery.for(query);\n        this._default = !query;\n        this._payload = payload;\n    }\n    toString() {\n        return `${this._query} => ${this._payload}`;\n    }\n    /** Subscribes on inner {@link ESLMediaQuery} changes */\n    addListener(listener) {\n        this._query.addListener(listener);\n    }\n    /** Unsubscribes from inner {@link ESLMediaQuery} changes */\n    removeListener(listener) {\n        this._query.removeListener(listener);\n    }\n    /** @returns if the inner {@link ESLMediaQuery} is matching current device configuration */\n    get matches() {\n        return this._query.matches;\n    }\n    /** @returns wrapped payload value */\n    get payload() {\n        return this._payload;\n    }\n    /**\n     * @returns if the rule was created with an empty query\n     * @see ESLMediaRuleList\n     */\n    get default() {\n        return this._default;\n    }\n    /**\n     * Creates the {@link ESLMediaRule} instance from payload string, query and valueParser.\n     * If the payload parse result is undefined then rule will be undefined.\n     */\n    static create(payload, query, parser) {\n        const payloadValue = parser(payload.trim());\n        if (typeof payloadValue === 'undefined')\n            return undefined;\n        return new ESLMediaRule(payloadValue, query.trim());\n    }\n    /** Parses the rule string to the {@link ESLMediaRule} instance */\n    static parse(lex, parser) {\n        const parts = lex.split('=>');\n        const query = parts.length === 2 ? parts[0] : '';\n        const payload = parts.length === 2 ? parts[1] : parts[0];\n        return ESLMediaRule.create(payload, query, parser);\n    }\n    /** Shortcut to create always active {@link ESLMediaRule} with passed value */\n    static all(payload) {\n        return new ESLMediaRule(payload, 'all');\n    }\n    /** Shortcut to create condition-less {@link ESLMediaRule} */\n    static default(payload) {\n        return new ESLMediaRule(payload);\n    }\n    /** Shortcut to create always inactive {@link ESLMediaRule} */\n    static empty() {\n        return new ESLMediaRule(undefined, 'all');\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLMediaRuleList_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { Observable } from '../../esl-utils/abstract/observable';\nimport { evaluate } from '../../esl-utils/misc/format';\nimport { isPrimitive } from '../../esl-utils/misc/object';\nimport { ESLMediaRule } from './esl-media-rule';\n/**\n * ESLMediaRuleList - {@link ESLMediaRule} observable collection\n * @author Yuliya Adamskaya\n *\n * Represents observable object that wraps environment to value mapping\n */\nlet ESLMediaRuleList = ESLMediaRuleList_1 = class ESLMediaRuleList extends Observable {\n    constructor(rules) {\n        super();\n        this._rules = rules;\n        this._default = rules.filter((rule) => rule.default)[0];\n        this._onMatchChanged = this._onMatchChanged.bind(this);\n    }\n    static parse(query, parser = String) {\n        const rules = [];\n        query.split('|').forEach((lex) => {\n            const rule = ESLMediaRule.parse(lex, parser);\n            if (!rule)\n                return;\n            rule.default ? rules.unshift(rule) : rules.push(rule);\n        });\n        return new ESLMediaRuleList_1(rules);\n    }\n    static parseTuple(values, mask, parser = String) {\n        const valueList = values.split('|');\n        const conditions = mask.split('|');\n        if (valueList.length !== conditions.length)\n            throw new Error('Value doesn\\'t correspond to mask');\n        const rules = conditions.map((query, i) => ESLMediaRule.create(valueList[i], query, parser));\n        const validRules = rules.filter((rule) => !!rule);\n        return new ESLMediaRuleList_1(validRules);\n    }\n    /** Subscribes to the instance active rule change */\n    addListener(listener) {\n        super.addListener(listener);\n        if (this._listeners.size > 1)\n            return;\n        this._rules.forEach((rule) => rule.addListener(this._onMatchChanged));\n    }\n    /** Unsubscribes from the instance active rule change */\n    removeListener(listener) {\n        super.removeListener(listener);\n        if (this._listeners.size)\n            return;\n        this._rules.forEach((rule) => rule.removeListener(this._onMatchChanged));\n    }\n    /** Array of {@link ESLMediaRule}s that forms the current {@link ESLMediaRuleList} */\n    get rules() {\n        return this._rules;\n    }\n    /** Cached active {@link ESLMediaRule} */\n    get active() {\n        if (!this._active || !this._listeners.size) {\n            this._active = this.activeRule;\n        }\n        return this._active;\n    }\n    /** The last active rule in the list */\n    get activeRule() {\n        const satisfiedRules = this.rules.filter((rule) => rule.matches);\n        return satisfiedRules.length > 0 ? satisfiedRules[satisfiedRules.length - 1] : ESLMediaRule.empty();\n    }\n    /** Active rule payload value */\n    get activeValue() {\n        const value = this.active.payload;\n        if (isPrimitive(value) || !this.default || isPrimitive(this.default.payload))\n            return value;\n        return Object.assign({}, this.default.payload || {}, value);\n    }\n    /** {@link ESLMediaRule} that is used as a default rule */\n    get default() {\n        return this._default;\n    }\n    /** Handles inner rules state change */\n    _onMatchChanged() {\n        const rule = this.activeRule;\n        if (this._active === rule)\n            return;\n        this.fire(this._active = rule, this);\n    }\n};\n/** String value parser (default) */\nESLMediaRuleList.STRING_PARSER = String;\n/** Object value parser. Uses {@link evaluate} to parse value */\nESLMediaRuleList.OBJECT_PARSER = (val) => evaluate(val);\nESLMediaRuleList = ESLMediaRuleList_1 = __decorate([\n    ExportNs('MediaRuleList')\n], ESLMediaRuleList);\nexport { ESLMediaRuleList };\n","import { setAttr } from '../../esl-utils/dom/attr';\nimport { toKebabCase } from '../../esl-utils/misc/format';\nfunction buildConditionalDescriptor(attrName, readOnly) {\n    function get() {\n        return this.hasAttribute(attrName);\n    }\n    function set(value) {\n        setAttr(this, attrName, !!value);\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element boolean (marker) attribute state.\n * Maps boolean type property.\n * @param config - mapping configuration. See {@link BoolAttrDescriptor}\n */\nexport const boolAttr = (config = {}) => {\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildConditionalDescriptor(attrName, !!config.readonly));\n    };\n};\n","import { onDocumentReady } from '../dom/ready';\n/** Defer method execution to the next task with dom ready state precondition */\nexport function ready(target, propertyKey, descriptor) {\n    if (!descriptor || typeof descriptor.value !== 'function') {\n        throw new TypeError('Only class methods can be decorated via document ready decorator');\n    }\n    const fn = descriptor.value;\n    descriptor.value = function (...arg) {\n        onDocumentReady(() => fn.call(this, ...arg));\n    };\n}\n","/**\n * Execute callback in bounds of the next task with dom ready state precondition\n */\nexport function onDocumentReady(callback) {\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', function fn() {\n            document.removeEventListener('DOMContentLoaded', fn);\n            setTimeout(() => callback());\n        });\n    }\n    else {\n        setTimeout(() => callback());\n    }\n}\n","export const TAB = 'Tab';\nexport const ENTER = 'Enter';\nexport const ESC = 'Escape';\nexport const SPACE = ' ';\nexport const BACKSPACE = 'Backspace';\nexport const ALT = 'Alt';\nexport const SHIFT = 'Shift';\nexport const CONTROL = 'Control';\nexport const PAUSE = 'Pause';\nexport const END = 'End';\nexport const HOME = 'Home';\nexport const DELETE = 'Delete';\nexport const PAGE_UP = 'PageUp';\nexport const PAGE_DOWN = 'PageDown';\nexport const ARROW_LEFT = 'ArrowLeft';\nexport const ARROW_UP = 'ArrowUp';\nexport const ARROW_RIGHT = 'ArrowRight';\nexport const ARROW_DOWN = 'ArrowDown';\nexport const SYSTEM_KEYS = [TAB, ALT, SHIFT, CONTROL, PAGE_UP, PAGE_DOWN, ARROW_LEFT, ARROW_UP, ARROW_RIGHT, ARROW_DOWN];\n","/** Check that `nodeA` and `nodeB` are from the same tree path */\nexport const isRelativeNode = (nodeA, nodeB) => {\n    return !!(nodeA && nodeB) && (nodeA.contains(nodeB) || nodeB.contains(nodeA));\n};\n/** Create function that finds next dom element, that matches selector, in the sequence declared by `next` function */\nexport const createSequenceFinder = (next) => {\n    return function (base, sel) {\n        for (let target = next(base); target; target = next(target)) {\n            if (!sel || target.matches(sel))\n                return target;\n        }\n        return null;\n    };\n};\n/** @returns first matching next sibling or null*/\nexport const findNext = createSequenceFinder((el) => el.nextElementSibling);\n/** @returns first matching previous sibling or null*/\nexport const findPrev = createSequenceFinder((el) => el.previousElementSibling);\n/** @returns first matching parent or null*/\nexport const findParent = createSequenceFinder((el) => el.parentElement);\n/** @returns Array of all matching elements in subtree or empty array */\nexport const findAll = (base, sel) => {\n    return sel ? Array.from(base.querySelectorAll(sel)) : [base];\n};\n/** @returns Array of all matching children or empty array */\nexport const findChildren = (base, sel) => {\n    return Array.from(base.children).filter((el) => !sel || el.matches(sel));\n};\n/**\n * Find closest parent node of `node` by `predicate`.\n * Optional `skipSelf` to skip initial node\n */\nexport const findClosestBy = (node, predicate, skipSelf = false) => {\n    let current = skipSelf && node ? node.parentNode : node;\n    while (current) {\n        if (predicate(current))\n            return current;\n        current = current.parentNode;\n    }\n    return null;\n};\n/** @deprecated Cumulative traversing utility set */\nexport class TraversingUtils {\n}\nTraversingUtils.isRelative = isRelativeNode;\nTraversingUtils.closestBy = findClosestBy;\nTraversingUtils.createSequenceFinder = createSequenceFinder;\nTraversingUtils.findNext = findNext;\nTraversingUtils.findPrev = findPrev;\nTraversingUtils.findParent = findParent;\nTraversingUtils.findAll = findAll;\nTraversingUtils.findChildren = findChildren;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar TraversingQuery_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { tuple, wrap, uniq } from '../../esl-utils/misc/array';\nimport { unwrapParenthesis } from '../../esl-utils/misc/format';\nimport { findAll, findChildren, findNext, findParent, findPrev } from '../../esl-utils/dom/traversing';\n/**\n * Traversing Query utility to find element via extended selector query\n * Extended query supports\n * - plain CSS selectors\n * - relative selectors (selectors that don't start from a plain selector will use passed base Element as a root)\n * - ::next and ::prev sibling pseudo-selectors\n * - ::parent and ::child pseudo-selectors\n * - ::find pseudo-selector\n * - ::first, ::last and :nth(#) limitation pseudo-selectors\n * - ::filter, ::not filtration pseudo-selectors\n *\n * @example\n * - `#id .class [attr]` - find by CSS selector in a current document\n * - ` ` - get current base element\n * - `::next` - get next sibling element\n * - `::prev` - get previous sibling element\n * - `::parent` - get base element parent\n * - `::parent(#id .class [attr])` - find the closest parent matching passed selector\n * - `::child(#id .class [attr])` - find direct child element(s) that match passed selector\n * - `::find(#id .class [attr])` - find child element(s) that match passed selector\n * - `::find(buttons, a)::not([hidden])` - find all buttons and anchors that are not have hidden attribute\n * - `::find(buttons, a)::filter(:first-child)` - find all buttons and anchors that are first child in container\n * - `::parent::child(some-tag)` - find direct child element(s) that match tag 'some-tag' in the parent\n * - `#id .class [attr]::parent` - find parent of element matching selector '#id .class [attr]' in document\n * - `::find(.row)::last::parent` - find parent of the last element matching selector '.row' from the base element subtree\n */\nlet TraversingQuery = TraversingQuery_1 = class TraversingQuery {\n    /**\n     * @returns RegExp that selects all known processors in query string\n     * e.g. /(::parent|::child|::next|::prev)/\n     */\n    static get PROCESSORS_REGEX() {\n        const keys = Object.keys(this.ELEMENT_PROCESSORS).concat(Object.keys(this.COLLECTION_PROCESSORS));\n        return new RegExp(`(${keys.join('|')})`, 'g');\n    }\n    static isCollectionProcessor([name]) {\n        return !!name && (name in this.COLLECTION_PROCESSORS);\n    }\n    static processElement(el, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.ELEMENT_PROCESSORS))\n            return [];\n        return wrap(this.ELEMENT_PROCESSORS[name](el, sel));\n    }\n    static processCollection(els, [name, selString]) {\n        const sel = unwrapParenthesis(selString || '');\n        if (!name || !(name in this.COLLECTION_PROCESSORS))\n            return [];\n        return wrap(this.COLLECTION_PROCESSORS[name](els, sel));\n    }\n    static traverseChain(collection, processors, findFirst) {\n        if (!processors.length || !collection.length)\n            return collection;\n        const [processor, ...rest] = processors;\n        if (this.isCollectionProcessor(processor)) {\n            const processedItem = this.processCollection(collection, processor);\n            return this.traverseChain(processedItem, rest, findFirst);\n        }\n        const result = [];\n        for (const target of collection) {\n            const processedItem = this.processElement(target, processor);\n            const resultCollection = this.traverseChain(processedItem, rest, findFirst);\n            if (!resultCollection.length)\n                continue;\n            if (findFirst)\n                return resultCollection.slice(0, 1);\n            result.push(...resultCollection);\n        }\n        return uniq(result);\n    }\n    static traverse(query, findFirst, base, scope = document) {\n        const parts = query.split(this.PROCESSORS_REGEX).map((term) => term.trim());\n        const rootSel = parts.shift();\n        const baseCollection = base ? [base] : [];\n        const initial = rootSel ? Array.from(scope.querySelectorAll(rootSel)) : baseCollection;\n        return this.traverseChain(initial, tuple(parts), findFirst);\n    }\n    /** @returns first matching element reached via {@link TraversingQuery} rules */\n    static first(query, base, scope) {\n        return TraversingQuery_1.traverse(query, true, base, scope)[0] || null;\n    }\n    /** @returns Array of all matching elements reached via {@link TraversingQuery} rules */\n    static all(query, base, scope) {\n        return TraversingQuery_1.traverse(query, false, base, scope);\n    }\n};\nTraversingQuery.ELEMENT_PROCESSORS = {\n    '::find': findAll,\n    '::next': findNext,\n    '::prev': findPrev,\n    '::child': findChildren,\n    '::parent': findParent\n};\nTraversingQuery.COLLECTION_PROCESSORS = {\n    '::first': (list) => list.slice(0, 1),\n    '::last': (list) => list.slice(-1),\n    '::nth': (list, sel) => {\n        const index = sel ? +sel : NaN;\n        return wrap(list[index - 1]);\n    },\n    '::not': (list, sel) => list.filter((el) => !el.matches(sel || '')),\n    '::filter': (list, sel) => list.filter((el) => el.matches(sel || ''))\n};\nTraversingQuery = TraversingQuery_1 = __decorate([\n    ExportNs('TraversingQuery')\n], TraversingQuery);\nexport { TraversingQuery };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLToggleablePlaceholder_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement } from '../../esl-base-element/core';\nlet ESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = class ESLToggleablePlaceholder extends ESLBaseElement {\n    /** reates a placeholder for a given element of the toggleable's descendant */\n    static from($el) {\n        const $placeholder = document.createElement(this.is);\n        $placeholder.$origin = $el;\n        return $placeholder;\n    }\n    connectedCallback() {\n        this.copyAttributesFromOrigin();\n        super.connectedCallback();\n    }\n    /** Builds attribute name for copy */\n    buildAttrName(name) {\n        return name === 'id' ? 'original-id' : name;\n    }\n    /** Copies allowed attributes from origin to this element */\n    copyAttributesFromOrigin() {\n        const { $origin } = this;\n        if (!$origin)\n            return;\n        this.constructor.allowedAttrs.forEach((name) => {\n            const value = $origin.getAttribute(name);\n            if (value) {\n                this.setAttribute(this.buildAttrName(name), value);\n            }\n        });\n        // sanitize class list of placeholder from the tag name of origin's element\n        this.classList.remove($origin.constructor.is);\n    }\n};\nESLToggleablePlaceholder.is = 'esl-toggleable-placeholder';\n/** List of attributes allowed to copy from origin to this element */\nESLToggleablePlaceholder.allowedAttrs = ['id', 'class'];\nESLToggleablePlaceholder = ESLToggleablePlaceholder_1 = __decorate([\n    ExportNs('ToggleablePlaceholder')\n], ESLToggleablePlaceholder);\nexport { ESLToggleablePlaceholder };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { attr, boolAttr, ESLBaseElement } from '../../esl-base-element/core';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { ready } from '../../esl-utils/decorators/ready';\nimport { parseNumber } from '../../esl-utils/misc/format';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ENTER, SPACE } from '../../esl-utils/dom/keys';\nimport { TraversingQuery } from '../../esl-traversing-query/core';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { ESLMediaQuery } from '../../esl-media-query/core';\nimport { ESLToggleablePlaceholder } from '../../esl-toggleable/core';\nlet ESLTrigger = class ESLTrigger extends ESLBaseElement {\n    static get observedAttributes() {\n        return ['target'];\n    }\n    attributeChangedCallback(attrName) {\n        if (!this.connected)\n            return;\n        if (attrName === 'target')\n            return this.updateTargetFromSelector();\n    }\n    /** Target observable Toggleable */\n    get $target() {\n        return this._$target;\n    }\n    set $target(newPopupInstance) {\n        this.unbindEvents();\n        this._$target = newPopupInstance;\n        this.bindEvents();\n        this._onTargetStateChange();\n    }\n    /** Element target to setup aria attributes */\n    get $a11yTarget() {\n        return this.a11yTarget ? this.querySelector(this.a11yTarget) : this;\n    }\n    /** Marker to allow track hover */\n    get allowHover() {\n        return DeviceDetector.hasHover && ESLMediaQuery.for(this.trackHover).matches;\n    }\n    /** Marker to allow track clicks */\n    get allowClick() {\n        return ESLMediaQuery.for(this.trackClick).matches;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.updateTargetFromSelector();\n        this.initA11y();\n    }\n    disconnectedCallback() {\n        this.unbindEvents();\n    }\n    bindEvents() {\n        if (!this.$target)\n            return;\n        this.$target.addEventListener('esl:show', this._onTargetStateChange);\n        this.$target.addEventListener('esl:hide', this._onTargetStateChange);\n        this.addEventListener('click', this._onClick);\n        this.addEventListener('keydown', this._onKeydown);\n        this.addEventListener('mouseenter', this._onMouseEnter);\n        this.addEventListener('mouseleave', this._onMouseLeave);\n    }\n    unbindEvents() {\n        if (!this.$target)\n            return;\n        this.$target.removeEventListener('esl:show', this._onTargetStateChange);\n        this.$target.removeEventListener('esl:hide', this._onTargetStateChange);\n        this.removeEventListener('click', this._onClick);\n        this.removeEventListener('keydown', this._onKeydown);\n        this.removeEventListener('mouseenter', this._onMouseEnter);\n        this.removeEventListener('mouseleave', this._onMouseLeave);\n    }\n    /** Update `$target` Toggleable  from `target` selector */\n    updateTargetFromSelector() {\n        if (!this.target)\n            return;\n        this.$target = TraversingQuery.first(this.target, this);\n        if (this.$target instanceof ESLToggleablePlaceholder && this.$target.$origin) {\n            // change target if it is an instance of the placeholder element\n            this.$target = this.$target.$origin;\n        }\n    }\n    /** Check if the event target should be ignored */\n    isTargetIgnored(target) {\n        if (!target || !(target instanceof HTMLElement) || !this.ignore)\n            return false;\n        const $ignore = target.closest(this.ignore);\n        // Ignore only inner elements (but do not ignore the trigger itself)\n        return !!$ignore && $ignore !== this && this.contains($ignore);\n    }\n    /** Merge params to pass to the toggleable */\n    mergeToggleableParams(...params) {\n        return Object.assign({\n            initiator: 'trigger',\n            activator: this\n        }, ...params);\n    }\n    /** Show target toggleable with passed params */\n    showTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.showDelay)\n        }, params);\n        if (this.$target && typeof this.$target.show === 'function') {\n            this.$target.show(actionParams);\n        }\n    }\n    /** Hide target toggleable with passed params */\n    hideTarget(params = {}) {\n        const actionParams = this.mergeToggleableParams({\n            delay: parseNumber(this.hideDelay)\n        }, params);\n        if (this.$target && typeof this.$target.hide === 'function') {\n            this.$target.hide(actionParams);\n        }\n    }\n    /** Toggles target toggleable with passed params */\n    toggleTarget(params = {}, state = !this.active) {\n        state ? this.showTarget(params) : this.hideTarget(params);\n    }\n    /**\n     * Updates trigger state according to toggleable state\n     * Does not produce `esl:change:active` event\n     */\n    updateState() {\n        var _a;\n        const isActive = !!((_a = this.$target) === null || _a === void 0 ? void 0 : _a.open);\n        const wasActive = this.active;\n        this.toggleAttribute('active', isActive);\n        const clsTarget = TraversingQuery.first(this.activeClassTarget, this);\n        clsTarget && CSSClassUtils.toggle(clsTarget, this.activeClass, isActive);\n        this.updateA11y();\n        return isActive !== wasActive;\n    }\n    /** Handles ESLToggleable state change */\n    _onTargetStateChange(originalEvent) {\n        if (!this.updateState())\n            return;\n        const detail = { active: this.active, originalEvent };\n        this.$$fire('change:active', { detail });\n    }\n    /** Handles `click` event */\n    _onClick(event) {\n        if (!this.allowClick || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        switch (this.mode) {\n            case 'show':\n                return this.showTarget({ event });\n            case 'hide':\n                return this.hideTarget({ event });\n            default:\n                return this.toggleTarget({ event });\n        }\n    }\n    /** Handles `keydown` event */\n    _onKeydown(event) {\n        if (![ENTER, SPACE].includes(event.key) || this.isTargetIgnored(event.target))\n            return;\n        event.preventDefault();\n        switch (this.mode) {\n            case 'show':\n                return this.showTarget({ event });\n            case 'hide':\n                return this.hideTarget({ event });\n            default:\n                return this.toggleTarget({ event });\n        }\n    }\n    /** Handles hover `mouseenter` event */\n    _onMouseEnter(event) {\n        if (!this.allowHover)\n            return;\n        const delay = parseNumber(this.hoverShowDelay);\n        this.toggleTarget({ event, delay }, this.mode !== 'hide');\n        event.preventDefault();\n    }\n    /** Handles hover `mouseleave` event */\n    _onMouseLeave(event) {\n        if (!this.allowHover)\n            return;\n        if (this.mode === 'show' || this.mode === 'hide')\n            return;\n        const delay = parseNumber(this.hoverHideDelay);\n        this.hideTarget({ event, delay, trackHover: true });\n        event.preventDefault();\n    }\n    /** Set initial a11y attributes. Do nothing if trigger contains actionable element */\n    initA11y() {\n        if (this.$a11yTarget !== this)\n            return;\n        if (!this.hasAttribute('role'))\n            this.setAttribute('role', 'button');\n        if (this.getAttribute('role') === 'button' && !this.hasAttribute('tabindex')) {\n            this.setAttribute('tabindex', '0');\n        }\n    }\n    /** Update aria attributes */\n    updateA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        target.setAttribute('aria-expanded', String(this.active));\n        if (this.$target && this.$target.id) {\n            target.setAttribute('aria-controls', this.$target.id);\n        }\n    }\n};\nESLTrigger.is = 'esl-trigger';\n__decorate([\n    boolAttr({ readonly: true })\n], ESLTrigger.prototype, \"active\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"activeClassTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'a[href]' })\n], ESLTrigger.prototype, \"ignore\", void 0);\n__decorate([\n    attr({ defaultValue: '::next' })\n], ESLTrigger.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'toggle' })\n], ESLTrigger.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'all' })\n], ESLTrigger.prototype, \"trackClick\", void 0);\n__decorate([\n    attr({ defaultValue: 'not all' })\n], ESLTrigger.prototype, \"trackHover\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLTrigger.prototype, \"a11yTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"showDelay\", void 0);\n__decorate([\n    attr({ defaultValue: 'none' })\n], ESLTrigger.prototype, \"hideDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverShowDelay\", void 0);\n__decorate([\n    attr({ defaultValue: '0' })\n], ESLTrigger.prototype, \"hoverHideDelay\", void 0);\n__decorate([\n    ready\n], ESLTrigger.prototype, \"connectedCallback\", null);\n__decorate([\n    ready\n], ESLTrigger.prototype, \"disconnectedCallback\", null);\n__decorate([\n    bind\n], ESLTrigger.prototype, \"_onTargetStateChange\", null);\n__decorate([\n    bind\n], ESLTrigger.prototype, \"_onClick\", null);\n__decorate([\n    bind\n], ESLTrigger.prototype, \"_onKeydown\", null);\n__decorate([\n    bind\n], ESLTrigger.prototype, \"_onMouseEnter\", null);\n__decorate([\n    bind\n], ESLTrigger.prototype, \"_onMouseLeave\", null);\nESLTrigger = __decorate([\n    ExportNs('Trigger')\n], ESLTrigger);\nexport { ESLTrigger };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLTrigger } from '../../esl-trigger/core';\nimport { attr } from '../../esl-base-element/decorators/attr';\n/**\n * ESlTab component\n * @author Julia Murashko\n *\n * Tab trigger item, usually used in conjunction with a {@link ESLTabs}.\n * Can control any {@link ESLToggleable} instance but is usually used in conjunction with {@link ESLPanel}\n */\nlet ESLTab = class ESLTab extends ESLTrigger {\n    initA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        if (target.hasAttribute('role'))\n            return;\n        target.setAttribute('role', 'tab');\n    }\n    updateA11y() {\n        const target = this.$a11yTarget;\n        if (!target)\n            return;\n        target.setAttribute('aria-selected', String(this.active));\n        target.setAttribute('tabindex', this.active ? '0' : '-1');\n        if (this.$target && this.$target.id) {\n            this.setAttribute('aria-controls', this.$target.id);\n        }\n    }\n};\nESLTab.is = 'esl-tab';\n__decorate([\n    attr({ defaultValue: 'show' })\n], ESLTab.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'active' })\n], ESLTab.prototype, \"activeClass\", void 0);\nESLTab = __decorate([\n    ExportNs('Tab')\n], ESLTab);\nexport { ESLTab };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLTabs_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement, attr } from '../../esl-base-element/core';\nimport { rafDecorator } from '../../esl-utils/async/raf';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { memoize } from '../../esl-utils/decorators/memoize';\nimport { RTLUtils } from '../../esl-utils/dom/rtl';\nimport { debounce } from '../../esl-utils/async/debounce';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ESLMediaRuleList } from '../../esl-media-query/core/esl-media-rule-list';\nimport { ESLTab } from './esl-tab';\n/**\n * ESlTabs component\n * @author Julia Murashko\n *\n * Tabs container component for Tabs trigger group.\n * Uses {@link ESLTab} as an item.\n * Each individual {@link ESLTab} can control {@link ESLToggleable} or, usually, {@link ESLPanel}\n */\nlet ESLTabs = ESLTabs_1 = class ESLTabs extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._deferredUpdateArrows = debounce(this.updateArrows, 100, this);\n        this._deferredFitToViewport = debounce(this.fitToViewport, 100, this);\n        // TODO: is the raf decorator needed?\n        this._onResize = rafDecorator(() => this._deferredFitToViewport(this.$current, 'auto'));\n    }\n    static get observedAttributes() {\n        return ['scrollable'];\n    }\n    /** ESLMediaRuleList instance of the scrollable type mapping */\n    get scrollableTypeRules() {\n        return ESLMediaRuleList.parse(this.scrollable);\n    }\n    /** @returns current scrollable type */\n    get currentScrollableType() {\n        return this.scrollableTypeRules.activeValue || '';\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.scrollableTypeRules.addListener(this._onScrollableTypeChange);\n        this.updateScrollableType();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.scrollableTypeRules.removeListener(this._onScrollableTypeChange);\n        this.unbindScrollableEvents();\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        if (attrName === 'scrollable') {\n            this.scrollableTypeRules.removeListener(this._onScrollableTypeChange);\n            memoize.clear(this, 'scrollableTypeRules');\n            this.scrollableTypeRules.addListener(this._onScrollableTypeChange);\n            this.updateScrollableType();\n        }\n    }\n    bindScrollableEvents() {\n        var _a;\n        this.addEventListener('esl:change:active', this._onTriggerStateChange);\n        this.addEventListener('click', this._onClick, false);\n        this.addEventListener('focusin', this._onFocus);\n        (_a = this.$scrollableTarget) === null || _a === void 0 ? void 0 : _a.addEventListener('scroll', this._onScroll, { passive: true });\n        window.addEventListener('resize', this._onResize);\n    }\n    unbindScrollableEvents() {\n        var _a;\n        this.removeEventListener('esl:change:active', this._onTriggerStateChange);\n        this.removeEventListener('click', this._onClick, false);\n        this.removeEventListener('focusin', this._onFocus);\n        (_a = this.$scrollableTarget) === null || _a === void 0 ? void 0 : _a.removeEventListener('scroll', this._onScroll);\n        window.removeEventListener('resize', this._onResize);\n    }\n    /** Collection of inner {@link ESLTab} items */\n    get $tabs() {\n        const els = this.querySelectorAll(ESLTab.is);\n        return els ? Array.from(els) : [];\n    }\n    /** Active {@link ESLTab} item */\n    get $current() {\n        return this.$tabs.find((el) => el.active) || null;\n    }\n    /** Container element to scroll */\n    get $scrollableTarget() {\n        return this.querySelector(this.scrollableTarget);\n    }\n    /** Is the scrollable mode enabled ? */\n    get isScrollable() {\n        return this.currentScrollableType !== 'disabled';\n    }\n    /** Move scroll to the next/previous item */\n    moveTo(direction, behavior = 'smooth') {\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget)\n            return;\n        let left = $scrollableTarget.offsetWidth;\n        left = RTLUtils.isRtl(this) && RTLUtils.scrollType !== 'reverse' ? -left : left;\n        left = direction === 'left' ? -left : left;\n        $scrollableTarget.scrollBy({ left, behavior });\n    }\n    /** Scroll tab to the view */\n    fitToViewport($trigger, behavior = 'smooth') {\n        this.updateMarkers();\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget || !$trigger)\n            return;\n        const areaRect = $scrollableTarget.getBoundingClientRect();\n        const itemRect = $trigger.getBoundingClientRect();\n        $scrollableTarget.scrollBy({\n            left: this.calcScrollOffset(itemRect, areaRect),\n            behavior\n        });\n        this.updateArrows();\n    }\n    /** Get scroll offset position from the selected item rectangle */\n    calcScrollOffset(itemRect, areaRect) {\n        const isReversedRTL = RTLUtils.isRtl(this) && RTLUtils.scrollType === 'reverse';\n        if (this.currentScrollableType === 'center') {\n            const shift = itemRect.left + itemRect.width / 2 - (areaRect.left + areaRect.width / 2);\n            return isReversedRTL ? -shift : shift;\n        }\n        // item is out of area from the right side\n        // else item out is of area from the left side\n        if (itemRect.right > areaRect.right) {\n            return isReversedRTL ? Math.floor(areaRect.right - itemRect.right) : Math.ceil(itemRect.right - areaRect.right);\n        }\n        else if (itemRect.left < areaRect.left) {\n            return isReversedRTL ? Math.ceil(areaRect.left - itemRect.left) : Math.floor(itemRect.left - areaRect.left);\n        }\n    }\n    updateArrows() {\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget)\n            return;\n        const swapSides = RTLUtils.isRtl(this) && RTLUtils.scrollType === 'default';\n        const scrollStart = Math.abs($scrollableTarget.scrollLeft) > 1;\n        const scrollEnd = Math.abs($scrollableTarget.scrollLeft) + $scrollableTarget.clientWidth + 1 < $scrollableTarget.scrollWidth;\n        const $rightArrow = this.querySelector('[data-tab-direction=\"right\"]');\n        const $leftArrow = this.querySelector('[data-tab-direction=\"left\"]');\n        $leftArrow && $leftArrow.toggleAttribute('disabled', !(swapSides ? scrollEnd : scrollStart));\n        $rightArrow && $rightArrow.toggleAttribute('disabled', !(swapSides ? scrollStart : scrollEnd));\n    }\n    updateMarkers() {\n        const $scrollableTarget = this.$scrollableTarget;\n        if (!$scrollableTarget)\n            return;\n        const hasScroll = this.isScrollable && ($scrollableTarget.scrollWidth > this.clientWidth);\n        this.toggleAttribute('has-scroll', hasScroll);\n    }\n    /** Update element state according to scrollable type */\n    updateScrollableType() {\n        ESLTabs_1.supportedScrollableTypes.forEach((type) => {\n            CSSClassUtils.toggle(this, `${type}-alignment`, this.currentScrollableType === type);\n        });\n        this._deferredFitToViewport(this.$current);\n        if (this.currentScrollableType === 'disabled') {\n            this.unbindScrollableEvents();\n        }\n        else {\n            this.bindScrollableEvents();\n        }\n    }\n    _onTriggerStateChange({ detail }) {\n        if (!detail.active)\n            return;\n        this._deferredFitToViewport(this.$current);\n    }\n    _onClick(event) {\n        const eventTarget = event.target;\n        const target = eventTarget.closest('[data-tab-direction]');\n        const direction = target && target.dataset.tabDirection;\n        if (!direction)\n            return;\n        this.moveTo(direction);\n    }\n    _onFocus(e) {\n        const target = e.target;\n        if (target instanceof ESLTab)\n            this._deferredFitToViewport(target);\n    }\n    _onScroll() {\n        this._deferredUpdateArrows();\n    }\n    /** Handles scrollable type change */\n    _onScrollableTypeChange() {\n        this.updateScrollableType();\n    }\n};\nESLTabs.is = 'esl-tabs';\n/** List of supported scrollable types */\nESLTabs.supportedScrollableTypes = ['disabled', 'side', 'center'];\n__decorate([\n    attr({ defaultValue: 'disabled' })\n], ESLTabs.prototype, \"scrollable\", void 0);\n__decorate([\n    attr({ defaultValue: '.esl-tab-container' })\n], ESLTabs.prototype, \"scrollableTarget\", void 0);\n__decorate([\n    memoize()\n], ESLTabs.prototype, \"scrollableTypeRules\", null);\n__decorate([\n    bind\n], ESLTabs.prototype, \"_onTriggerStateChange\", null);\n__decorate([\n    bind\n], ESLTabs.prototype, \"_onClick\", null);\n__decorate([\n    bind\n], ESLTabs.prototype, \"_onFocus\", null);\n__decorate([\n    bind\n], ESLTabs.prototype, \"_onScroll\", null);\n__decorate([\n    bind\n], ESLTabs.prototype, \"_onScrollableTypeChange\", null);\nESLTabs = ESLTabs_1 = __decorate([\n    ExportNs('Tabs')\n], ESLTabs);\nexport { ESLTabs };\n","const ns = window || global;\nconst sequences = ns.__esl_sequences__ || new Map();\nns.__esl_sequences__ = sequences;\n/** Create and return sequential id */\nexport const sequentialUID = (name, prefix = name) => {\n    const uid = (sequences.get(name) || 0) + 1;\n    sequences.set(name, uid);\n    return prefix + uid;\n};\n/** Return random unique identifier */\nexport const randUID = (prefix = '') => {\n    const time = Date.now().toString(32);\n    const rand = Math.round(Math.random() * 1024 * 1024).toString(32);\n    return prefix + time + '-' + rand;\n};\n/**\n * Generate unique id\n * @deprecated Alias for {@link randUID}\n */\nexport const generateUId = randUID;\n","/**\n * Task placeholder with a single place for executing deferred task.\n * Only one task can be planed per DelayedTask instance.\n * @see put DelayedTask.put behaviour description.\n */\nexport class DelayedTask {\n    constructor() {\n        this._fn = null;\n        this._timeout = null;\n        /** Execute deferred task immediately */\n        this.run = () => {\n            this._timeout = null;\n            this._fn && this._fn();\n        };\n    }\n    /** @returns Function of currently deferred (planned) task */\n    get fn() {\n        return this._fn;\n    }\n    /**\n     * Cancel deferred task and planning passed\n     * @param task - task function\n     * @param delay - time to delay task execution\n     *  - pass negative or false to execute task immediately\n     *  - pass 0 to plan task to the macrotask\n     *  - pass positive number x to delay task on x ms.\n     * */\n    put(task, delay = false) {\n        const prev = this.cancel();\n        if (typeof task === 'function') {\n            if (delay && typeof delay === 'string')\n                delay = +delay;\n            if (typeof delay === 'number' && delay >= 0) {\n                this._fn = task;\n                this._timeout = window.setTimeout(this.run, delay);\n            }\n            else {\n                task();\n            }\n        }\n        return prev;\n    }\n    /** Cancel deferred (planned) task */\n    cancel() {\n        const prev = this._fn;\n        (typeof this._timeout === 'number') && clearTimeout(this._timeout);\n        this._fn = this._timeout = null;\n        return prev;\n    }\n}\n","import { getAttr, setAttr } from '../../esl-utils/dom/attr';\nimport { toKebabCase, evaluate } from '../../esl-utils/misc/format';\nfunction buildJsonAttrDescriptor(attrName, readOnly, defaultValue) {\n    function get() {\n        const attrContent = getAttr(this, attrName, '').trim();\n        return evaluate(attrContent, defaultValue);\n    }\n    function set(value) {\n        try {\n            if (typeof value !== 'object')\n                throw Error('value should be object');\n            setAttr(this, attrName, value ? JSON.stringify(value) : false);\n        }\n        catch (e) {\n            console.error('[ESL] jsonAttr: Can not set json value ', e);\n        }\n    }\n    return readOnly ? { get } : { get, set };\n}\nconst buildAttrName = (propName, dataAttr) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n/**\n * Decorator to map current property to element attribute value using JSON (de-)serialization rules.\n * Maps object type property.\n * @param config - mapping configuration. See {@link JsonAttrDescriptor}\n */\nexport const jsonAttr = (config = {}) => {\n    config = Object.assign({ defaultValue: {} }, config);\n    return (target, propName) => {\n        const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n        Object.defineProperty(target, propName, buildJsonAttrDescriptor(attrName, !!config.readonly, config.defaultValue));\n    };\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLToggleable_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESC, SYSTEM_KEYS } from '../../esl-utils/dom/keys';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { defined, copyDefinedKeys } from '../../esl-utils/misc/object';\nimport { sequentialUID } from '../../esl-utils/misc/uid';\nimport { DeviceDetector } from '../../esl-utils/environment/device-detector';\nimport { DelayedTask } from '../../esl-utils/async/delayed-task';\nimport { ESLBaseElement, attr, jsonAttr, boolAttr } from '../../esl-base-element/core';\nconst activators = new WeakMap();\n/**\n * ESLToggleable component\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleable - a custom element, that is used as a base for \"Popup-like\" components creation\n */\nlet ESLToggleable = ESLToggleable_1 = class ESLToggleable extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        /** Inner state */\n        this._open = false;\n        /** Inner show/hide task manager instance */\n        this._task = new DelayedTask();\n        /** Marker for current hover listener state */\n        this._trackHover = false;\n    }\n    static get observedAttributes() {\n        return ['open', 'group'];\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (!this.id && !this.noAutoId) {\n            const tag = this.constructor.is;\n            this.id = sequentialUID(tag, tag + '-');\n        }\n        this.initiallyOpened = this.hasAttribute('open');\n        this.bindEvents();\n        this.setInitialState();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.unbindEvents();\n        activators.delete(this);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || newVal === oldVal)\n            return;\n        switch (attrName) {\n            case 'open':\n                if (this.open === this.hasAttribute('open'))\n                    return;\n                this.toggle(this.open, { initiator: 'attribute', showDelay: 0, hideDelay: 0 });\n                break;\n            case 'group':\n                this.$$fire('change:group', {\n                    detail: { oldGroupName: oldVal, newGroupName: newVal }\n                });\n                break;\n        }\n    }\n    /** Set initial state of the Toggleable */\n    setInitialState() {\n        if (this.initialParams) {\n            this.toggle(this.initiallyOpened, this.initialParams);\n        }\n    }\n    bindEvents() {\n        this.addEventListener('click', this._onClick);\n        this.addEventListener('keydown', this._onKeyboardEvent);\n        this.addEventListener('esl:show:request', this._onShowRequest);\n    }\n    unbindEvents() {\n        this.removeEventListener('click', this._onClick);\n        this.removeEventListener('keydown', this._onKeyboardEvent);\n        this.removeEventListener('esl:show:request', this._onShowRequest);\n        this.bindOutsideEventTracking(false);\n        this.bindHoverStateTracking(false);\n    }\n    /** Bind outside action event listeners */\n    bindOutsideEventTracking(track) {\n        document.body.removeEventListener('keydown', this._onOutsideAction, true);\n        document.body.removeEventListener('mouseup', this._onOutsideAction, true);\n        document.body.removeEventListener('touchend', this._onOutsideAction, true);\n        if (track) {\n            document.body.addEventListener('keydown', this._onOutsideAction, true);\n            document.body.addEventListener('mouseup', this._onOutsideAction, true);\n            document.body.addEventListener('touchend', this._onOutsideAction, true);\n        }\n    }\n    /** Bind hover events listeners for the Toggleable itself */\n    bindHoverStateTracking(track, hideDelay) {\n        if (!DeviceDetector.hasHover)\n            return;\n        this._trackHoverDelay = track && hideDelay !== undefined ? +hideDelay : undefined;\n        if (this._trackHover === track)\n            return;\n        this._trackHover = track;\n        this.removeEventListener('mouseenter', this._onMouseEnter);\n        this.removeEventListener('mouseleave', this._onMouseLeave);\n        if (this._trackHover) {\n            this.addEventListener('mouseenter', this._onMouseEnter);\n            this.addEventListener('mouseleave', this._onMouseLeave);\n        }\n    }\n    /** Function to merge the result action params */\n    mergeDefaultParams(params) {\n        return Object.assign({}, this.defaultParams, copyDefinedKeys(params));\n    }\n    /** Toggle the element state */\n    toggle(state = !this.open, params) {\n        return state ? this.show(params) : this.hide(params);\n    }\n    /** Change the element state to active */\n    show(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.showTask.bind(this, params), defined(params.showDelay, params.delay));\n        this.bindOutsideEventTracking(this.closeOnOutsideAction);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Change the element state to inactive */\n    hide(params) {\n        params = this.mergeDefaultParams(params);\n        this._task.put(this.hideTask.bind(this, params), defined(params.hideDelay, params.delay));\n        this.bindOutsideEventTracking(false);\n        this.bindHoverStateTracking(!!params.trackHover, defined(params.hideDelay, params.delay));\n        return this;\n    }\n    /** Actual show task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    showTask(params) {\n        if (!params.force && this.open)\n            return;\n        if (!params.silent && !this.$$fire('before:show', { detail: { params } }))\n            return;\n        this.activator = params.activator;\n        this.open = true;\n        this.onShow(params);\n        if (!params.silent)\n            this.$$fire('show', { detail: { params }, cancelable: false });\n    }\n    /** Actual hide task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n    hideTask(params) {\n        if (!params.force && !this.open)\n            return;\n        if (!params.silent && !this.$$fire('before:hide', { detail: { params } }))\n            return;\n        this.open = false;\n        this.onHide(params);\n        this.bindOutsideEventTracking(false);\n        if (!params.silent)\n            this.$$fire('hide', { detail: { params }, cancelable: false });\n    }\n    /**\n     * Actions to execute on show toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Adds CSS classes, update a11y and fire esl:refresh event by default.\n     */\n    onShow(params) {\n        CSSClassUtils.add(this, this.activeClass);\n        CSSClassUtils.add(document.body, this.bodyClass, this);\n        this.updateA11y();\n        this.$$fire('esl:refresh'); // To notify other components about content change\n    }\n    /**\n     * Actions to execute on hide toggleable.\n     * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n     * Removes CSS classes and update a11y by default.\n     */\n    onHide(params) {\n        CSSClassUtils.remove(this, this.activeClass);\n        CSSClassUtils.remove(document.body, this.bodyClass, this);\n        this.updateA11y();\n    }\n    /** Active state marker */\n    get open() {\n        return this._open;\n    }\n    set open(value) {\n        this.toggleAttribute('open', this._open = value);\n    }\n    /** Last component that has activated the element. Uses {@link ToggleableActionParams.activator}*/\n    get activator() {\n        return activators.get(this);\n    }\n    set activator(el) {\n        el ? activators.set(this, el) : activators.delete(this);\n    }\n    /** Returns the element to apply a11y attributes */\n    get $a11yTarget() {\n        const target = this.getAttribute('a11y-target');\n        if (target === 'none')\n            return null;\n        return target ? this.querySelector(target) : this;\n    }\n    /** Called on show and on hide actions to update a11y state accordingly */\n    updateA11y() {\n        const targetEl = this.$a11yTarget;\n        if (!targetEl)\n            return;\n        targetEl.setAttribute('aria-hidden', String(!this._open));\n    }\n    /** @returns if the passed event should trigger hide action */\n    isOutsideAction(e) {\n        const target = e.target;\n        // target is inside current toggleable\n        if (this.contains(target))\n            return false;\n        // target is inside last activator\n        if (this.activator && this.activator.contains(target))\n            return false;\n        // Event is not a system command key\n        return !(e instanceof KeyboardEvent && SYSTEM_KEYS.includes(e.key));\n    }\n    _onClick(e) {\n        const target = e.target;\n        if (this.closeTrigger && target.closest(this.closeTrigger)) {\n            this.hide({ initiator: 'close', activator: target, event: e });\n        }\n    }\n    _onOutsideAction(e) {\n        if (!this.isOutsideAction(e))\n            return;\n        // Used 0 delay to decrease priority of the request\n        this.hide({ initiator: 'outsideaction', hideDelay: 0, event: e });\n    }\n    _onKeyboardEvent(e) {\n        if (this.closeOnEsc && e.key === ESC) {\n            this.hide({ initiator: 'keyboard', event: e });\n        }\n    }\n    _onMouseEnter(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = { initiator: 'mouseenter', trackHover: true, activator: this.activator, event: e, hideDelay };\n        this.show(Object.assign(baseParams, this.trackHoverParams));\n    }\n    _onMouseLeave(e) {\n        const hideDelay = this._trackHoverDelay;\n        const baseParams = { initiator: 'mouseleave', trackHover: true, activator: this.activator, event: e, hideDelay };\n        this.hide(Object.assign(baseParams, this.trackHoverParams));\n    }\n    /** Actions to execute on show request */\n    _onShowRequest() {\n        this.show();\n    }\n};\nESLToggleable.is = 'esl-toggleable';\n__decorate([\n    attr()\n], ESLToggleable.prototype, \"bodyClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'open' })\n], ESLToggleable.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ name: 'group' })\n], ESLToggleable.prototype, \"groupName\", void 0);\n__decorate([\n    attr({ name: 'close-on' })\n], ESLToggleable.prototype, \"closeTrigger\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"noAutoId\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    boolAttr()\n], ESLToggleable.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { force: true, initiator: 'init' } })\n], ESLToggleable.prototype, \"initialParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"defaultParams\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: {} })\n], ESLToggleable.prototype, \"trackHoverParams\", void 0);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onClick\", null);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onOutsideAction\", null);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onKeyboardEvent\", null);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onMouseEnter\", null);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onMouseLeave\", null);\n__decorate([\n    bind\n], ESLToggleable.prototype, \"_onShowRequest\", null);\nESLToggleable = ESLToggleable_1 = __decorate([\n    ExportNs('Toggleable')\n], ESLToggleable);\nexport { ESLToggleable };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement } from '../../esl-base-element/core';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { EventUtils } from '../../esl-utils/dom/events';\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLToggleable } from './esl-toggleable';\n/**\n * ESLToggleableDispatcher\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleableDispatcher - plugin component, that prevents activation of multiple ESLToggleable instances in bounds of managed container.\n */\nlet ESLToggleableDispatcher = class ESLToggleableDispatcher extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._popups = new Map();\n    }\n    /**\n     * Initialize ToggleableGroupDispatcher\n     * Uses esl-toggleable-dispatcher tag and document body root by default\n     */\n    static init(root = document.body, tagName = this.is) {\n        if (!root)\n            throw new Error('Root element should be specified');\n        const instances = root.getElementsByTagName(tagName);\n        if (instances.length)\n            return;\n        this.register(tagName);\n        root.insertAdjacentElement('afterbegin', document.createElement(tagName));\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.root = this.parentElement;\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.root = null;\n    }\n    bindEvents() {\n        if (!this.root)\n            return;\n        this.root.addEventListener('esl:before:show', this._onBeforeShow);\n        this.root.addEventListener('esl:show', this._onShow);\n        this.root.addEventListener('esl:hide', this._onHide);\n        this.root.addEventListener('esl:change:group', this._onChangeGroup);\n    }\n    unbindEvents() {\n        if (!this.root)\n            return;\n        this.root.removeEventListener('esl:before:show', this._onBeforeShow);\n        this.root.removeEventListener('esl:show', this._onShow);\n        this.root.removeEventListener('esl:hide', this._onHide);\n        this.root.removeEventListener('esl:change:group', this._onChangeGroup);\n    }\n    /** Observed element */\n    get root() {\n        return this._root;\n    }\n    set root(root) {\n        this.unbindEvents();\n        this._root = root;\n        this.bindEvents();\n    }\n    /** Guard-condition for targets */\n    isAcceptable(target) {\n        if (!(target instanceof ESLToggleable))\n            return false;\n        return !!target.groupName && target.groupName !== 'none';\n    }\n    /** Hide active element in group */\n    hideActive(groupName, activator) {\n        const active = this.getActive(groupName);\n        if (!active || active === activator)\n            return;\n        active.hide({\n            initiator: 'dispatcher',\n            dispatcher: this,\n            activator\n        });\n    }\n    /** Set active element in group */\n    setActive(groupName, popup) {\n        if (!groupName)\n            return;\n        this.hideActive(groupName, popup);\n        this._popups.set(groupName, popup);\n    }\n    /** Get active element in group or undefined if group doesn't exist */\n    getActive(groupName) {\n        return this._popups.get(groupName);\n    }\n    /** Delete element from the group if passed element is currently active */\n    deleteActive(groupName, popup) {\n        if (this.getActive(groupName) !== popup)\n            return;\n        this._popups.delete(groupName);\n    }\n    /** Hide active element before e.target will be shown */\n    _onBeforeShow(e) {\n        const target = EventUtils.source(e);\n        if (!this.isAcceptable(target))\n            return;\n        this.hideActive(target.groupName, target);\n    }\n    /** Update active element after a new element is shown */\n    _onShow(e) {\n        const target = EventUtils.source(e);\n        if (!this.isAcceptable(target))\n            return;\n        this.setActive(target.groupName, target);\n    }\n    /** Update group state after active element is hidden */\n    _onHide(e) {\n        const target = EventUtils.source(e);\n        if (!this.isAcceptable(target))\n            return;\n        this.deleteActive(target.groupName, target);\n    }\n    /** Update active elements */\n    _onChangeGroup(e) {\n        const target = EventUtils.source(e);\n        if (!this.isAcceptable(target))\n            return;\n        const { oldGroupName, newGroupName } = e.detail;\n        this.deleteActive(oldGroupName, target);\n        this.setActive(newGroupName, target);\n    }\n};\nESLToggleableDispatcher.is = 'esl-toggleable-dispatcher';\n__decorate([\n    bind\n], ESLToggleableDispatcher.prototype, \"_onBeforeShow\", null);\n__decorate([\n    bind\n], ESLToggleableDispatcher.prototype, \"_onShow\", null);\n__decorate([\n    bind\n], ESLToggleableDispatcher.prototype, \"_onHide\", null);\n__decorate([\n    bind\n], ESLToggleableDispatcher.prototype, \"_onChangeGroup\", null);\nESLToggleableDispatcher = __decorate([\n    ExportNs('ToggleableDispatcher')\n], ESLToggleableDispatcher);\nexport { ESLToggleableDispatcher };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { afterNextRender } from '../../esl-utils/async/raf';\nimport { attr, boolAttr, jsonAttr } from '../../esl-base-element/core';\nimport { ESLToggleable } from '../../esl-toggleable/core';\nimport { ESLPanelGroup } from '../../esl-panel-group/core';\n/**\n * ESLPanel component\n * @author Julia Murashko\n *\n * ESLPanel is a custom element that is used as a wrapper for content that can be shown or hidden.\n * Can use collapsing/expanding animation (smooth height change).\n * Can be used in conjunction with {@link ESLPanelGroup} to control a group of ESLPopups\n */\nlet ESLPanel = class ESLPanel extends ESLToggleable {\n    constructor() {\n        super(...arguments);\n        /** Inner height state that updates after show/hide actions but before show/hide events triggered */\n        this._initialHeight = 0;\n    }\n    /** @returns Previous active panel height at the start of the animation */\n    get initialHeight() {\n        return this._initialHeight;\n    }\n    /** @returns Closest panel group or null if not presented */\n    get $group() {\n        if (this.groupName === 'none' || this.groupName)\n            return null;\n        return this.closest(ESLPanelGroup.is);\n    }\n    bindEvents() {\n        super.bindEvents();\n        this.addEventListener('transitionend', this._onTransitionEnd);\n    }\n    unbindEvents() {\n        super.unbindEvents();\n        this.removeEventListener('transitionend', this._onTransitionEnd);\n    }\n    /** Process show action */\n    onShow(params) {\n        this._initialHeight = this.scrollHeight;\n        super.onShow(params);\n        this.beforeAnimate();\n        if (params.noCollapse) {\n            afterNextRender(() => this.afterAnimate());\n        }\n        else {\n            this.onAnimate(0, this._initialHeight);\n        }\n    }\n    /** Process hide action */\n    onHide(params) {\n        this._initialHeight = this.scrollHeight;\n        super.onHide(params);\n        this.beforeAnimate();\n        if (params.noCollapse) {\n            afterNextRender(() => this.afterAnimate());\n        }\n        else {\n            this.onAnimate(this._initialHeight, 0);\n        }\n    }\n    /** Pre-processing animation action */\n    beforeAnimate() {\n        this.toggleAttribute('animating', true);\n        CSSClassUtils.add(this, this.animateClass);\n        this.postAnimateClass && afterNextRender(() => CSSClassUtils.add(this, this.postAnimateClass));\n    }\n    /** Process animation */\n    onAnimate(from, to) {\n        // set initial height\n        this.style.setProperty('max-height', `${from}px`);\n        // make sure that browser applies initial height for animation\n        afterNextRender(() => {\n            this.style.setProperty('max-height', `${to}px`);\n            this.fallbackAnimate();\n        });\n    }\n    /** Checks if transition happens and runs afterAnimate step if transition is not presented*/\n    fallbackAnimate() {\n        afterNextRender(() => {\n            const distance = parseFloat(this.style.maxHeight) - this.clientHeight;\n            if (Math.abs(distance) <= 1)\n                this.afterAnimate();\n        });\n    }\n    /** Post-processing animation action */\n    afterAnimate() {\n        const { animating } = this;\n        this.clearAnimation();\n        // Prevent fallback calls from being tracked\n        if (!animating)\n            return;\n        this.$$fire(this.open ? 'after:show' : 'after:hide');\n    }\n    /** Clear animation properties */\n    clearAnimation() {\n        this.toggleAttribute('animating', false);\n        this.style.removeProperty('max-height');\n        CSSClassUtils.remove(this, this.animateClass);\n        CSSClassUtils.remove(this, this.postAnimateClass);\n    }\n    /** Catching CSS transition end event to start post-animate processing */\n    _onTransitionEnd(e) {\n        if (!e || (e.propertyName === 'max-height' && e.target === this)) {\n            this.afterAnimate();\n        }\n    }\n    /** Merge params that are used by panel group for actions */\n    mergeDefaultParams(params) {\n        var _a;\n        const stackConfig = ((_a = this.$group) === null || _a === void 0 ? void 0 : _a.panelConfig) || {};\n        return Object.assign({}, stackConfig, this.defaultParams, params || {});\n    }\n};\nESLPanel.is = 'esl-panel';\n__decorate([\n    attr({ defaultValue: 'open' })\n], ESLPanel.prototype, \"activeClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'animate' })\n], ESLPanel.prototype, \"animateClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'post-animate' })\n], ESLPanel.prototype, \"postAnimateClass\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { force: true, initiator: 'init' } })\n], ESLPanel.prototype, \"initialParams\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLPanel.prototype, \"animating\", void 0);\n__decorate([\n    bind\n], ESLPanel.prototype, \"_onTransitionEnd\", null);\nESLPanel = __decorate([\n    ExportNs('Panel')\n], ESLPanel);\nexport { ESLPanel };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ESLPanelGroup_1;\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { attr, jsonAttr, ESLBaseElement } from '../../esl-base-element/core';\nimport { afterNextRender } from '../../esl-utils/async/raf';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { format } from '../../esl-utils/misc/format';\nimport { memoize } from '../../esl-utils/decorators/memoize';\nimport { CSSClassUtils } from '../../esl-utils/dom/class';\nimport { ESLMediaRuleList } from '../../esl-media-query/core';\nimport { TraversingQuery } from '../../esl-traversing-query/core';\nimport { ESLPanel } from '../../esl-panel/core';\n/**\n * ESLPanelGroup component\n * @author Julia Murashko\n *\n * ESLPanelGroup is a custom element that is used as a container for a group of {@link ESLPanel}s\n */\nlet ESLPanelGroup = ESLPanelGroup_1 = class ESLPanelGroup extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        /** Height of previous active panel */\n        this._previousHeight = 0;\n    }\n    static get observedAttributes() {\n        return ['mode', 'accordion-group'];\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.bindEvents();\n        this.modeRules.addListener(this._onModeChange);\n        this.updateMode();\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.modeRules.removeListener(this._onModeChange);\n        this.unbindEvents();\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected || oldVal === newVal)\n            return;\n        if (attrName === 'mode') {\n            this.modeRules.removeListener(this._onModeChange);\n            memoize.clear(this, 'modeRules');\n            this.modeRules.addListener(this._onModeChange);\n            this.updateMode();\n        }\n        if (attrName === 'accordion-group') {\n            if (newVal !== 'single' && newVal !== 'multiple') {\n                this.accordionGroup = oldVal;\n                return;\n            }\n            this.reset();\n        }\n    }\n    bindEvents() {\n        this.addEventListener('esl:before:show', this._onBeforeShow);\n        this.addEventListener('esl:show', this._onShow);\n        this.addEventListener('esl:before:hide', this._onBeforeHide);\n        this.addEventListener('transitionend', this._onTransitionEnd);\n    }\n    unbindEvents() {\n        this.removeEventListener('esl:before:show', this._onBeforeShow);\n        this.removeEventListener('esl:show', this._onShow);\n        this.removeEventListener('esl:before:hide', this._onBeforeHide);\n        this.removeEventListener('transitionend', this._onTransitionEnd);\n    }\n    /** Updates element state according to current mode */\n    updateMode() {\n        const prevMode = this.getAttribute('current-mode');\n        const currentMode = this.currentMode;\n        this.setAttribute('current-mode', currentMode);\n        // TODO: @deprecated will be removed with the 4th esl version\n        this.setAttribute('view', currentMode);\n        this.updateModeCls();\n        this.reset();\n        if (prevMode !== currentMode) {\n            this.$$fire('change:mode', { detail: { prevMode, currentMode } });\n        }\n    }\n    /** Updates mode class marker */\n    updateModeCls() {\n        const { modeCls, currentMode } = this;\n        if (!modeCls)\n            return;\n        const $target = TraversingQuery.first(this.modeClsTarget, this);\n        if (!$target)\n            return;\n        ESLPanelGroup_1.supportedModes.forEach((mode) => {\n            const className = format(modeCls, { mode });\n            $target.classList.toggle(className, currentMode === mode);\n        });\n    }\n    /** @returns ESLMediaRuleList instance of the mode mapping */\n    get modeRules() {\n        return ESLMediaRuleList.parse(this.mode);\n    }\n    /** @returns current mode */\n    get currentMode() {\n        return this.modeRules.activeValue || '';\n    }\n    /** @returns panels that are processed by the current panel group */\n    get $panels() {\n        const els = Array.from(this.querySelectorAll(ESLPanel.is));\n        return els.filter((el) => this.includesPanel(el));\n    }\n    /** @returns panels that are active */\n    get $activePanels() {\n        return this.$panels.filter((el) => el.open);\n    }\n    /** @returns whether the collapse/expand animation should be handheld by the group */\n    get shouldCollapse() {\n        const noCollapseModes = this.noCollapse.split(',').map((mode) => mode.trim());\n        return !noCollapseModes.includes('all') && !noCollapseModes.includes(this.currentMode);\n    }\n    /** @returns action params config that's used (inherited) by controlled {@link ESLPanel}s */\n    get panelConfig() {\n        return {\n            noCollapse: !this.shouldCollapse || (this.currentMode === 'tabs')\n        };\n    }\n    /** @returns merged panel action params for show/hide requests from the group */\n    mergeActionParams(...params) {\n        return Object.assign({ initiator: 'group', activator: this }, ...params);\n    }\n    /** Condition-guard to check if the passed target is a Panel that should be controlled by the Group */\n    includesPanel(target) {\n        if (!(target instanceof ESLPanel))\n            return false;\n        return target.$group === this;\n    }\n    /** Shows all panels besides excluded ones */\n    showAll(excluded = [], params = {}) {\n        this.$panels.forEach((el) => !excluded.includes(el) && el.show(this.mergeActionParams(params)));\n    }\n    /** Hides all active panels besides excluded ones */\n    hideAll(excluded = [], params = {}) {\n        this.$activePanels.forEach((el) => !excluded.includes(el) && el.hide(this.mergeActionParams(params)));\n    }\n    /** Toggles all panels by predicate */\n    toggleAllBy(shouldOpen, params = {}) {\n        this.$panels.forEach((panel) => panel.toggle(shouldOpen(panel), this.mergeActionParams(params)));\n    }\n    /** Resets to default state applicable to the current mode */\n    reset() {\n        ESLPanel.registered.then(() => {\n            if (this.currentMode === 'open')\n                this.toggleAllBy(() => true, this.transformParams);\n            if (this.currentMode === 'tabs' || (this.currentMode === 'accordion' && this.accordionGroup === 'single')) {\n                const $activePanel = this.$panels.find((panel) => panel.initiallyOpened);\n                this.toggleAllBy((panel) => panel === $activePanel, this.transformParams);\n            }\n            if (this.currentMode === 'accordion' && this.accordionGroup === 'multiple') {\n                this.toggleAllBy((panel) => panel.initiallyOpened, this.transformParams);\n            }\n        });\n    }\n    /** Animates the height of the component */\n    onAnimate(from, to) {\n        const hasCurrent = this.style.height && this.style.height !== 'auto';\n        if (hasCurrent) {\n            this.style.height = `${to}px`;\n            this.fallbackAnimate();\n        }\n        else {\n            // set initial height\n            this.style.height = `${from}px`;\n            // make sure that browser applies initial height to animate\n            afterNextRender(() => {\n                this.style.height = `${to}px`;\n                this.fallbackAnimate();\n            });\n        }\n    }\n    /** Checks if transition happens and runs afterAnimate step if transition is not presented */\n    fallbackAnimate() {\n        afterNextRender(() => {\n            const distance = parseFloat(this.style.height) - this.clientHeight;\n            if (Math.abs(distance) <= 1)\n                this.afterAnimate();\n        });\n    }\n    /** Pre-processing animation action */\n    beforeAnimate() {\n        CSSClassUtils.add(this, this.animationClass);\n    }\n    /** Post-processing animation action */\n    afterAnimate() {\n        this.style.removeProperty('height');\n        CSSClassUtils.remove(this, this.animationClass);\n    }\n    /** Process {@link ESLPanel} pre-show event */\n    _onBeforeShow(e) {\n        const panel = e.target;\n        if (!this.includesPanel(panel))\n            return;\n        if (this.currentMode === 'accordion' && this.accordionGroup === 'multiple')\n            return;\n        this.hideAll([panel]);\n    }\n    /** Process {@link ESLPanel} show event */\n    _onShow(e) {\n        const panel = e.target;\n        if (!this.includesPanel(panel))\n            return;\n        if (this.currentMode !== 'tabs')\n            return;\n        this.beforeAnimate();\n        if (this.shouldCollapse) {\n            this.onAnimate(this._previousHeight, panel.initialHeight);\n        }\n        else {\n            afterNextRender(() => this.afterAnimate());\n        }\n    }\n    /** Process {@link ESLPanel} pre-hide event */\n    _onBeforeHide(e) {\n        // TODO: refactor\n        if (this.currentMode === 'open') {\n            e.preventDefault();\n            return;\n        }\n        const panel = e.target;\n        if (!this.includesPanel(panel))\n            return;\n        this._previousHeight = this.clientHeight;\n    }\n    /** Catches CSS transition end event to start post-animate processing */\n    _onTransitionEnd(e) {\n        if (!e || (e.propertyName === 'height' && e.target === this)) {\n            this.afterAnimate();\n        }\n    }\n    /** Handles mode change */\n    _onModeChange() {\n        this.updateMode();\n    }\n};\nESLPanelGroup.is = 'esl-panel-group';\n/** List of supported modes */\nESLPanelGroup.supportedModes = ['tabs', 'accordion', 'open'];\n__decorate([\n    attr({ defaultValue: 'accordion' })\n], ESLPanelGroup.prototype, \"mode\", void 0);\n__decorate([\n    attr({ defaultValue: 'esl-{mode}-view' })\n], ESLPanelGroup.prototype, \"modeCls\", void 0);\n__decorate([\n    attr({ defaultValue: '' })\n], ESLPanelGroup.prototype, \"modeClsTarget\", void 0);\n__decorate([\n    attr({ defaultValue: 'animate' })\n], ESLPanelGroup.prototype, \"animationClass\", void 0);\n__decorate([\n    attr()\n], ESLPanelGroup.prototype, \"noCollapse\", void 0);\n__decorate([\n    attr({ defaultValue: 'single' })\n], ESLPanelGroup.prototype, \"accordionGroup\", void 0);\n__decorate([\n    jsonAttr({ defaultValue: { noCollapse: true } })\n], ESLPanelGroup.prototype, \"transformParams\", void 0);\n__decorate([\n    memoize()\n], ESLPanelGroup.prototype, \"modeRules\", null);\n__decorate([\n    bind\n], ESLPanelGroup.prototype, \"_onBeforeShow\", null);\n__decorate([\n    bind\n], ESLPanelGroup.prototype, \"_onShow\", null);\n__decorate([\n    bind\n], ESLPanelGroup.prototype, \"_onBeforeHide\", null);\n__decorate([\n    bind\n], ESLPanelGroup.prototype, \"_onTransitionEnd\", null);\n__decorate([\n    bind\n], ESLPanelGroup.prototype, \"_onModeChange\", null);\nESLPanelGroup = ESLPanelGroup_1 = __decorate([\n    ExportNs('PanelGroup')\n], ESLPanelGroup);\nexport { ESLPanelGroup };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExportNs } from '../../esl-utils/environment/export-ns';\nimport { ESLBaseElement, attr, boolAttr } from '../../esl-base-element/core';\nimport { bind } from '../../esl-utils/decorators/bind';\nimport { ready } from '../../esl-utils/decorators/ready';\nimport { rafDecorator } from '../../esl-utils/async/raf';\nimport { EventUtils } from '../../esl-utils/dom/events';\nimport { isRelativeNode } from '../../esl-utils/dom/traversing';\nimport { TraversingQuery } from '../../esl-traversing-query/core';\nimport { RTLUtils } from '../../esl-utils/dom/rtl';\n/**\n * ESLScrollbar is a reusable web component that replaces the browser's default scrollbar with\n * a custom scrollbar implementation.\n *\n * @author Yuliya Adamskaya\n */\nlet ESLScrollbar = class ESLScrollbar extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._deferredDrag = rafDecorator((e) => this._onPointerDrag(e));\n        this._deferredRefresh = rafDecorator(() => this.refresh());\n        this._scrollTimer = 0;\n        this._resizeObserver = new ResizeObserver(this._deferredRefresh);\n        this._mutationObserver = new MutationObserver((rec) => this.updateContentObserve(rec));\n    }\n    static get observedAttributes() {\n        return ['target', 'horizontal'];\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.findTarget();\n        this.render();\n        this.bindEvents();\n    }\n    disconnectedCallback() {\n        this.unbindEvents();\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        if (!this.connected && oldVal === newVal)\n            return;\n        if (attrName === 'target')\n            this.findTarget();\n        if (attrName === 'horizontal')\n            this.refresh();\n    }\n    findTarget() {\n        this.$target = this.target ?\n            TraversingQuery.first(this.target, this) :\n            null;\n    }\n    /** Target element to observe and scroll */\n    get $target() {\n        return this._$target || null;\n    }\n    set $target(content) {\n        this.unbindTargetEvents();\n        this._$target = content;\n        this.bindTargetEvents();\n        this._deferredRefresh();\n    }\n    render() {\n        this.innerHTML = '';\n        this.$scrollbarTrack = document.createElement('div');\n        this.$scrollbarTrack.className = this.trackClass;\n        this.$scrollbarThumb = document.createElement('div');\n        this.$scrollbarThumb.className = this.thumbClass;\n        this.$scrollbarTrack.appendChild(this.$scrollbarThumb);\n        this.appendChild(this.$scrollbarTrack);\n    }\n    bindEvents() {\n        window.MouseEvent && this.addEventListener('mousedown', this._onPointerDown);\n        window.TouchEvent && this.addEventListener('touchstart', this._onPointerDown);\n        window.addEventListener('esl:refresh', this._onRefresh);\n    }\n    bindTargetEvents() {\n        if (!this.$target)\n            return;\n        if (document.documentElement === this.$target) {\n            window.addEventListener('resize', this._onRefresh, { passive: true });\n            window.addEventListener('scroll', this._onRefresh, { passive: true });\n        }\n        else {\n            this._resizeObserver.observe(this.$target);\n            this._mutationObserver.observe(this.$target, { childList: true });\n            Array.from(this.$target.children).forEach((el) => this._resizeObserver.observe(el));\n            this.$target.addEventListener('scroll', this._onRefresh, { passive: true });\n        }\n    }\n    updateContentObserve(recs = []) {\n        if (!this.$target)\n            return;\n        const contentChanges = recs.filter((rec) => rec.type === 'childList');\n        contentChanges.forEach((rec) => {\n            Array.from(rec.addedNodes)\n                .filter((el) => el instanceof Element)\n                .forEach((el) => this._resizeObserver.observe(el));\n            Array.from(rec.removedNodes)\n                .filter((el) => el instanceof Element)\n                .forEach((el) => this._resizeObserver.unobserve(el));\n        });\n        if (contentChanges.length)\n            this._deferredRefresh();\n    }\n    unbindEvents() {\n        window.MouseEvent && this.removeEventListener('mousedown', this._onPointerDown);\n        window.TouchEvent && this.removeEventListener('touchstart', this._onPointerDown);\n        this.unbindTargetEvents();\n        window.removeEventListener('esl:refresh', this._onRefresh);\n    }\n    unbindTargetEvents() {\n        if (!this.$target)\n            return;\n        if (document.documentElement === this.$target) {\n            window.removeEventListener('resize', this._onRefresh);\n            window.removeEventListener('scroll', this._onRefresh);\n        }\n        else {\n            this._resizeObserver.disconnect();\n            this._mutationObserver.disconnect();\n            this.$target.removeEventListener('scroll', this._onRefresh);\n        }\n    }\n    /** @readonly Scrollable distance size value (px) */\n    get scrollableSize() {\n        if (!this.$target)\n            return 0;\n        return this.horizontal ?\n            this.$target.scrollWidth - this.$target.clientWidth :\n            this.$target.scrollHeight - this.$target.clientHeight;\n    }\n    /** @readonly Track size value (px) */\n    get trackOffset() {\n        return this.horizontal ? this.$scrollbarTrack.offsetWidth : this.$scrollbarTrack.offsetHeight;\n    }\n    /** @readonly Thumb size value (px) */\n    get thumbOffset() {\n        return this.horizontal ? this.$scrollbarThumb.offsetWidth : this.$scrollbarThumb.offsetHeight;\n    }\n    /** @readonly Relative thumb size value (between 0.0 and 1.0) */\n    get thumbSize() {\n        // behave as native scroll\n        if (!this.$target || !this.$target.scrollWidth || !this.$target.scrollHeight)\n            return 1;\n        const areaSize = this.horizontal ? this.$target.clientWidth : this.$target.clientHeight;\n        const scrollSize = this.horizontal ? this.$target.scrollWidth : this.$target.scrollHeight;\n        return Math.min((areaSize + 1) / scrollSize, 1);\n    }\n    /** Relative position value (between 0.0 and 1.0) */\n    get position() {\n        if (!this.$target)\n            return 0;\n        const scrollOffset = this.horizontal ? RTLUtils.normalizeScrollLeft(this.$target) : this.$target.scrollTop;\n        return this.scrollableSize ? (scrollOffset / this.scrollableSize) : 0;\n    }\n    set position(position) {\n        this.scrollTargetTo(this.scrollableSize * this.normalizePosition(position));\n        this.update();\n    }\n    /** Normalizes position value (between 0.0 and 1.0) */\n    normalizePosition(position) {\n        const relativePosition = Math.min(1, Math.max(0, position));\n        if (!RTLUtils.isRtl(this.$target) || !this.horizontal)\n            return relativePosition;\n        return RTLUtils.scrollType === 'negative' ? (relativePosition - 1) : (1 - relativePosition);\n    }\n    /** Scrolls target element to passed position */\n    scrollTargetTo(pos) {\n        if (!this.$target)\n            return;\n        this.$target.scrollTo({\n            [this.horizontal ? 'left' : 'top']: pos,\n            behavior: this.dragging ? 'auto' : 'smooth'\n        });\n    }\n    /** Updates thumb size and position */\n    update() {\n        this.$$fire('change:scroll', { bubbles: false });\n        if (!this.$scrollbarThumb || !this.$scrollbarTrack)\n            return;\n        const thumbSize = this.trackOffset * this.thumbSize;\n        const thumbPosition = (this.trackOffset - thumbSize) * this.position;\n        const style = {\n            [this.horizontal ? 'left' : 'top']: `${thumbPosition}px`,\n            [this.horizontal ? 'width' : 'height']: `${thumbSize}px`\n        };\n        Object.assign(this.$scrollbarThumb.style, style);\n    }\n    /** Updates auxiliary markers */\n    updateMarkers() {\n        const { position, thumbSize } = this;\n        this.toggleAttribute('at-start', thumbSize < 1 && position <= 0);\n        this.toggleAttribute('at-end', thumbSize < 1 && position >= 1);\n        this.toggleAttribute('inactive', thumbSize >= 1);\n    }\n    /** Refreshes scroll state and position */\n    refresh() {\n        this.update();\n        this.updateMarkers();\n    }\n    /** Returns position from MouseEvent coordinates (not normalized) */\n    toPosition(event) {\n        const { horizontal, thumbOffset, trackOffset } = this;\n        const point = EventUtils.normalizeCoordinates(event, this.$scrollbarTrack);\n        const pointPosition = horizontal ? point.x : point.y;\n        const freeTrackArea = trackOffset - thumbOffset; // size of free track px\n        const clickPositionNoOffset = pointPosition - thumbOffset / 2;\n        return clickPositionNoOffset / freeTrackArea;\n    }\n    // Event listeners\n    /** Handles `mousedown` / `touchstart` event to manage thumb drag start and scroll clicks */\n    _onPointerDown(event) {\n        this._initialPosition = this.position;\n        this._pointerPosition = this.toPosition(event);\n        const point = EventUtils.normalizeTouchPoint(event);\n        this._initialMousePosition = this.horizontal ? point.x : point.y;\n        if (event.target === this.$scrollbarThumb) {\n            this._onThumbPointerDown(event); // Drag start handler\n        }\n        else {\n            this._onPointerDownTick(true); // Continuous scroll and click handler\n        }\n        // Subscribe inverse handlers\n        EventUtils.isMouseEvent(event) && window.addEventListener('mouseup', this._onPointerUp);\n        EventUtils.isTouchEvent(event) && window.addEventListener('touchend', this._onPointerUp, { passive: false });\n        // Prevents default text selection, etc.\n        event.preventDefault();\n    }\n    /** Handles a scroll click / continuous scroll*/\n    _onPointerDownTick(first) {\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        const position = this.position;\n        const allowedOffset = (first ? 1 : 1.5) * this.thumbSize;\n        this.position = Math.min(position + allowedOffset, Math.max(position - allowedOffset, this._pointerPosition));\n        if (this.position === this._pointerPosition || this.noContinuousScroll)\n            return;\n        this._scrollTimer = window.setTimeout(this._onPointerDownTick, 400);\n    }\n    /** Handles thumb drag start */\n    _onThumbPointerDown(event) {\n        var _a;\n        this.toggleAttribute('dragging', true);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.setProperty('scroll-behavior', 'auto');\n        // Attach drag listeners\n        window.addEventListener('click', this._onBodyClick, { capture: true });\n        EventUtils.isMouseEvent(event) && window.addEventListener('mousemove', this._onPointerMove);\n        EventUtils.isTouchEvent(event) && window.addEventListener('touchmove', this._onPointerMove, { passive: false });\n    }\n    /** Sets position on drag */\n    _onPointerDrag(event) {\n        const point = EventUtils.normalizeTouchPoint(event);\n        const mousePosition = this.horizontal ? point.x : point.y;\n        const positionChange = mousePosition - this._initialMousePosition;\n        const scrollableAreaHeight = this.trackOffset - this.thumbOffset;\n        const absChange = scrollableAreaHeight ? (positionChange / scrollableAreaHeight) : 0;\n        this.position = this._initialPosition + absChange;\n        this.updateMarkers();\n    }\n    /** `mousemove` document handler for thumb drag event. Active only if drag action is active */\n    _onPointerMove(event) {\n        if (!this.dragging)\n            return;\n        // Request position update\n        this._deferredDrag(event);\n        // Prevents default text selection, etc.\n        event.preventDefault();\n        event.stopPropagation();\n    }\n    /** `mouseup` short-time document handler for drag end action */\n    _onPointerUp(event) {\n        var _a;\n        this._scrollTimer && window.clearTimeout(this._scrollTimer);\n        this.toggleAttribute('dragging', false);\n        (_a = this.$target) === null || _a === void 0 ? void 0 : _a.style.removeProperty('scroll-behavior');\n        // Unbind drag listeners\n        if (EventUtils.isMouseEvent(event)) {\n            window.removeEventListener('mousemove', this._onPointerMove);\n            window.removeEventListener('mouseup', this._onPointerUp);\n        }\n        if (EventUtils.isTouchEvent(event)) {\n            window.removeEventListener('touchmove', this._onPointerMove);\n            window.removeEventListener('touchend', this._onPointerUp);\n        }\n    }\n    /** Body `click` short-time handler to prevent clicks event on thumb drag. Handles capture phase */\n    _onBodyClick(event) {\n        event.stopImmediatePropagation();\n        window.removeEventListener('click', this._onBodyClick, { capture: true });\n    }\n    /**\n     * Handler for refresh events to update the scroll.\n     * @param event - instance of 'resize' or 'scroll' or 'esl:refresh' event.\n     */\n    _onRefresh(event) {\n        const target = event.target;\n        if (event.type === 'scroll' && this.dragging)\n            return;\n        if (event.type === 'esl:refresh' && !isRelativeNode(target.parentNode, this.$target))\n            return;\n        this._deferredRefresh();\n    }\n};\nESLScrollbar.is = 'esl-scrollbar';\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"horizontal\", void 0);\n__decorate([\n    boolAttr()\n], ESLScrollbar.prototype, \"noContinuousScroll\", void 0);\n__decorate([\n    attr({ defaultValue: '::parent' })\n], ESLScrollbar.prototype, \"target\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-thumb' })\n], ESLScrollbar.prototype, \"thumbClass\", void 0);\n__decorate([\n    attr({ defaultValue: 'scrollbar-track' })\n], ESLScrollbar.prototype, \"trackClass\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"dragging\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"inactive\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atStart\", void 0);\n__decorate([\n    boolAttr({ readonly: true })\n], ESLScrollbar.prototype, \"atEnd\", void 0);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"connectedCallback\", null);\n__decorate([\n    ready\n], ESLScrollbar.prototype, \"disconnectedCallback\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerDown\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerDownTick\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onThumbPointerDown\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerMove\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onPointerUp\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onBodyClick\", null);\n__decorate([\n    bind\n], ESLScrollbar.prototype, \"_onRefresh\", null);\nESLScrollbar = __decorate([\n    ExportNs('Scrollbar')\n], ESLScrollbar);\nexport { ESLScrollbar };\n","/**\n * `@prop` is auxiliary decorator to define a field on the prototype level.\n *` @prop` can be used to override decorated property from the parent level\n *\n * You can also use an @override decorator in combination with ECMA Script class property definition:\n * `@prop() public field: any = initial value;`\n *\n * The class property initial value is a part of object creation, so it goes to the object itself,\n * while the @override value is defined on the prototype level.\n *\n * @param prototypeConfig - prototype property configuration\n */\nexport function prop(prototypeConfig = {}) {\n    return function (obj, name) {\n        if (Object.hasOwnProperty.call(obj, name)) {\n            throw new TypeError('Can\\'t override own property');\n        }\n        Object.defineProperty(obj, name, {\n            value: prototypeConfig.value,\n            writable: !prototypeConfig.readonly,\n            enumerable: true,\n            configurable: true\n        });\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { prop, bind, ready, ESLToggleable, ESLMediaQuery } from '@exadel/esl';\nimport { attr } from '@exadel/esl/modules/esl-base-element/core';\nexport class ESLDemoSidebar extends ESLToggleable {\n    constructor() {\n        super(...arguments);\n        this.closeOnEsc = true;\n        this.closeOnOutsideAction = true;\n        this.submenus = '.sidebar-nav-secondary';\n        this.activeMenuAttr = 'data-open';\n    }\n    get $submenus() {\n        return Array.from(this.querySelectorAll(this.submenus));\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        ESLMediaQuery.for('@+MD').addListener(this.onBreakpointChange);\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        ESLMediaQuery.for('@+MD').removeListener(this.onBreakpointChange);\n    }\n    setInitialState() {\n        const isDesktop = ESLMediaQuery.for('@+MD').matches;\n        const isStoredOpen = !localStorage.getItem('sidebar-collapsed');\n        this.toggle(isDesktop && isStoredOpen, { force: true, initiator: 'init', immediate: true });\n    }\n    collapseAll() {\n        this.$submenus.forEach((menu) => menu.hide({ activator: this }));\n    }\n    expandActive(noCollapse = false) {\n        this.$submenus\n            .filter((menu) => menu.hasAttribute('data-open'))\n            .forEach((menu) => menu.show({ noCollapse, activator: this }));\n    }\n    updateA11y() {\n        const targetEl = this.$a11yTarget;\n        if (!targetEl)\n            return;\n        targetEl.setAttribute('aria-expanded', String(this.open));\n    }\n    hide(params) {\n        if (ESLMediaQuery.for('@+MD').matches)\n            return this;\n        return super.hide(params);\n    }\n    onShow(params) {\n        this._animation = !params.immediate;\n        super.onShow(params);\n        this.expandActive(params.initiator === 'init');\n    }\n    onHide(params) {\n        this._animation = !params.immediate;\n        super.onHide(params);\n        this.collapseAll();\n    }\n    onBreakpointChange() {\n        const isDesktop = ESLMediaQuery.for('@+MD').matches;\n        this.toggle(isDesktop, { force: true, initiator: 'bpchange', immediate: !isDesktop });\n    }\n}\nESLDemoSidebar.is = 'esl-d-sidebar';\n__decorate([\n    prop()\n], ESLDemoSidebar.prototype, \"closeOnEsc\", void 0);\n__decorate([\n    prop()\n], ESLDemoSidebar.prototype, \"closeOnOutsideAction\", void 0);\n__decorate([\n    prop()\n], ESLDemoSidebar.prototype, \"submenus\", void 0);\n__decorate([\n    prop()\n], ESLDemoSidebar.prototype, \"activeMenuAttr\", void 0);\n__decorate([\n    attr({ name: 'animation' })\n], ESLDemoSidebar.prototype, \"_animation\", void 0);\n__decorate([\n    ready\n], ESLDemoSidebar.prototype, \"connectedCallback\", null);\n__decorate([\n    bind\n], ESLDemoSidebar.prototype, \"onBreakpointChange\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ESLBaseElement, attr } from '@exadel/esl/modules/esl-base-element/core';\nimport { ready } from '@exadel/esl/modules/esl-utils/decorators/ready';\nimport { isIE } from '@exadel/esl/modules/esl-utils/environment/device-detector';\nimport { bind } from '@exadel/esl/modules/esl-utils/decorators/bind';\nimport { memoize } from '@exadel/esl/modules/esl-utils/decorators/memoize';\nimport { range } from '@exadel/esl/modules/esl-utils/misc/array';\nexport class EAKBannerLogo extends ESLBaseElement {\n    constructor() {\n        super(...arguments);\n        this._$active = [];\n        this._animateTimer = 0;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (isIE)\n            return;\n        this.startAnimation();\n    }\n    disconnectedCallback() {\n        this.stopAnimation();\n        super.disconnectedCallback();\n    }\n    get $stars() {\n        return Array.from(document.querySelectorAll(EAKBannerLogo.STARS_SEL));\n    }\n    get $randomStar() {\n        const index = Math.floor(Math.random() * this.$stars.length);\n        return this.$stars[index];\n    }\n    startAnimation() {\n        memoize.clear(this, '$stars');\n        this.stopAnimation();\n        if (this.$stars.length < 2)\n            return;\n        this._animateTimer = window.setTimeout(this._onIteration, +this.iterationTime);\n    }\n    stopAnimation() {\n        this._animateTimer && window.clearTimeout(this._animateTimer);\n    }\n    _onIteration() {\n        const $candidates = range(+this.targetsNumber, () => this.$randomStar);\n        this._$active.forEach((star) => star.classList.remove('animate'));\n        $candidates.forEach((star) => star.classList.add('animate'));\n        this._$active = $candidates;\n        this._animateTimer = window.setTimeout(this._onIteration, +this.iterationTime);\n    }\n}\nEAKBannerLogo.is = 'eak-banner-logo';\nEAKBannerLogo.STARS_SEL = [\n    '#eak-banner-stars-green > path',\n    '#eak-banner-stars-white > path'\n].join(',');\n__decorate([\n    attr({ defaultValue: '4' })\n], EAKBannerLogo.prototype, \"targetsNumber\", void 0);\n__decorate([\n    attr({ defaultValue: '3000' })\n], EAKBannerLogo.prototype, \"iterationTime\", void 0);\n__decorate([\n    ready\n], EAKBannerLogo.prototype, \"connectedCallback\", null);\n__decorate([\n    memoize()\n], EAKBannerLogo.prototype, \"$stars\", null);\n__decorate([\n    bind\n], EAKBannerLogo.prototype, \"_onIteration\", null);\n","import { ESLTabs, ESLTab, ESLPanel, ESLPanelGroup, ESLTrigger, ESLScrollbar, ESLToggleableDispatcher, } from '@exadel/esl';\nimport { ESLDemoSidebar } from './navigation/navigation';\nimport { EAKBannerLogo } from './landing/banner-logo/banner-logo';\nESLDemoSidebar.register();\nEAKBannerLogo.register();\nESLTabs.register();\nESLTab.register();\nESLToggleableDispatcher.init();\nESLPanelGroup.register();\nESLPanel.register();\nESLTrigger.register();\nESLScrollbar.register();\n"],"names":["__webpack_require__","g","globalThis","this","Function","e","window","ExportNs","name","module","root","value","split","reduce","obj","key","index","parts","length","type","Error","exportNs","getAttr","$el","fallback","$host","getAttribute","setAttr","removeAttribute","setAttribute","declare","Object","defineProperty","EventUtils","static","el","eventName","eventInit","init","assign","bubbles","composed","cancelable","dispatchEvent","CustomEvent","targets","composedPath","target","event","MouseEvent","TouchEvent","source","isTouchEvent","changedTouches","x","pageX","y","pageY","elem","props","getBoundingClientRect","top","scrollY","left","scrollX","stopPropagation","preventDefault","identity","arg","wrap","arr","Array","isArray","lockStore","WeakMap","add","className","locker","remove","substring","elLocks","get","Map","classLocks","Set","set","lock","classList","delete","size","unlock","CSSClassUtils","has","contains","tokenString","filter","str","els","cls","tokens","splitTokens","forEach","state","every","_a","ESLBaseElement","HTMLElement","constructor","super","arguments","_connected","connectedCallback","is","disconnectedCallback","connected","$$cls","undefined","toggle","$$attr","prevValue","$$fire","dispatch","tagName","customElements","define","registered","whenDefined","isPrimitive","getPropertyDescriptor","o","prop","proto","desc","getOwnPropertyDescriptor","getPrototypeOf","defined","params","param","toKebabCase","replace","toLowerCase","unwrapParenthesis","trim","parseNumber","nanValue","NaN","isNaN","evaluate","defaultValue","console","warn","attr","config","propName","attrName","dataAttr","buildAttrName","readOnly","buildSimpleDescriptor","readonly","afterNextRender","callback","requestAnimationFrame","rafDecorator","fn","lastArgs","args","call","bind","propertyKey","descriptor","TypeError","enumerable","configurable","hasOwnProperty","bindings","writable","memoizeFn","hashFn","defaultArgsHashFn","memo","apply","cache","clear","String","memoize","originalMethod","locks","defineOwnKeySafe","memoizeGetter","memoizeMethod","property","RTLUtils","getComputedStyle","document","body","direction","scrollType","createElement","appendChild","createTextNode","dir","style","position","width","height","fontSize","overflow","createDummyEl","scrollLeft","removeChild","isRtl","scrollWidth","clientWidth","promisifyEvent","timeout","options","Promise","resolve","reject","addEventListener","eventCallback","removeEventListener","setTimeout","createDeferred","promise","res","rej","decorators","d","c","r","Reflect","decorate","i","__decorate","PromiseUtils","debounce","wait","thisArg","deferred","debouncedSubject","clearTimeout","fromTimeout","payload","fromEvent","fromMarker","marker","then","repeat","repeatSequence","count","tryUntil","tryCount","check","result","Observable","_listeners","addListener","listener","removeListener","fire","error","userAgent","vendor","platform","navigator","isTrident","test","isIE","isEdgeHTML","isBlinkEdge","isEdge","isGecko","isFirefox","isOpera","isChrome","isWebkit","isSafari","isBlink","isBot","isAndroid","isMobileIOS13","maxTouchPoints","isMobileIOS","isLegacyMobile","isMobile","isMobileSafari","isTouchDevice","navApi","msMaxTouchPoints","Touch","hasHover","matchMedia","matches","TOUCH_EVENTS","START","MOVE","END","DeviceDetector","ESLScreenDPR_1","ESLScreenDPR","dpr","toFixed","match","VALUE_REGEXP","parseFloat","ignoreBotsDpr","toDPI","ESLScreenBreakpoints_1","registry","ESLScreenBreakpoints","minWidth","maxWidth","BP_NAME_REGEXP","current","ESLScreenBreakpoint","names","keys","push","term","sign","bp","BP_REGEXP","shortcut","mediaQueryGE","mediaQueryLE","mediaQuery","min","max","toString","shortcuts","ESLEnvShortcuts","includes","_shortcuts","MediaQueryConstCondition","_matches","cb","optimize","eq","val","ALL","NOT_ALL","MediaQueryCondition","query","inverted","_inverted","_mq","media","MediaQueryContainer","items","_onChildChange","item","MediaQueryConjunction","optimizedItems","map","some","join","MediaQueryDisjunction","pretty","ESLMediaQuery_1","ESLMediaQuery","preprocessor","_preprocessors","unshift","from","conjunctions","conditions","parseSimpleQuery","SHORTCUT_PATTERN","replacer","process","queryInverted","processedQuery","preprocess","sanitizedQuery","invert","use","ESLMediaRule","_query","_default","_payload","default","parser","payloadValue","lex","create","ESLMediaRuleList_1","ESLMediaRuleList","rules","_rules","rule","_onMatchChanged","parse","values","mask","valueList","validRules","active","_active","activeRule","satisfiedRules","empty","activeValue","STRING_PARSER","OBJECT_PARSER","boolAttr","hasAttribute","buildConditionalDescriptor","ready","readyState","ENTER","SPACE","SYSTEM_KEYS","isRelativeNode","nodeA","nodeB","createSequenceFinder","next","base","sel","findNext","nextElementSibling","findPrev","previousElementSibling","findParent","parentElement","findAll","querySelectorAll","findChildren","children","TraversingUtils","isRelative","closestBy","node","predicate","skipSelf","parentNode","TraversingQuery_1","TraversingQuery","PROCESSORS_REGEX","ELEMENT_PROCESSORS","concat","COLLECTION_PROCESSORS","RegExp","selString","collection","processors","findFirst","processor","rest","isCollectionProcessor","processedItem","processCollection","traverseChain","processElement","resultCollection","slice","uniq","scope","rootSel","shift","baseCollection","initial","acc","traverse","list","ESLToggleablePlaceholder","$placeholder","$origin","copyAttributesFromOrigin","allowedAttrs","ESLTrigger","observedAttributes","attributeChangedCallback","updateTargetFromSelector","$target","_$target","newPopupInstance","unbindEvents","bindEvents","_onTargetStateChange","$a11yTarget","a11yTarget","querySelector","allowHover","trackHover","allowClick","trackClick","initA11y","_onClick","_onKeydown","_onMouseEnter","_onMouseLeave","first","isTargetIgnored","ignore","$ignore","closest","mergeToggleableParams","initiator","activator","showTarget","actionParams","delay","showDelay","show","hideTarget","hideDelay","hide","toggleTarget","updateState","isActive","open","wasActive","toggleAttribute","clsTarget","activeClassTarget","activeClass","updateA11y","originalEvent","detail","mode","hoverShowDelay","hoverHideDelay","id","prototype","ESLTab","ESLTabs_1","ESLTabs","_deferredUpdateArrows","updateArrows","_deferredFitToViewport","fitToViewport","_onResize","$current","scrollableTypeRules","scrollable","currentScrollableType","_onScrollableTypeChange","updateScrollableType","unbindScrollableEvents","oldVal","newVal","bindScrollableEvents","_onTriggerStateChange","_onFocus","$scrollableTarget","_onScroll","passive","$tabs","find","scrollableTarget","isScrollable","moveTo","behavior","offsetWidth","scrollBy","$trigger","updateMarkers","areaRect","itemRect","calcScrollOffset","isReversedRTL","right","Math","floor","ceil","swapSides","scrollStart","abs","scrollEnd","$rightArrow","$leftArrow","hasScroll","supportedScrollableTypes","dataset","tabDirection","ns","sequences","__esl_sequences__","DelayedTask","_fn","_timeout","run","put","task","prev","cancel","jsonAttr","JSON","stringify","buildJsonAttrDescriptor","activators","ESLToggleable","_open","_task","_trackHover","noAutoId","tag","prefix","uid","sequentialUID","initiallyOpened","setInitialState","oldGroupName","newGroupName","initialParams","_onKeyboardEvent","_onShowRequest","bindOutsideEventTracking","bindHoverStateTracking","track","_onOutsideAction","_trackHoverDelay","mergeDefaultParams","defaultParams","copy","showTask","closeOnOutsideAction","hideTask","force","silent","onShow","onHide","bodyClass","targetEl","isOutsideAction","KeyboardEvent","closeTrigger","closeOnEsc","baseParams","trackHoverParams","ESLToggleableDispatcher","_popups","getElementsByTagName","register","insertAdjacentElement","_onBeforeShow","_onShow","_onHide","_onChangeGroup","_root","isAcceptable","groupName","hideActive","getActive","dispatcher","setActive","popup","deleteActive","ESLPanel","_initialHeight","initialHeight","$group","ESLPanelGroup","_onTransitionEnd","scrollHeight","beforeAnimate","noCollapse","afterAnimate","onAnimate","animateClass","postAnimateClass","to","setProperty","fallbackAnimate","distance","maxHeight","clientHeight","animating","clearAnimation","removeProperty","propertyName","stackConfig","panelConfig","ESLPanelGroup_1","_previousHeight","modeRules","_onModeChange","updateMode","accordionGroup","reset","_onBeforeHide","prevMode","currentMode","updateModeCls","modeCls","modeClsTarget","supportedModes","matcher","DEF_FORMAT_MATCHER","data","path","curr","isObject","format","$panels","includesPanel","$activePanels","shouldCollapse","noCollapseModes","mergeActionParams","showAll","excluded","hideAll","toggleAllBy","shouldOpen","panel","transformParams","$activePanel","animationClass","ESLScrollbar","_deferredDrag","_onPointerDrag","_deferredRefresh","refresh","_scrollTimer","_resizeObserver","ResizeObserver","_mutationObserver","MutationObserver","rec","updateContentObserve","findTarget","render","content","unbindTargetEvents","bindTargetEvents","innerHTML","$scrollbarTrack","trackClass","$scrollbarThumb","thumbClass","_onPointerDown","_onRefresh","documentElement","observe","childList","recs","contentChanges","addedNodes","Element","removedNodes","unobserve","disconnect","scrollableSize","horizontal","trackOffset","offsetHeight","thumbOffset","thumbSize","areaSize","scrollSize","scrollOffset","normalizeScrollLeft","scrollTop","scrollTargetTo","normalizePosition","update","relativePosition","pos","scrollTo","dragging","thumbPosition","toPosition","point","normalizeCoordinates","_initialPosition","_pointerPosition","normalizeTouchPoint","_initialMousePosition","_onThumbPointerDown","_onPointerDownTick","isMouseEvent","_onPointerUp","allowedOffset","noContinuousScroll","_onBodyClick","capture","_onPointerMove","positionChange","scrollableAreaHeight","absChange","stopImmediatePropagation","prototypeConfig","ESLDemoSidebar","submenus","activeMenuAttr","$submenus","onBreakpointChange","isDesktop","isStoredOpen","localStorage","getItem","immediate","collapseAll","menu","expandActive","_animation","EAKBannerLogo","_$active","_animateTimer","startAnimation","stopAnimation","$stars","STARS_SEL","$randomStar","random","_onIteration","iterationTime","$candidates","n","filler","range","targetsNumber","star"],"sourceRoot":""}