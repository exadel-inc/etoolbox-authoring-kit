<head> <title>Reusing Code - Exadel Authoring Kit</title> <link rel="canonical" href="https://authoring-kit.com/content/dev-tools/component-management/reusing-code"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <link rel="icon" type="image/png" href="/assets/logo-64x64.png"> <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SFSRZREMCC"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-SFSRZREMCC")</script> <script>!function(){var e="";"getRootNode"in Element.prototype&&window.customElements?window.scrollBy&&window.IntersectionObserver&&window.ResizeObserver&&window.ResizeObserver||(e="light"):e="medium",e&&document.write('<script type="text/javascript" src="/bundles/polyfill-'+e+'.js"><\/script>')}()</script> <link rel="stylesheet" type="text/css" href="/bundles/site.css"> </head> <body> <div class="page sidebar-layout"> <header class="header"> <nav class="header-container container"> <a class="header-link header-logo logo-animated" href="/" aria-label="landing page"> <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38"> <g clip-path="url(#a)" fill-rule="evenodd" clip-rule="evenodd" fill="#0082CA"> <path d="M23.7024 17.967a1.4253 1.4253 0 0 0 1.4276.7264 1.4273 1.4273 0 0 0 1.2019-1.0588 1.4265 1.4265 0 0 0-.16-1.0926L20.3532 6.4634A1.4044 1.4044 0 0 0 19 5.762a1.427 1.427 0 0 0-1.354.7014L6.9582 24.9731a1.4257 1.4257 0 0 0 .5227 1.9477 1.424 1.424 0 0 0 .527.1786 1.4243 1.4243 0 0 0 1.054-.2829 1.4253 1.4253 0 0 0 .3667-.4184L19 9.8206l4.7024 8.1464Z"></path> <path d="m31.0418 24.8667-2.2336-3.8608a1.399 1.399 0 0 0-.6642-.5941 1.4256 1.4256 0 0 0-.7608-.2253H15.7457a1.4251 1.4251 0 0 0 0 2.85h10.9512l1.8763 3.2534a1.426 1.426 0 0 0 2.5758-.3632 1.4255 1.4255 0 0 0-.1072-1.06Z"></path> <path d="M38 19C38 8.5029 29.4971 0 19 0S0 8.5029 0 19s8.502 19 19 19a18.859 18.859 0 0 0 8.134-1.8311 1.4094 1.4094 0 0 1-.7599-1.2113 17.567 17.567 0 0 1-7.3599 1.6148c-9.7017 0-17.575-7.8724-17.575-17.5751C1.4392 9.2947 9.2982 1.425 19 1.425c9.7017 0 17.575 7.876 17.575 17.575a17.4351 17.4351 0 0 1-3.1594 10.0467 1.4199 1.4199 0 0 1 .5471 1.1164v.5462A18.924 18.924 0 0 0 38 19Z"></path> <path d="M32.3001 29.6877h-4.2732a.7133.7133 0 0 0 0 1.4268h3.562v1.1873a.7125.7125 0 0 0 1.425 0v-1.8967a.7159.7159 0 0 0-.2081-.5068.7143.7143 0 0 0-.5057-.2106ZM32.0624 33.9627h-3.3261v-1.425a.7125.7125 0 1 0-1.425 0v2.1379a.7147.7147 0 0 0 .7094.7094h4.0373a.7125.7125 0 0 0 0-1.425l.0044.0027Z"></path> </g> <defs> <clipPath id="a"> <path fill="#fff" d="M0 0h38v38H0z"></path> </clipPath> </defs> </svg> <span class="header-short-name">Exadel Authoring Kit</span> <span class="header-long-name">Exadel Authoring Kit for AEM</span> </a> <ul class="header-links unstyled-list"> <li class="header-item"> <a class="header-link" href=".">Manuals</a> </li> <li class="header-item"> <a class="header-link" href="" target="_blank">API Docs</a> </li> <li class="header-item"> <a class="header-link" href="" target="_blank">Blog</a> </li> <li class="header-item"> <a class="header-link fill-primary" href="https://github.com/exadel-inc/etoolbox-authoring-kit" target="_blank" rel="noopener norefferer"> <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"> <path d="M10.6666 14.6668v-2.58a2.246 2.246 0 0 0-.6266-1.74c2.0933-.2333 4.2933-1.0267 4.2933-4.6667a3.6268 3.6268 0 0 0-1-2.5 3.38 3.38 0 0 0-.06-2.5133s-.7867-.2333-2.6067.9867a8.92 8.92 0 0 0-4.6666 0C4.18.4335 3.3933.6668 3.3933.6668a3.38 3.38 0 0 0-.06 2.5133 3.6267 3.6267 0 0 0-1 2.52c0 3.6133 2.2 4.4067 4.2934 4.6667A2.2458 2.2458 0 0 0 6 12.0868v2.58" fill="#0082CA"></path> <path d="M6 12.6668c-3.3333 1-3.3333-1.6667-4.6667-2m9.3333 4v-2.58a2.246 2.246 0 0 0-.6266-1.74c2.0933-.2333 4.2933-1.0267 4.2933-4.6667a3.6268 3.6268 0 0 0-1-2.5 3.38 3.38 0 0 0-.06-2.5133s-.7867-.2333-2.6067.9867a8.92 8.92 0 0 0-4.6666 0C4.18.4335 3.3933.6668 3.3933.6668a3.38 3.38 0 0 0-.06 2.5133 3.6267 3.6267 0 0 0-1 2.52c0 3.6133 2.2 4.4067 4.2934 4.6667A2.2458 2.2458 0 0 0 6 12.0868v2.58h4.6666Z" stroke="#0082CA" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </a> </li> </ul> <div class="header-utility"> <esl-trigger class="header-hamburger" target="#sidebar" aria-label="navigation menu"></esl-trigger> </div> </nav> </header> <eak-sidebar id="sidebar" class="open" aria-label="Site Navigation"> <nav class="sidebar-nav"> <a class="sidebar-heading" href="/"> <span class="sidebar-logo"> <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38"> <g clip-path="url(#a)" fill-rule="evenodd" clip-rule="evenodd" fill="#0082CA"> <path d="M23.7024 17.967a1.4253 1.4253 0 0 0 1.4276.7264 1.4273 1.4273 0 0 0 1.2019-1.0588 1.4265 1.4265 0 0 0-.16-1.0926L20.3532 6.4634A1.4044 1.4044 0 0 0 19 5.762a1.427 1.427 0 0 0-1.354.7014L6.9582 24.9731a1.4257 1.4257 0 0 0 .5227 1.9477 1.424 1.424 0 0 0 .527.1786 1.4243 1.4243 0 0 0 1.054-.2829 1.4253 1.4253 0 0 0 .3667-.4184L19 9.8206l4.7024 8.1464Z"></path> <path d="m31.0418 24.8667-2.2336-3.8608a1.399 1.399 0 0 0-.6642-.5941 1.4256 1.4256 0 0 0-.7608-.2253H15.7457a1.4251 1.4251 0 0 0 0 2.85h10.9512l1.8763 3.2534a1.426 1.426 0 0 0 2.5758-.3632 1.4255 1.4255 0 0 0-.1072-1.06Z"></path> <path d="M38 19C38 8.5029 29.4971 0 19 0S0 8.5029 0 19s8.502 19 19 19a18.859 18.859 0 0 0 8.134-1.8311 1.4094 1.4094 0 0 1-.7599-1.2113 17.567 17.567 0 0 1-7.3599 1.6148c-9.7017 0-17.575-7.8724-17.575-17.5751C1.4392 9.2947 9.2982 1.425 19 1.425c9.7017 0 17.575 7.876 17.575 17.575a17.4351 17.4351 0 0 1-3.1594 10.0467 1.4199 1.4199 0 0 1 .5471 1.1164v.5462A18.924 18.924 0 0 0 38 19Z"></path> <path d="M32.3001 29.6877h-4.2732a.7133.7133 0 0 0 0 1.4268h3.562v1.1873a.7125.7125 0 0 0 1.425 0v-1.8967a.7159.7159 0 0 0-.2081-.5068.7143.7143 0 0 0-.5057-.2106ZM32.0624 33.9627h-3.3261v-1.425a.7125.7125 0 1 0-1.425 0v2.1379a.7147.7147 0 0 0 .7094.7094h4.0373a.7125.7125 0 0 0 0-1.425l.0044.0027Z"></path> </g> <defs> <clipPath id="a"> <path fill="#fff" d="M0 0h38v38H0z"></path> </clipPath> </defs> </svg> </span> <span class="sidebar-title">Exadel Authoring Kit for AEM</span> </a> <div class="sidebar-content"> <div class="sidebar-scrollable-content esl-scrollable-content"> <ul class="sidebar-nav-list"> <li class="sidebar-nav-item"> <div class="sidebar-nav-item-heading"> Getting Started </div> <div class="sidebar-nav-secondary"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/getting-started/installation/"> Installation </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/getting-started/common-use-cases/"> Common Use Cases </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/getting-started/popular-articles/"> Popular Articles </a> </li> </ul> </div> </li> <li class="sidebar-nav-item"> <div class="sidebar-nav-item-heading"> Developer Tools </div> <div class="sidebar-nav-secondary"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item sidebar-secondary-nav-item-children"> <div class="sidebar-nav-item-heading active"> <esl-trigger class="sidebar-nav-item-trigger sidebar-nav-item-arrow" target="::parent::next" active=""> Component Management </esl-trigger> </div> <esl-panel id="sidebar-component-management-menu" class="sidebar-nav-secondary nav-secondary-panel open" data-open="" group=" component-management"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/component-structure/"> Component Structure </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-layout/"> Dialog Layout </a> </li> <li class="sidebar-nav-secondary-item sidebar-secondary-nav-item-children"> <div class="sidebar-nav-item-heading"> <esl-trigger class="sidebar-nav-item-trigger sidebar-nav-item-arrow" target="::parent::next"> Dialog Fields </esl-trigger> </div> <esl-panel id="sidebar-dialog-fields-menu" class="sidebar-nav-secondary nav-secondary-panel" group=" dialog-fields"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-fields/dialog-field/"> Dialog Field </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-fields/widgets/"> Widgets (A-Z) </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-fields/configuring-rte/"> Configuring RTE </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-fields/configuring-fieldset/"> Configuring Fieldset </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-fields/configuring-multifield/"> Configuring Multifield </a> </li> </ul> </esl-panel> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/additional-properties/"> Additional Properties </a> </li> <li class="sidebar-nav-secondary-item active" aria-selected="true"> <a class="sidebar-nav-secondary-link" aria-current="page" href="/content/dev-tools/component-management/reusing-code/"> Reusing Code </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/customizing-toolkit/"> Customization </a> </li> </ul> </esl-panel> </li> <li class="sidebar-nav-secondary-item sidebar-secondary-nav-item-children"> <div class="sidebar-nav-item-heading"> <esl-trigger class="sidebar-nav-item-trigger sidebar-nav-item-arrow" target="::parent::next"> DependsOn </esl-trigger> </div> <esl-panel id="sidebar-depends-on-menu" class="sidebar-nav-secondary nav-secondary-panel" group=" depends-on"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/depends-on/introduction/"> Introduction </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/depends-on/usage/"> Usage </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/depends-on/api/"> API </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/depends-on/examples/"> Examples </a> </li> </ul> </esl-panel> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/option-provider/"> Option Provider </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/injectors/"> Injectors </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/allowed-components/"> Allowed Components </a> </li> </ul> </div> </li> <li class="sidebar-nav-item"> <div class="sidebar-nav-item-heading"> Authoring Tools </div> <div class="sidebar-nav-secondary"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/authoring-tools/etoolbox-lists/"> Etoolbox Lists </a> </li> </ul> </div> </li> </ul> <div class="sidebar-footer-copyright"> EAK v2.4.1 Â© 2024<a class="sidebar-footer-link" href="https://exadel.com/" target="_blank" rel="noopener norefferer">Exadel</a>, Inc. </div> </div> <esl-scrollbar class="sidebar-scrollbar" target="::prev"></esl-scrollbar> </div> </nav> </eak-sidebar> <main class="esl-scrollable-content"> <div class="content mb-4 container markdown-container"> <div class="content-page-title"> <span class="parent-page">Developer Tools / </span> <span class="parent-page">Component Management / </span> <h1 class="current-page">Reusing code and making it brief</h1> </div> <h2 id="members-inheritance-and-how-to-cancel-it">Members inheritance and how to cancel it</h2> <p>Either dialog containers (tabs or accordion panels) or dialog fields are "inherited" across Java classes that <em>extend</em> or <em>implement</em> other classes.</p> <p>By default, this is true for dialog fields bound to non-private Java class methods because they are indeed visible across the inheritance tree. But the <em>Toolkit</em> provides the same facility for Java class fields as well.</p> <p>However, it is possible to "cancel" a superclass-bound field from rendering in a current dialog or a narrower container. Add an <code>@Ignore</code> annotation to the current class:</p> <pre><code class="language-java">    <span class="token annotation punctuation">@Dialog</span><span class="token punctuation">(</span>
            name <span class="token operator">=</span> <span class="token string">"component-dialog"</span><span class="token punctuation">,</span>
            title <span class="token operator">=</span> <span class="token string">"Dialog Title"</span><span class="token punctuation">,</span>
            layout <span class="token operator">=</span> <span class="token class-name">DialogLayout</span><span class="token punctuation">.</span><span class="token constant">TABS</span>
    <span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Ignore</span><span class="token punctuation">(</span>members <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">// The "value" parameter is mandatory while "source" can be skipped.</span>
            <span class="token comment">// In this case, the current class is implied.</span>
            <span class="token comment">// You can also assign the reserved value _Super.class to "source".</span>
            <span class="token comment">// Thus, the field/method from the superclass will be ignored</span>
            <span class="token annotation punctuation">@ClassMember</span><span class="token punctuation">(</span>source <span class="token operator">=</span> <span class="token class-name">ComponentWithTabsAndInnerClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> value<span class="token operator">=</span> <span class="token string">"field1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ClassMember</span><span class="token punctuation">(</span><span class="token string">"field2"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ComponentDialog</span> <span class="token keyword">extends</span> <span class="token class-name">MultipleFieldsDialog</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
</code></pre> <p>This setting works similarly for dialog classes and <code>FieldSets</code> and <code>Multifields</code>. It is also possible to control secondary containers (<em>FieldSets</em> and <em>Multifields</em>) in a more flexible manner.</p> <p>If we add an <code>@Ignore(@ClassMember(...))</code> instruction with its <em>source</em> pointing to a FieldSet or Multifield class in the current dialog, the field will be ignored in all the fieldsets/multifields of the given type that are declared within the dialog.</p> <p>But if we need to ignore a field in one particular FieldSet of Multifield within the dialog, we may add <code>@Ignore(members = @ClassMember(...))</code> to that same field below the <code>@FieldSet</code> or <code>@Multifield</code> annotation, accordingly. The <em>source</em> parameter is naturally skipped in this case. The setting will take effect for the field and will not affect others.</p> <p>The <code>@Ignore</code> setting is <em>not</em> inherited, unlike fields themselves, and works only for the class where it was specified.</p> <h2 id="sections-inheritance">Sections inheritance</h2> <p>With the ToolKit, dialog sections (tabs or accordion panels) declared in a superclass are also "inherited" by the descendant class, and the layout instructions (<code>@Place</code>) are in effect even if referring to a superclass container.</p> <p>Surely, there's a possibility to ignore an "inherited" section as well. Add the <code>@Ignore</code> annotation to the current class or <code>@Tabs</code>/<code>@Accordion</code>/<code>@FixedColumns</code>-annotated class member and fill in its <em>sections</em> property. It accepts a single string equal to the title of the ignored section, or an array of strings.</p> <pre><code class="language-java"><span class="token annotation punctuation">@Dialog</span><span class="token punctuation">(</span>
    name <span class="token operator">=</span> <span class="token string">"test-component"</span><span class="token punctuation">,</span>
    title <span class="token operator">=</span> <span class="token string">"test-component-dialog"</span><span class="token punctuation">,</span>
    tabs <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Tab</span><span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">"Fourth tab"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Tab</span><span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">"Fifth tab"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token comment">// In Toolkit, containers/sections such as tabs, are manipulated by their title strings</span>
<span class="token annotation punctuation">@Ignore</span><span class="token punctuation">(</span>sections <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"First tab"</span><span class="token punctuation">,</span> <span class="token string">"Second tab"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestTabsExtension</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
</code></pre> <p>Note that, again, the <code>@Ignore</code> setting is <em>not</em> inherited and works only for the class where it was specified.</p> <h2 id="replacing-members">Replacing members</h2> <p>Apart from ignoring class members, there is an option to replace an (ancestral) field or method with another one. This may be used to virtually "override" a field from superclass preserving the same field name (but with no duplicating this time). Take a look at the following sample:</p> <pre><code>    @DialogField
    @TextField
    @Replace(@ClassMember(source = _Super.class, value = "supertext"))
    private String text;
</code></pre> <p>This way, the <em>text</em> field in the superclass will be removed from the rendering workflow, but the <em>text</em> field from the current class will remain. Moreover, the latter be placed exactly where the overridden field would reside unless another <em>ranking</em> value is set.</p> <p>If you omit the <em>source</em> part from <code>@Replace</code>, the current class will be assumed. Otherwise, if you omit the <em>value</em>, the same-named field or method from the specified source class will be assumed.</p> <h2 id="extends-ing-fields-annotations">@Extends-ing fields annotations</h2> <p>Several dialog fields, such as the RichTextEditor field, may require vast and sophisticated annotation code. If there are multiple such fields in your Java files, they may become overgrown and difficult to maintain. You will also probably face the need to copy the lengthy annotation listings between fields (e.g. if you plan to use several RTE boxes with virtually the same set of toolbar buttons, plugins, etc.).</p> <p>One of the powerful features of the ToolKit is its extension/inheritance technique that helps to cope with that issue.</p> <p>Suppose that you have marked a <code>private String sampleText;</code> in your <em>HelloWorld.java</em> with several ToolKit annotations and wish to use the same set of annotations for <code>private String anotherField;</code> in this or another class.</p> <p>To achieve this, add the <code>@Extends</code> annotation (the one that contains a pointer to <em>sampleText</em>) to <em>anotherText</em> field. Whatever widget annotation you defined for the <em>sampleText</em> field will now be "inherited" by <em>anotherText</em>. <br>You can still add another <code>@TextField</code> to <em>anotherText</em> with properties that were not specified in <em>sampleText</em> or have different values there. Thereby "inheritance with overriding" is achieved. See the following snippet:</p> <pre><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomPropertiesDialog</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@DialogField</span><span class="token punctuation">(</span>label <span class="token operator">=</span> <span class="token string">"My text field"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Extends</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">HelloWorld</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> field <span class="token operator">=</span> <span class="token string">"sampleText"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@TextField</span><span class="token punctuation">(</span>emptyText <span class="token operator">=</span> <span class="token string">"Enter your text here"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> anotherText<span class="token punctuation">;</span>
    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</code></pre> <p>The ToolKit will first look for the <em>sampleText</em> field in <em>HelloWorld.java</em> and, if it is found, will use that field's <code>@DialogField</code> and <code>@DatePicker</code> annotations to prepare an XML markup for the current field. For properties such as <em>label</em> or <em>emptyText</em> that have local "overrides", the local values will be used, and the rest will be taken from the <em>anotherText</em> field.</p> <p>Note: it is possible that the "parent" field in its own turn <code>@Extends</code>-es some third "grandparent" field, so rendering starts from "grandparent" (same as it is with inheriting class members in object-oriented programming).</p> <p>You should still make sure that all the fields involved have the same component annotation. A field marked with, say, <code>@DatePicker</code> will not extend some <code>@Checkbox</code> field, and so on.</p> <p>Also pay attention so that when you extend a field and add another field-specific annotation to override some properties (like in the sample above), property values are either replaced or appended (like adding values from an array-typed property of "child" to the array-typed property of "parent"), but not erased. You cannot replace a non-empty value of a "parent" with a blank, or empty, value of a "child." So take care to design your "inheritance tree" starting from fields with more abstract, less populated component annotations, and then shifting to more specific ones.</p> <h2 id="scripting-widget-properties'-values">Scripting widget properties' values</h2> <p>Imagine that you have a fieldset <code>ButtonFieldSet</code> that comprises settings for a button such as "label", "hyperlink", "does it open in a new window?" and so on. Naturally, this fieldset contains a number of annotated fields, such as <code>@TextField</code>, <code>@Checkbox</code>, etc., and is reused across several components.</p> <p>Now suppose that the requirement is such that in some of your components your "hyperlink" field must have the default value <em><a href="https://google.com/" target="_blank" rel="noopener norefferer">https://google.com</a></em>, and in some other components it should be <em><a href="https://bing.com/" target="_blank" rel="noopener norefferer">https://bing.com</a></em>. Also, in some cases the "open in a new window" checkbox should be checked by default, and in some other cases it should be unchecked.</p> <p>In this situation you would like to use some <em>variable</em> (or, in other words, <em>scripted value</em>) with your reusable fieldset. It is so that in <code>MyComponentA</code> you use the the fieldset with the "default hyperlink" set to Google, and in <code>MyComponentB</code> you use the same fieldset with the "default hyperlink" set to Bing.</p> <p>Here is a sample of how you can achieve this with the ToolKit:</p> <pre><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyComponentA</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@FieldSet</span>
    <span class="token annotation punctuation">@Setting</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"defaultHyperlink"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"https://google.com"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token annotation punctuation">@Setting</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"openInNewWindow"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"{Boolean}true"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">ButtonFieldSet</span> buttonFieldSet<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <pre><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyComponentB</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@FieldSet</span>
    <span class="token annotation punctuation">@Setting</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"defaultHyperlink"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"https://bing.com"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token annotation punctuation">@Setting</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"openInNewWindow"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"{Boolean}false"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">ButtonFieldSet</span> buttonFieldSet<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <pre><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ButtonFieldSet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@DialogField</span>
    <span class="token annotation punctuation">@TextField</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> label<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@DialogField</span>
    <span class="token annotation punctuation">@TextField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"${ @defaultHyperlink }"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> hyperlink<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@DialogField</span>
    <span class="token annotation punctuation">@Checkbox</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"${ @openInNewWindow }"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> openInNewWindow<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <p>The overall idea is that you declare a "named variable" with the <code>@Setting</code> annotation and then you "insert" it elsewhere into a String-typed property of another annotation using the string template like <code>${ @variableName }</code>. The format <code>@{ @variableName }</code> is also supported.</p> <p>The string template does not have to be the only content of a property value. You can combine it with other text, like <code>value = "https://www.google.com/${@defaultPath}"</code>.</p> <p>Every kind of property can be scripted except for properties of the <code>@Setting</code> annotation itself.</p> <p>Surely, you cannot pass a string template to a boolean-typed or a numeric property. There is however a workaround. If you need to turn a non-string value into a variable, pass it via an additional <code>@Property</code> annotation like in the following example:</p> <pre><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@FieldSet</span>
    <span class="token annotation punctuation">@Setting</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"minValue"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"{Double}0.0"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Setting</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"maxValue"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"{Double}100.0"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">MyFieldset</span> myFieldset<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFieldset</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@DialogField</span>
    <span class="token annotation punctuation">@NumberField</span><span class="token punctuation">(</span>min <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">/* an optional un-scripted default */</span><span class="token punctuation">,</span> max <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">/* another optional default */</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Property</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"min"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"${@minValue}"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Property</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"max"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"${@maxValue}"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <h5 id="what-are-the-places-you-can-declare-your-settings-in%3F">What are the places you can declare your settings in?</h5> <p>Basically, the ToolKit supports four sorts of settngs:</p> <ol> <li>Settings that are attached to the same class member they are used (usually does not make much sense but is possible).</li> <li>Settings that are attached to the <u>class</u> where the said member is declared or to any of its <u>superclasses</u>.</li> <li>Settings that are attached to the <u>member of another class</u> that has the type of the class in which the settings are used. In the code, this is referred to as the "upstream member".</li> </ol> <blockquote> <p>To put it simple, imagine that there is a field named <em>title</em> in a class named <em>MyFieldset</em>. Then, there is a field named <em>titleFieldset</em> of type <em>MyFieldset</em> in a class named <em>MyComponent</em>. <br>In this case <code>MyComponent.titleFieldset</code> is the <em>upstream member</em> for <code>MyFieldset.title</code>. If you annotate <code>MyComponent.titleFieldset</code> with <code>@Setting</code>, this annotation is respected as the upstream setting when rendering any annotation declared at <code>MyFieldset.title</code> .</p> </blockquote> <ol start="4"> <li>Settings that are attached to the <u>class where the upstream member is declared</u> or to any of its <u>superclasses</u>.</li> </ol> <p>As you see it, there is some "stack" of variables that can affect rendering of the current field, and these vars can belong to different "scopes". If there are variables with the same name, the values are overridden from the most "remote" scope to the most "close" one. That is, settings declared at level #4 in the list above are overridden by settings declared at level #3, then by level #2, and finally by level #1.</p> <h5 id="scripting-expressions-syntax">Scripting expressions syntax</h5> <p>Expressions within the <code>${}</code> or <code>@{}</code> brackets are not limited to just settings' names. They basically follow the (simplified) JavaScript syntax. Therefore, you can, for example, refer to a setting with a fallback value like <code>${@mySetting || 'default value'}</code> or use a ternary like <code>${@mySetting ? 'value if true' : 'value if false'}</code>. You can also use arithmetic operations, string concatenation, and so on.</p> <p>Inside the expression, you can use the special <code>@this</code> object (alias <code>source</code>). <code>@this</code> refers, naturally, to the class member that is being currently rendered.</p> <p>With <code>@this.class</code> you can get the declaring class of the current member. Then you can retrieve some "properties" of the class, like <code>@this.class.name</code> or <code>@this.class.parent</code>, or else a collection of <code>@this.class.ancestors</code>.</p> <p>With <code>@this.context</code> (alias <code>@this.upstream</code>) you can reach the "upstream" class member (see definition above) if the expression is being used inside a fieldset.</p> <p>There is a way to retrieve a property of a declared annotation with, e.g., <code>@this.annotation('DialogField').label</code>. You can also get all the declared annotations with <code>@this.annotations()</code>. Same way you can get a particular annotation or all the annotations of the declaring class with <code>@this.class.annotation('Dialog')</code> or <code>@this.class.annotations()[1]</code>. See more of it in the <a href="https://github.com/exadel-inc/etoolbox-authoring-kit/tree/master/plugin/src/test/com/exadel/aem/toolkit/plugin/handlers/common/cases/components" target="_blank" rel="noopener norefferer">test classes</a>.</p> <h5 id="property-scripting-or-dependson%3F">Property scripting or DependsOn?</h5> <p>From the first look on them, the interpolatable string templates discussed above appear similar to the <a href="/content/dev-tools/depends-on/introduction">DependsOn</a> queries. You must however understand the difference between them.</p> <p>Both techniques alter the view and/or behavior of a Touch UI dialog conditionally.</p> <p><em>DependsOn</em> does this dynamically (in runtime) in the browser. In a common scenario, <em>DependsOn</em> is used to modify the state of a dialog widget after the user interacted with another widget of the same dialog (like showing or hiding a text field upon checking or unchecking a box).</p> <p><em>Property scripting</em> with <code>@Setting</code>s this statically at the time of project building. It is used, e.g., to make a text field inside a fieldset display its default value as "Foo" when used within "MyComponentA" and "Bar" when used within "MyComponentB" -- all without the need to create two different fieldsets.</p> <p>You cannot however make a scripted template react to a user action like you would do with a <em>DependsOn</em> query. Also, you cannot refer to <code>@some_variable</code> declared with <code>@Setting</code> from a <em>DependsOn</em> query, and vice versa. All in all, property scripting and <em>DependsOn</em> modify the Touch UI experience from different angles and "live" in different worlds.</p> </div> </main> <esl-scrollbar target="::prev" class="main-scroll"></esl-scrollbar> <div class="header-shadow"></div> </div> <script src="/bundles/site.js"></script>   </body>