<head> <title>DependsOn API - Exadel Authoring Kit</title> <link rel="canonical" href="https://authoring-kit.com/content/dev-tools/depends-on/api"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <link rel="icon" type="image/png" href="/assets/logo-64x64.png"> <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SFSRZREMCC"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-SFSRZREMCC")</script> <script>!function(){var e="";"getRootNode"in Element.prototype&&window.customElements?window.scrollBy&&window.IntersectionObserver&&window.ResizeObserver&&window.ResizeObserver||(e="light"):e="medium",e&&document.write('<script type="text/javascript" src="/bundles/polyfill-'+e+'.js"><\/script>')}()</script> <link rel="stylesheet" type="text/css" href="/bundles/site.css"> </head> <body> <div class="page sidebar-layout"> <header class="header"> <nav class="header-container container"> <a class="header-link header-logo logo-animated" href="/" aria-label="landing page"> <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38"> <g clip-path="url(#a)" fill-rule="evenodd" clip-rule="evenodd" fill="#0082CA"> <path d="M23.7024 17.967a1.4253 1.4253 0 0 0 1.4276.7264 1.4273 1.4273 0 0 0 1.2019-1.0588 1.4265 1.4265 0 0 0-.16-1.0926L20.3532 6.4634A1.4044 1.4044 0 0 0 19 5.762a1.427 1.427 0 0 0-1.354.7014L6.9582 24.9731a1.4257 1.4257 0 0 0 .5227 1.9477 1.424 1.424 0 0 0 .527.1786 1.4243 1.4243 0 0 0 1.054-.2829 1.4253 1.4253 0 0 0 .3667-.4184L19 9.8206l4.7024 8.1464Z"></path> <path d="m31.0418 24.8667-2.2336-3.8608a1.399 1.399 0 0 0-.6642-.5941 1.4256 1.4256 0 0 0-.7608-.2253H15.7457a1.4251 1.4251 0 0 0 0 2.85h10.9512l1.8763 3.2534a1.426 1.426 0 0 0 2.5758-.3632 1.4255 1.4255 0 0 0-.1072-1.06Z"></path> <path d="M38 19C38 8.5029 29.4971 0 19 0S0 8.5029 0 19s8.502 19 19 19a18.859 18.859 0 0 0 8.134-1.8311 1.4094 1.4094 0 0 1-.7599-1.2113 17.567 17.567 0 0 1-7.3599 1.6148c-9.7017 0-17.575-7.8724-17.575-17.5751C1.4392 9.2947 9.2982 1.425 19 1.425c9.7017 0 17.575 7.876 17.575 17.575a17.4351 17.4351 0 0 1-3.1594 10.0467 1.4199 1.4199 0 0 1 .5471 1.1164v.5462A18.924 18.924 0 0 0 38 19Z"></path> <path d="M32.3001 29.6877h-4.2732a.7133.7133 0 0 0 0 1.4268h3.562v1.1873a.7125.7125 0 0 0 1.425 0v-1.8967a.7159.7159 0 0 0-.2081-.5068.7143.7143 0 0 0-.5057-.2106ZM32.0624 33.9627h-3.3261v-1.425a.7125.7125 0 1 0-1.425 0v2.1379a.7147.7147 0 0 0 .7094.7094h4.0373a.7125.7125 0 0 0 0-1.425l.0044.0027Z"></path> </g> <defs> <clipPath id="a"> <path fill="#fff" d="M0 0h38v38H0z"></path> </clipPath> </defs> </svg> <span class="header-short-name">Exadel Authoring Kit</span> <span class="header-long-name">Exadel Authoring Kit for AEM</span> </a> <ul class="header-links unstyled-list"> <li class="header-item"> <a class="header-link" href=".">Manuals</a> </li> <li class="header-item"> <a class="header-link" href="" target="_blank">API Docs</a> </li> <li class="header-item"> <a class="header-link" href="" target="_blank">Blog</a> </li> <li class="header-item"> <a class="header-link fill-primary" href="https://github.com/exadel-inc/etoolbox-authoring-kit" target="_blank" rel="noopener norefferer"> <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"> <path d="M10.6666 14.6668v-2.58a2.246 2.246 0 0 0-.6266-1.74c2.0933-.2333 4.2933-1.0267 4.2933-4.6667a3.6268 3.6268 0 0 0-1-2.5 3.38 3.38 0 0 0-.06-2.5133s-.7867-.2333-2.6067.9867a8.92 8.92 0 0 0-4.6666 0C4.18.4335 3.3933.6668 3.3933.6668a3.38 3.38 0 0 0-.06 2.5133 3.6267 3.6267 0 0 0-1 2.52c0 3.6133 2.2 4.4067 4.2934 4.6667A2.2458 2.2458 0 0 0 6 12.0868v2.58" fill="#0082CA"></path> <path d="M6 12.6668c-3.3333 1-3.3333-1.6667-4.6667-2m9.3333 4v-2.58a2.246 2.246 0 0 0-.6266-1.74c2.0933-.2333 4.2933-1.0267 4.2933-4.6667a3.6268 3.6268 0 0 0-1-2.5 3.38 3.38 0 0 0-.06-2.5133s-.7867-.2333-2.6067.9867a8.92 8.92 0 0 0-4.6666 0C4.18.4335 3.3933.6668 3.3933.6668a3.38 3.38 0 0 0-.06 2.5133 3.6267 3.6267 0 0 0-1 2.52c0 3.6133 2.2 4.4067 4.2934 4.6667A2.2458 2.2458 0 0 0 6 12.0868v2.58h4.6666Z" stroke="#0082CA" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </a> </li> </ul> <div class="header-utility"> <esl-trigger class="header-hamburger" target="#sidebar" aria-label="navigation menu"></esl-trigger> </div> </nav> </header> <eak-sidebar id="sidebar" class="open" aria-label="Site Navigation"> <nav class="sidebar-nav"> <a class="sidebar-heading" href="/"> <span class="sidebar-logo"> <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38"> <g clip-path="url(#a)" fill-rule="evenodd" clip-rule="evenodd" fill="#0082CA"> <path d="M23.7024 17.967a1.4253 1.4253 0 0 0 1.4276.7264 1.4273 1.4273 0 0 0 1.2019-1.0588 1.4265 1.4265 0 0 0-.16-1.0926L20.3532 6.4634A1.4044 1.4044 0 0 0 19 5.762a1.427 1.427 0 0 0-1.354.7014L6.9582 24.9731a1.4257 1.4257 0 0 0 .5227 1.9477 1.424 1.424 0 0 0 .527.1786 1.4243 1.4243 0 0 0 1.054-.2829 1.4253 1.4253 0 0 0 .3667-.4184L19 9.8206l4.7024 8.1464Z"></path> <path d="m31.0418 24.8667-2.2336-3.8608a1.399 1.399 0 0 0-.6642-.5941 1.4256 1.4256 0 0 0-.7608-.2253H15.7457a1.4251 1.4251 0 0 0 0 2.85h10.9512l1.8763 3.2534a1.426 1.426 0 0 0 2.5758-.3632 1.4255 1.4255 0 0 0-.1072-1.06Z"></path> <path d="M38 19C38 8.5029 29.4971 0 19 0S0 8.5029 0 19s8.502 19 19 19a18.859 18.859 0 0 0 8.134-1.8311 1.4094 1.4094 0 0 1-.7599-1.2113 17.567 17.567 0 0 1-7.3599 1.6148c-9.7017 0-17.575-7.8724-17.575-17.5751C1.4392 9.2947 9.2982 1.425 19 1.425c9.7017 0 17.575 7.876 17.575 17.575a17.4351 17.4351 0 0 1-3.1594 10.0467 1.4199 1.4199 0 0 1 .5471 1.1164v.5462A18.924 18.924 0 0 0 38 19Z"></path> <path d="M32.3001 29.6877h-4.2732a.7133.7133 0 0 0 0 1.4268h3.562v1.1873a.7125.7125 0 0 0 1.425 0v-1.8967a.7159.7159 0 0 0-.2081-.5068.7143.7143 0 0 0-.5057-.2106ZM32.0624 33.9627h-3.3261v-1.425a.7125.7125 0 1 0-1.425 0v2.1379a.7147.7147 0 0 0 .7094.7094h4.0373a.7125.7125 0 0 0 0-1.425l.0044.0027Z"></path> </g> <defs> <clipPath id="a"> <path fill="#fff" d="M0 0h38v38H0z"></path> </clipPath> </defs> </svg> </span> <span class="sidebar-title">Exadel Authoring Kit for AEM</span> </a> <div class="sidebar-content"> <div class="sidebar-scrollable-content esl-scrollable-content"> <ul class="sidebar-nav-list"> <li class="sidebar-nav-item"> <div class="sidebar-nav-item-heading"> Getting Started </div> <div class="sidebar-nav-secondary"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/getting-started/installation/"> Installation </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/getting-started/common-use-cases/"> Common Use Cases </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/getting-started/popular-articles/"> Popular Articles </a> </li> </ul> </div> </li> <li class="sidebar-nav-item"> <div class="sidebar-nav-item-heading"> Developer Tools </div> <div class="sidebar-nav-secondary"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item sidebar-secondary-nav-item-children"> <div class="sidebar-nav-item-heading"> <esl-trigger class="sidebar-nav-item-trigger sidebar-nav-item-arrow" target="::parent::next"> Component Management </esl-trigger> </div> <esl-panel id="sidebar-component-management-menu" class="sidebar-nav-secondary nav-secondary-panel" group=" component-management"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/component-structure/"> Component Structure </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-layout/"> Dialog Layout </a> </li> <li class="sidebar-nav-secondary-item sidebar-secondary-nav-item-children"> <div class="sidebar-nav-item-heading"> <esl-trigger class="sidebar-nav-item-trigger sidebar-nav-item-arrow" target="::parent::next"> Dialog Fields </esl-trigger> </div> <esl-panel id="sidebar-dialog-fields-menu" class="sidebar-nav-secondary nav-secondary-panel" group=" dialog-fields"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-fields/dialog-field/"> Dialog Field </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-fields/widgets/"> Widgets (A-Z) </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-fields/configuring-rte/"> Configuring RTE </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-fields/configuring-fieldset/"> Configuring Fieldset </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/dialog-fields/configuring-multifield/"> Configuring Multifield </a> </li> </ul> </esl-panel> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/additional-properties/"> Additional Properties </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/reusing-code/"> Reusing Code </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/component-management/customizing-toolkit/"> Customization </a> </li> </ul> </esl-panel> </li> <li class="sidebar-nav-secondary-item sidebar-secondary-nav-item-children"> <div class="sidebar-nav-item-heading active"> <esl-trigger class="sidebar-nav-item-trigger sidebar-nav-item-arrow" target="::parent::next" active=""> DependsOn </esl-trigger> </div> <esl-panel id="sidebar-depends-on-menu" class="sidebar-nav-secondary nav-secondary-panel open" data-open="" group=" depends-on"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/depends-on/introduction/"> Introduction </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/depends-on/usage/"> Usage </a> </li> <li class="sidebar-nav-secondary-item active" aria-selected="true"> <a class="sidebar-nav-secondary-link" aria-current="page" href="/content/dev-tools/depends-on/api/"> API </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/depends-on/examples/"> Examples </a> </li> </ul> </esl-panel> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/option-provider/"> Option Provider </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/injectors/"> Injectors </a> </li> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/dev-tools/allowed-components/"> Allowed Components </a> </li> </ul> </div> </li> <li class="sidebar-nav-item"> <div class="sidebar-nav-item-heading"> Authoring Tools </div> <div class="sidebar-nav-secondary"> <ul class="sidebar-nav-secondary-list"> <li class="sidebar-nav-secondary-item"> <a class="sidebar-nav-secondary-link" href="/content/authoring-tools/etoolbox-lists/"> Etoolbox Lists </a> </li> </ul> </div> </li> </ul> <div class="sidebar-footer-copyright"> EAK v2.4.1 © 2024<a class="sidebar-footer-link" href="https://exadel.com/" target="_blank" rel="noopener norefferer">Exadel</a>, Inc. </div> </div> <esl-scrollbar class="sidebar-scrollbar" target="::prev"></esl-scrollbar> </div> </nav> </eak-sidebar> <main class="esl-scrollable-content"> <div class="content mb-4 container markdown-container"> <div class="content-page-title"> <span class="parent-page">Developer Tools / </span> <span class="parent-page">DependsOn / </span> <h1 class="current-page">DependsOn API</h1> </div> <h2 id="actions">Actions</h2> <p>Built-in plug-in actions are:</p> <ul> <li><code>visibility</code> - hide the element if the Query result is 'falsy'. <u>This is the default action that is applied when no action is specified.</u></li> <li><code>tab-visibility</code> - hide the tab or the element's parent tab if the Query result is 'falsy'</li> <li><code>set</code> - set the Query result as the field's value (undefined Query result skipped)</li> <li><code>set-if-blank</code> - set the Query result as the field's value only if the current value is blank (undefined Query result skipped)</li> <li><code>readonly</code> - set the readonly marker of the field from the Query result.</li> <li><code>required</code> - set the required marker of the field from the Query result.</li> <li><code>validate</code> - set the validation state of the field from the Query result.</li> <li><code>disabled</code> - set the field's disabled state from the Query result. Supports multiple actions effect for the same field.</li> </ul> <h3 id="async-actions">Async actions</h3> <p>Built-in plug-in async actions:</p> <ul> <li><code>fetch</code> - an action to set the result of fetching an arbitrary resource. It uses Query result as a target path to a node or property. The path should end with the property name or '/' to retrieve the whole node. The path can be relative (e.g. 'node/property' or '../../property') or absolute ('whole/path/to/the/node/property'). <em>Additional parameters:</em> <ul> <li><code>map</code> (optional) - function <code>(result: any, name: string, path: string) =&gt; any</code> to process result. Can be used as mapping/keys-filtering or can provide more complicated actions.</li> <li><code>err</code> (optional, map to empty string and log error to console by default) - function <code>(error: Error, name: string, path: string) =&gt; any</code> to process error. Can be used to map or ignore error results. Note: If the mapping result is <code>undefined</code> then the action will not change the current value.</li> <li><code>postfix</code> (optional, <code>.json</code> by default) - a string to append to the path if it is not already presented</li> </ul> </li> </ul> <h3 id="widget-specific-actions">Widget-specific actions</h3> <ul> <li><code>update-options</code> - changes the option set of a Granite Select component based on the path from the Query result. The path can lead to any endpoint that is supported by the <a href="/content/dev-tools/option-provider">Option Provider mechanism</a>.</li> </ul> <h2 id="action-registry">Action Registry</h2> <p>Custom action can be specified using <code>Granite.DependsOnPlugin.ActionRegistry</code>.</p> <p>An action should have a name and function to execute. Action names support lower-case letters, numbers and '-'. All upper-case letters will be transformed to lower case. For example built-in <code>set</code> action is defined as follows:</p> <pre><code class="language-javascript">Granite<span class="token punctuation">.</span>DependsOnPlugin<span class="token punctuation">.</span>ActionRegistry<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'set'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Granite<span class="token punctuation">.</span>DependsOnPlugin<span class="token punctuation">.</span>ElementAccessors<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <h2 id="reference-types">Reference Types</h2> <p>Allowed reference types:</p> <ul> <li><code>boolean</code> - cast to boolean (according to JS cast rules)</li> <li><code>boolstring</code> - cast as a string value to boolean (true if string cast equals "true")</li> <li><code>number</code> - cast to number value</li> <li><code>string</code> - cast to string</li> <li><code>json</code> - parse JSON string</li> </ul> <p>If the type is not specified manually, it will be chosen automatically based on the type of element widget (see <em>preferableType</em> in the ElementsAccessor definition).</p> <p>In any other case (e.g. if the type is <code>any</code>), no cast will be performed.</p> <p>Note: If you use a Hidden field to save a temporary boolean result, use <code>boolstring</code> reference type in order to retrieve it.</p> <h2 id="elementsaccessor-registry">ElementsAccessor Registry</h2> <p>Registry <code>Granite.DependsOnPlugin.ElementAccessors</code> - can be used to define the custom accessors of an element. The accessor provides information on how to get/set values, set a require/visibility/disabled state, or returns <code>preferableType</code> for the specific type of component.</p> <p>For example, a default accessor descriptor is defined as follows:</p> <pre><code class="language-javascript">Granite<span class="token punctuation">.</span>DependsOnPlugin<span class="token punctuation">.</span>ElementAccessors<span class="token punctuation">.</span><span class="token function">registerAccessor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token comment">// Selector to filter element</span>
    <span class="token literal-property property">preferableType</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> $el<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$el<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        $el<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">required</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$el<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        $el<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'required'</span><span class="token punctuation">,</span> val <span class="token operator">?</span> <span class="token string">'true'</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $el<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'aria-required'</span><span class="token punctuation">,</span> val <span class="token operator">?</span> <span class="token string">'true'</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Granite<span class="token punctuation">.</span>DependsOnPlugin<span class="token punctuation">.</span>ElementAccessors<span class="token punctuation">.</span><span class="token function">updateValidity</span><span class="token punctuation">(</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">visibility</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$el<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        $el<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">,</span> state <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $el<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.coral-Form-fieldwrapper'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">,</span> state <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Granite<span class="token punctuation">.</span>DependsOnPlugin<span class="token punctuation">.</span>ElementAccessors<span class="token punctuation">.</span><span class="token function">clearValidity</span><span class="token punctuation">(</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">disabled</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$el<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        $el<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">,</span> state <span class="token operator">?</span> <span class="token string">'true'</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $el<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.coral-Form-fieldwrapper'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">,</span> state <span class="token operator">?</span> <span class="token string">'true'</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Granite<span class="token punctuation">.</span>DependsOnPlugin<span class="token punctuation">.</span>ElementAccessors<span class="token punctuation">.</span><span class="token function">clearValidity</span><span class="token punctuation">(</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <h2 id="query-syntax">Query Syntax</h2> <p>A Query is a plain JavaScript condition or expression. Any global and native JavaScript object can be used inside a Query. You can also use dynamic references to access other fields' values. In order to define a reference, the referenced field's name should be specified in a <code>dependsOnRef</code> attribute. Then the reference will be accessible in the Query using the <code>@</code> or <code>@@</code> symbol and reference name.</p> <h3 id="using-semicolons-in-dependson-queries">Using Semicolons in DependsOn Queries</h3> <p>DependsOn queries are always treated as a single JavaScript expression and never as multiple statements in one line. Semicolon symbols (<code>;</code>) within a DependsOn Query must be escaped.</p> <p>If you add a Query via a Java annotation, semicolons will be escaped automatically:</p> <pre><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@DependsOn</span><span class="token punctuation">(</span>query <span class="token operator">=</span> <span class="token string">"@field === ';'"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> field1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <p>But, if you write directly to XML or HTML, you should escape them by hand:</p> <pre><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">granite:</span>data</span> <span class="token attr-name">dependson</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@field === '\\;'<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <p>If you need to actually execute several JavaScript statements within a DependsOn, you can do this by wrapping them in a function call:</p> <pre><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@DependsOn</span><span class="token punctuation">(</span>query <span class="token operator">=</span> <span class="token string">"function(){ var a = @field1 + @field2; return a * a &lt; 4; }()"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> field<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <p>Be aware that it is still better to move complex structures to a standalone client library</p> <pre><code class="language-javascript">  <span class="token comment">// project-clientlib.js</span>
  window<span class="token punctuation">.</span>MyUtils <span class="token operator">=</span> window<span class="token punctuation">.</span>MyUtils <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>MyUtils<span class="token punctuation">.</span><span class="token function-variable function">fieldAccepted</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">field1<span class="token punctuation">,</span> field2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> a <span class="token operator">=</span> field1 <span class="token operator">+</span> field2<span class="token punctuation">;</span>
      <span class="token keyword">return</span> a <span class="token operator">*</span> a <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <pre><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@DependsOn</span><span class="token punctuation">(</span>query <span class="token operator">=</span> <span class="token string">"MyUtils.fieldAccepted(@field1, @field2)"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> field<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <h3 id="query-reference-syntax">Query Reference Syntax</h3> <p>There are two versions of references available in the Queries:</p> <ul> <li>'Single' reference: <code>@reference</code>. 'Single' reference starts from the <code>@</code> symbol in the Query, it allows you to access a defined field value. 'Single' reference should reference an existing field and will not be reattached on dynamic DOM change.</li> <li>'Multiple' reference: <code>@@reference</code>. Starts from double <code>@</code> symbols. Allows you to access a group of field values marked by the same reference name. 'Multiple' reference always returns an array in the Query.</li> </ul> <p>Note: 'multiple' reference triggers Query update on any group update: changing some of group’s fields value or adding/removing a referenced field.</p> <p>'this' is a reserved word for reference names. Using <code>@this</code> you can retrieve the value of the current element. In this case there is no need to specify a reference name unless you want to use it outside the current element.</p> <p>The area to find a referenced field can be narrowed down by providing the Scope. The Scope is a CSS Selector of the closest container element. The Scope is defined in parentheses after the reference name.</p> <p>Examples:</p> <ul> <li><code>@enableCta (coral-panel)</code> - will reference the value of the field marked by <code>dependsOnRef=enableCta</code> in bounds of the closest parent Panel element.</li> <li><code>@enableCta (.my-fieldset)</code> - will reference the value of the field marked by <code>dependsOnRef=enableCta</code> in bounds of the closest parent container element with "my-fieldset" class.</li> <li><code>@@enableCta (coral-multifield)</code> - will reference all values of the fields marked by <code>dependsOnRef=enableCta</code> in bounds of the closest multifield.</li> </ul> <p>"Back-forward" CSS selectors are available in the Scope syntax, i.e. we can define the CSS selector to determine the parent element and then provide a selector to search the target element for scope in bounds of the found parent. Back and forward selectors are separated by '|&gt;'.</p> <p>For example:</p> <ul> <li><code>@enableCta (section |&gt; .fieldset-1)</code> - will reference the value of the field marked by <code>dependsOnRef=enableCta</code> in bounds of element with <code>fieldset-1</code> class placed in the closest parent section element.</li> </ul> <h2 id="multiple-actions">Multiple Actions</h2> <p>Multiple actions with Queries can be defined. Queries/Actions should be separated by ';' and placed in the same order. The number of Actions should match the number of Queries.</p> <p>Static action’s params can be passed through data attributes with the following syntax:</p> <ul> <li>for a single and first action <code>data-dependson-{action}-{paramName}</code> can be easily accessed and used from action, e.g. <code>data-dependson-validate-msg</code> will be used by <code>validate</code> action as invalid state message</li> <li>for multiple actions of the same type additional actions params should end with <code>-{index}</code> (1 for the second action, 2 for the third). e.g. <code>data-dependson-validate-msg-1</code> will be used by second <code>validate</code> action as invalid state message</li> </ul> </div> </main> <esl-scrollbar target="::prev" class="main-scroll"></esl-scrollbar> <div class="header-shadow"></div> </div> <script src="/bundles/site.js"></script>   </body>